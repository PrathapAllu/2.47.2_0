let u,g,y;function O(e,n){if(y=new Date,e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if(e.tagName.toLowerCase()==="html")return"html";const r={root:document.body,idName:o=>!0,className:o=>!0,tagName:o=>!0,attr:(o,i)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};u={...r,...n},g=D(u.root,r);let t=m(e,"all",()=>m(e,"two",()=>m(e,"one",()=>m(e,"none"))));if(t){const o=T(C(t,e));return o.length>0&&(t=o[0]),d(t)}else throw new Error("Selector was not found.")}function D(e,n){return e.nodeType===Node.DOCUMENT_NODE?e:e===n.root?e.ownerDocument:e}function m(e,n,r){let t=null,o=[],i=e,f=0;for(;i;){const a=new Date().getTime()-y.getTime();if(u.timeoutMs!==void 0&&a>u.timeoutMs)throw new Error(`Timeout: Can't find a unique selector after ${a}ms`);let l=h(L(i))||h(...$(i))||h(...x(i))||h(_(i))||[S()];const s=j(i);if(n=="all")s&&(l=l.concat(l.filter(N).map(c=>p(c,s))));else if(n=="two")l=l.slice(0,1),s&&(l=l.concat(l.filter(N).map(c=>p(c,s))));else if(n=="one"){const[c]=l=l.slice(0,1);s&&N(c)&&(l=[p(c,s)])}else n=="none"&&(l=[S()],s&&(l=[p(l[0],s)]));for(let c of l)c.level=f;if(o.push(l),o.length>=u.seedMinLength&&(t=E(o,r),t))break;i=i.parentElement,f++}return t||(t=E(o,r)),!t&&r?r():t}function E(e,n){const r=T(b(e));if(r.length>u.threshold)return n?n():null;for(let t of r)if(w(t))return t;return null}function d(e){let n=e[0],r=n.name;for(let t=1;t<e.length;t++){const o=e[t].level||0;n.level===o-1?r=`${e[t].name} > ${r}`:r=`${e[t].name} ${r}`,n=e[t]}return r}function v(e){return e.map(n=>n.penalty).reduce((n,r)=>n+r,0)}function w(e){const n=d(e);switch(g.querySelectorAll(n).length){case 0:throw new Error(`Can't select any node with this selector: ${n}`);case 1:return!0;default:return!1}}function L(e){const n=e.getAttribute("id");return n&&u.idName(n)?{name:"#"+CSS.escape(n),penalty:0}:null}function $(e){return Array.from(e.attributes).filter(n=>u.attr(n.name,n.value)).map(n=>({name:`[${CSS.escape(n.name)}="${CSS.escape(n.value)}"]`,penalty:.5}))}function x(e){return Array.from(e.classList).filter(u.className).map(n=>({name:"."+CSS.escape(n),penalty:1}))}function _(e){const n=e.tagName.toLowerCase();return u.tagName(n)?{name:n,penalty:2}:null}function S(){return{name:"*",penalty:3}}function j(e){const n=e.parentNode;if(!n)return null;let r=n.firstChild;if(!r)return null;let t=0;for(;r&&(r.nodeType===Node.ELEMENT_NODE&&t++,r!==e);)r=r.nextSibling;return t}function p(e,n){return{name:e.name+`:nth-child(${n})`,penalty:e.penalty+1}}function N(e){return e.name!=="html"&&!e.name.startsWith("#")}function h(...e){const n=e.filter(A);return n.length>0?n:null}function A(e){return e!=null}function*b(e,n=[]){if(e.length>0)for(let r of e[0])yield*b(e.slice(1,e.length),n.concat(r));else yield n}function T(e){return[...e].sort((n,r)=>v(n)-v(r))}function*C(e,n,r={counter:0,visited:new Map}){if(e.length>2&&e.length>u.optimizedMinLength)for(let t=1;t<e.length-1;t++){if(r.counter>u.maxNumberOfTries)return;r.counter+=1;const o=[...e];o.splice(t,1);const i=d(o);if(r.visited.has(i))return;w(o)&&q(o,n)&&(yield o,r.visited.set(i,!0),yield*C(o,n,r))}}function q(e,n){return g.querySelector(d(e))===n}function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}var z={ignoreId:!1};function P(e,n){var r=M({},z,n),t=e;if(t&&t.id&&!r.ignoreId)return'//*[@id="'+t.id+'"]';for(var o=[];t&&Node.ELEMENT_NODE===t.nodeType;){for(var i=0,f=!1,a=t.previousSibling;a;)a.nodeType!==Node.DOCUMENT_TYPE_NODE&&a.nodeName===t.nodeName&&i++,a=a.previousSibling;for(a=t.nextSibling;a;){if(a.nodeName===t.nodeName){f=!0;break}a=a.nextSibling}o.push((t.prefix?t.prefix+":":"")+t.localName+(i||f?"["+(i+1)+"]":"")),t=t.parentNode}return o.length?"/"+o.reverse().join("/"):""}export{O as f,P as g};
