var xl;import{R as St,j as d,c as $,I as ae,a as nn,F as Xo,r as rr}from"./Icon-8dd1dd62.js";import{G as El,z as Pt,H as Cl,t as Y,I as or,J as Yo,K as jl,L as Sl,v as Qe,s as ue,N as Pl,E as ce,O as Ko,q as ar,P as Tl,Q as be,R as Qo,T as Zo,V as Jo,W as rn,X as ir,Y as Rl,B as Il,k as on,Z as Nl,_ as Ml,C as ea,p as Al,$ as Dl,a0 as Ol,a1 as Ll,a2 as Fl,w as zl}from"./store-fcbe2a1f.js";import{p as Bl}from"./App.styles-6767708f.js";import{R as H,r as s}from"./index-8b3efc3f.js";import{u as re,P as Hl}from"./react-redux-52a3bd12.js";import{s as $l}from"./options-0d513709.js";import{m as ta}from"./index-f7a5862e.js";import{a as Vl,c as Ul,d as ql,e as sr,g as Gl,h as Wl,i as Xl,j as Yl,k as na,l as Kl,m as ra,n as oa,o as Ql,p as Zl,q as Jl,r as ec}from"./index-02c9c348.js";import{B as Q}from"./Button-7b9bff07.js";import{T as dt,a as de,b as pe,c as me,$ as aa,e as ia,f as tc,g as sa,h as nc,S as qe,i as rc,j as la,k as oc}from"./Switch-b264271b.js";import{$ as ca,h as ua,a as da,b as pa,c as lr,D as ac,i as ic,d as sc,e as lc,f as ma,P as fa,M as cc,g as ha,j as uc,B as dc,w as ga,s as pc,E as mc}from"./ExtensionDropdown-44b7ec8c.js";import{u as fc}from"./useBackgroundReduxState-2f75ce2f.js";import{u as hc,a as gc}from"./useDomainAllowlistListener-5a0e0c4c.js";import{C as bc,u as vc}from"./useExtensionMessagesListener-4d9e1118.js";import{t as Tt}from"./trackEventViaMessage-5bc40ab7.js";import{f as cr,g as ba}from"./index.esm-e3d6f8ec.js";import{I as xc,f as va,a as wc,i as yc,p as xa,t as wa,b as ur,g as dr,s as an,c as ya,d as _c,e as kc}from"./scribeLiveUtils-cf601fda.js";import{g as Ec,S as Cc,a as pr}from"./redactionManager-58a2272d.js";import{g as mr}from"./getTargetElementAttributes-3f1109f1.js";import{u as jc,A as Sc}from"./Avatar-355cf6f2.js";import{B as _a}from"./googleFaviconServiceHelper-8a59a545.js";import{C as Pc}from"./Checkbox-9bb341e6.js";import{I as Tc,E as ka}from"./Input-35a73570.js";import{_ as V,$ as sn,c as Ea,a as se,b as ye,d as Rc}from"./index-971785a2.js";import{d as Ae,a as te,$ as fr,e as Re,f as Ca,L as Ic}from"./Label-43f6936b.js";import{$ as ln}from"./index-e669e871.js";import{a as Nc,d as Mc}from"./index-0e244c8a.js";import{m as Ac,e as Dc,n as Oc,d as Lc,o as Fc,l as zc,p as Bc,q as Hc,r as $c,s as hr,t as Vc,u as Uc,v as qc,w as Gc,x as Wc,y as Xc,z as Yc,A as Kc,h as Qc,B as Zc,C as Jc,D as ja,E as eu,F as tu,G as nu,H as ru}from"./index-13d794b2.js";import{S as De}from"./DocumentIcon-f87a7824.js";import{T as ou,g as Sa,s as au}from"./utils-9599cb9e.js";import{c as Ze}from"./index-e131923d.js";import{g as gr,c as ie}from"./_commonjsHelpers-de833af9.js";import{g as iu}from"./getExtensionStatus-1ed3356e.js";import{i as cn}from"./userHelpers-16bc7dd8.js";import{v as Pa}from"./v4-c70744d4.js";import{B as su}from"./AudioSwitch-b354519f.js";import{w as lu}from"./waitForPageSettled-5dce853c.js";import{a as Ta}from"./domCopyAnnotate-a2b92afc.js";import"./index-e7938b7c.js";import"./FAIcon-d24804f9.js";import"./longRunningRecorder-5bbcc7ac.js";import"./allowedDomainsDB-2da60848.js";import"./scribeSuggestions-6bff5e43.js";import"./Toolbar-bf89fd8a.js";import"./browserContext-8e292c38.js";import"./index-6fce6c48.js";var un=(e=>(e.NotFoundScreenshot="Refer to the screenshot, then click \u201CNext\u201D to continue.",e.NotFoundStep="Refer to the step, then click \u201CNext\u201D to continue.",e.UrlMismatch="Looks like you\u2019re on a different page.",e))(un||{});const cu=async()=>{var t,n;const e=El();return e===Pt.Chrome||e===Pt.Unknown?Cl()?Pt.Arc:(n=await((t=chrome==null?void 0:chrome.windows)==null?void 0:t.getCurrent()))!=null&&n.vivExtData?Pt.Vivaldi:e:e},Rt="crxjs-ext",uu=e=>e.length===0?null:e.length>=2&&e[0]===document.getElementById(Rt)?e[1]:e[0],br=()=>{const e=document.getElementById(Rt);if(!e)return null;const{shadowRoot:t}=e;return t?t.getElementById("root-scribe-elem"):null};function Ra(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function vr(e,t){return vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},vr(e,t)}function Ia(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,vr(e,t)}function du(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function pu(e,t){e.classList?e.classList.add(t):du(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Na(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function mu(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Na(e.className,t):e.setAttribute("class",Na(e.className&&e.className.baseVal||"",t))}const Ma={disabled:!1},Aa=H.createContext(null);var Da=function(e){return e.scrollTop},It="unmounted",Je="exited",et="entering",pt="entered",xr="exiting",Fe=function(e){Ia(t,e);function t(r,o){var i;i=e.call(this,r,o)||this;var c=o,l=c&&!c.isMounting?r.enter:r.appear,u;return i.appearStatus=null,r.in?l?(u=Je,i.appearStatus=et):u=pt:r.unmountOnExit||r.mountOnEnter?u=It:u=Je,i.state={status:u},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,o){var i=r.in;return i&&o.status===It?{status:Je}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var o=null;if(r!==this.props){var i=this.state.status;this.props.in?i!==et&&i!==pt&&(o=et):(i===et||i===pt)&&(o=xr)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,o,i,c;return o=i=c=r,r!=null&&typeof r!="number"&&(o=r.exit,i=r.enter,c=r.appear!==void 0?r.appear:i),{exit:o,enter:i,appear:c}},n.updateStatus=function(r,o){if(r===void 0&&(r=!1),o!==null)if(this.cancelNextCallback(),o===et){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:St.findDOMNode(this);i&&Da(i)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Je&&this.setState({status:It})},n.performEnter=function(r){var o=this,i=this.props.enter,c=this.context?this.context.isMounting:r,l=this.props.nodeRef?[c]:[St.findDOMNode(this),c],u=l[0],f=l[1],h=this.getTimeouts(),v=c?h.appear:h.enter;if(!r&&!i||Ma.disabled){this.safeSetState({status:pt},function(){o.props.onEntered(u)});return}this.props.onEnter(u,f),this.safeSetState({status:et},function(){o.props.onEntering(u,f),o.onTransitionEnd(v,function(){o.safeSetState({status:pt},function(){o.props.onEntered(u,f)})})})},n.performExit=function(){var r=this,o=this.props.exit,i=this.getTimeouts(),c=this.props.nodeRef?void 0:St.findDOMNode(this);if(!o||Ma.disabled){this.safeSetState({status:Je},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:xr},function(){r.props.onExiting(c),r.onTransitionEnd(i.exit,function(){r.safeSetState({status:Je},function(){r.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,o){o=this.setNextCallback(o),this.setState(r,o)},n.setNextCallback=function(r){var o=this,i=!0;return this.nextCallback=function(c){i&&(i=!1,o.nextCallback=null,r(c))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(r,o){this.setNextCallback(o);var i=this.props.nodeRef?this.props.nodeRef.current:St.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!i||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],u=l[0],f=l[1];this.props.addEndListener(u,f)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===It)return null;var o=this.props,i=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var c=Ra(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return H.createElement(Aa.Provider,{value:null},typeof i=="function"?i(r,c):H.cloneElement(H.Children.only(i),c))},t}(H.Component);Fe.contextType=Aa,Fe.propTypes={};function mt(){}Fe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:mt,onEntering:mt,onEntered:mt,onExit:mt,onExiting:mt,onExited:mt},Fe.UNMOUNTED=It,Fe.EXITED=Je,Fe.ENTERING=et,Fe.ENTERED=pt,Fe.EXITING=xr;const fu=Fe;var hu=function(e,t){return e&&t&&t.split(" ").forEach(function(n){return pu(e,n)})},wr=function(e,t){return e&&t&&t.split(" ").forEach(function(n){return mu(e,n)})},yr=function(e){Ia(t,e);function t(){for(var r,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=e.call.apply(e,[this].concat(i))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(l,u){var f=r.resolveArguments(l,u),h=f[0],v=f[1];r.removeClasses(h,"exit"),r.addClass(h,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(l,u)},r.onEntering=function(l,u){var f=r.resolveArguments(l,u),h=f[0],v=f[1],w=v?"appear":"enter";r.addClass(h,w,"active"),r.props.onEntering&&r.props.onEntering(l,u)},r.onEntered=function(l,u){var f=r.resolveArguments(l,u),h=f[0],v=f[1],w=v?"appear":"enter";r.removeClasses(h,w),r.addClass(h,w,"done"),r.props.onEntered&&r.props.onEntered(l,u)},r.onExit=function(l){var u=r.resolveArguments(l),f=u[0];r.removeClasses(f,"appear"),r.removeClasses(f,"enter"),r.addClass(f,"exit","base"),r.props.onExit&&r.props.onExit(l)},r.onExiting=function(l){var u=r.resolveArguments(l),f=u[0];r.addClass(f,"exit","active"),r.props.onExiting&&r.props.onExiting(l)},r.onExited=function(l){var u=r.resolveArguments(l),f=u[0];r.removeClasses(f,"exit"),r.addClass(f,"exit","done"),r.props.onExited&&r.props.onExited(l)},r.resolveArguments=function(l,u){return r.props.nodeRef?[r.props.nodeRef.current,l]:[l,u]},r.getClassNames=function(l){var u=r.props.classNames,f=typeof u=="string",h=f&&u?u+"-":"",v=f?""+h+l:u[l],w=f?v+"-active":u[l+"Active"],j=f?v+"-done":u[l+"Done"];return{baseClassName:v,activeClassName:w,doneClassName:j}},r}var n=t.prototype;return n.addClass=function(r,o,i){var c=this.getClassNames(o)[i+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;o==="appear"&&i==="done"&&u&&(c+=" "+u),i==="active"&&r&&Da(r),c&&(this.appliedClasses[o][i]=c,hu(r,c))},n.removeClasses=function(r,o){var i=this.appliedClasses[o],c=i.base,l=i.active,u=i.done;this.appliedClasses[o]={},c&&wr(r,c),l&&wr(r,l),u&&wr(r,u)},n.render=function(){var r=this.props;r.classNames;var o=Ra(r,["classNames"]);return H.createElement(fu,V({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(H.Component);yr.defaultProps={classNames:""},yr.propTypes={};const gu=yr,bu=({children:e})=>{const[t,n]=s.useState(!1),[r,o]=s.useState(null);return s.useEffect(()=>{const i=c=>{var l;c.messageType==="currentTabChanged"&&n(r===((l=c==null?void 0:c.selfTab)==null?void 0:l.id))};return ta.send("isCurrentTab").then(c=>{var l;n(c.isCurrent||!1),o(((l=c.selfTab)==null?void 0:l.id)||null)}),chrome.runtime.onMessage.addListener(i),()=>{chrome.runtime.onMessage.removeListener(i)}},[r]),t?e:null};function vu(){var e;(e=document==null?void 0:document.querySelectorAll("[_i_d]"))==null||e.forEach(t=>t==null?void 0:t.removeAttribute("_i_d"))}function Oa(){let e=0;vu(),Array.from(document.body.querySelectorAll("*")).reverse().forEach(t=>{const{display:n,visibility:r,opacity:o}=window.getComputedStyle(t),{height:i,width:c}=t.getBoundingClientRect(),l=n==="none"||r==="hidden"||r==="collapse"||o==="0";!t.hasAttribute("_i_d")&&c&&i&&!l&&(t.setAttribute("_i_d",`${e}`),e+=1)})}const xu=()=>{const[e,t]=s.useState(!1);return s.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)");t(n.matches);const r=()=>t(n.matches);return n.addEventListener("change",r),()=>n.removeEventListener("change",r)},[]),{prefersReducedMotion:e,prefersReducedMotionClassNames:e?"motion-reduce:transition-none":""}},La=s.forwardRef((e,t)=>{const{prefersReducedMotion:n}=xu(),r=3,o=e.sizeIncrease?56:32,i=128,c=(e==null?void 0:e.clickTargetColor)||"F43F5E",l=typeof c=="object"&&c!==null,u=o/2,f=2,h=l?"url(#target-gradient)":`#${c}`,v=l?c==null?void 0:c.from:`#${c}`,w=i/2,j=i/3,b=i/2-2,g=({inset:I=0})=>d.jsx("animate",{begin:0,attributeName:"r",dur:r,from:u-I,to:u-I,values:`${u-I}; ${u+2-I}; ${u-I};`,calcMode:"spline",keySplines:"0.4 0 0.5 1; 0.5 0 0.4 1",repeatCount:"indefinite"}),E=({size:I,delay:O=0})=>!n&&d.jsxs(d.Fragment,{children:[d.jsx("animate",{begin:O,attributeName:"r",from:0,to:I,values:`0; ${I}; ${I}; ${I}`,dur:r,calcMode:"spline",keySplines:"0 0 0 1; 0 0 1 1; 0 0 1 1",repeatCount:"indefinite"}),d.jsx("animate",{begin:O,attributeName:"opacity",from:"0.8",to:"0",values:"0.8; 0.05; 0; 0; 0",dur:r,repeatCount:"indefinite"})]}),T=()=>l&&d.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:`0 ${w} ${w}`,to:`360 ${w} ${w}`,dur:r,repeatCount:"indefinite"});return d.jsx("div",{className:"relative flex size-8 items-center justify-center overflow-visible",children:d.jsxs("svg",{width:i,height:i,viewBox:`0 0 ${i} ${i}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,className:"pointer-events-none absolute",...e,children:[d.jsx("defs",{children:l&&c&&d.jsxs("linearGradient",{id:"target-gradient",x1:"0",y1:"0",x2:"1",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:c.from,children:d.jsx("animate",{attributeName:"stop-color",values:`${c.from}; ${c.to}; ${c.via}; ${c.from}`,dur:r,repeatCount:"indefinite"})}),d.jsx("stop",{offset:"50%",stopColor:c.via,children:d.jsx("animate",{attributeName:"stop-color",values:`${c.via}; ${c.from}; ${c.to}; ${c.via}`,dur:r,repeatCount:"indefinite"})}),d.jsx("stop",{offset:"100%",stopColor:c.to,children:d.jsx("animate",{attributeName:"stop-color",values:`${c.to}; ${c.via}; ${c.from}; ${c.to}`,dur:r,repeatCount:"indefinite"})})]})}),d.jsx("defs",{children:d.jsxs("mask",{id:"cutout",children:[d.jsx("rect",{width:"100%",height:"100%",fill:"white"}),d.jsx("circle",{r:u,cx:w,cy:w,fill:"black",children:g({inset:f})})]})}),d.jsxs("g",{mask:"url(#cutout)",children:[d.jsx("circle",{cx:w,cy:w,r:u+f,fill:h,vectorEffect:"non-scaling-stroke",children:g({})}),d.jsx("circle",{cx:w,cy:w,r:j,opacity:"0.3",fill:h,fillOpacity:"0.4",stroke:v,vectorEffect:"non-scaling-stroke",children:E({size:j,delay:.3})}),d.jsx("circle",{cx:w,cy:w,r:b,opacity:"0.3",fill:h,fillOpacity:"0.2",stroke:v,vectorEffect:"non-scaling-stroke",children:E({size:b})}),T()]})]})})}),_r=({element:e,subtreeEnabled:t,isPinning:n})=>{const[r,o]=s.useState({x:0,y:0}),[i,c]=s.useState(!1),l=()=>{if(e){const{x:u,y:f}=e.getBoundingClientRect();o({x:u,y:f})}};return s.useEffect(()=>{if(!e||n){c(!1),o({x:0,y:0});return}l();const u=new IntersectionObserver(g=>{const E=g[0];c(E.isIntersecting),E.isIntersecting&&l()},{threshold:[0]});u.observe(e);const f=[];let h=e.parentElement;for(;h;){const{overflowY:g}=window.getComputedStyle(h);(g==="auto"||g==="scroll")&&(f.push(h),h.addEventListener("scroll",l)),h=h.parentElement}window.addEventListener("scroll",l,{passive:!0}),window.addEventListener("resize",l);const v=new ResizeObserver(()=>{l()});v.observe(e);let w=e.parentElement;for(;w;)v.observe(w),w=w.parentElement;const j=new MutationObserver(()=>{l()});let b=e;for(;b;)j.observe(b,{attributes:!0,childList:!0,subtree:t}),b=b.parentElement;return()=>{u.disconnect(),v.disconnect(),j.disconnect(),window.removeEventListener("scroll",l),window.removeEventListener("resize",l),f.forEach(g=>{g.removeEventListener("scroll",l)})}},[e,n]),{position:r,isVisible:i}},kr=({className:e})=>d.jsxs("div",{className:$("h-[20px] px-1.5 py-2 bg-gradient-to-r from-indigo-600/20 to-cyan-400/20 rounded-md inline-flex justify-center items-center gap-1",e),children:[d.jsx(ae,{icon:Vl,className:"text-cyan-400 size-3"}),d.jsx("div",{className:"text-center justify-start text-white/90 text-xs font-medium font-['Public_Sans'] leading-[10px]",children:"Suggested step"})]}),wu=({targetHovered:e,modalInstruction:t,isClickContainerVisible:n})=>{const[r,o]=s.useState(!1),i=s.useRef(null),c=s.useRef(null),l=s.useRef(null);return s.useEffect(()=>{var h;const u=v=>{var w,j;v.stopPropagation(),(v.target===(c==null?void 0:c.current)||(w=c==null?void 0:c.current)!=null&&w.contains(v.target))&&chrome.runtime.sendMessage({messageType:"pauseCopilotFromBrowser",source:"ClickTargetModal.tsx"}),(v.target===(l==null?void 0:l.current)||(j=l==null?void 0:l.current)!=null&&j.contains(v.target))&&chrome.runtime.sendMessage({messageType:"stopCopilotFromBrowser"})},f=(h=i.current)==null?void 0:h.getRootNode();return f&&f.addEventListener("mousedown",u),()=>{f&&f.removeEventListener("mousedown",u)}},[i]),s.useLayoutEffect(()=>{const u=()=>{i.current&&requestAnimationFrame(()=>{if(!i.current)return;const f=i.current.getBoundingClientRect(),h=window.innerWidth<Math.ceil(f.right)+12,v=window.innerWidth-Math.ceil(f.x)-Math.ceil(f.width)*2-56-12>36;!r&&h&&o(!0),r&&v&&o(!1)})};return u(),window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[r,n]),d.jsx(dt,{children:d.jsx("div",{ref:i,className:$("pointer-events-auto cursor-default h-20 w-max max-w-[450px] mt-[-12px] pl-3 pr-3.5 py-2 bg-slate-950/75 rounded-xl shadow-[0px_10px_16px_-11px_rgba(2,6,23,0.75)] ring-1 ring-slate-950/75 border border-white/25 backdrop-blur-lg flex-col justify-center items-start gap-1 inline-flex overflow-hidden",{"relative right-full mr-4":r,"opacity-0":e}),children:d.jsxs("div",{className:"pl-1 flex-col gap-2 flex",children:[d.jsx("div",{className:"text-slate-100 text-sm font-medium leading-tight ml-1",children:t||"Click here"}),d.jsxs("div",{className:"flex gap-1 items-center",children:[d.jsx(kr,{}),d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{"data-testid":"copilot-modal-pause-btn",variant:"ghost",icon:Ul,theme:"dark",size:"small",ref:c})}),d.jsx(me,{side:"top",sideOffset:8,className:"text-xs",variant:"compact",avoidCollisions:!1,children:"Pause"})]}),d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{"data-testid":"copilot-modal-stop-btn",variant:"ghost",icon:ql,theme:"dark",size:"small",ref:l})}),d.jsx(me,{side:"top",sideOffset:8,className:"text-xs",variant:"compact",avoidCollisions:!1,children:"Done"})]})]})]})})})},yu=()=>{const[e,t]=s.useState(null),[n,r]=s.useState(!1),[o,i]=s.useState(""),[c,l]=s.useState(!1),[u,f]=s.useState(!1),h=(e==null?void 0:e.element)||null;s.useEffect(()=>{const O=a=>{if(a.messageType==="highlightElementWithId"){if(f(!1),Number.isNaN(Number(a.elementId))||a.url!==window.location.href)return;const p=document.querySelector(`[_i_d="${a.elementId}"]`);if(p){t({element:p}),i(a.modalInstruction||"");let m=null;const x=new IntersectionObserver((_,C)=>{_.forEach(k=>{k.isIntersecting&&(m&&(clearTimeout(m),m=null),setTimeout(()=>{chrome.runtime.sendMessage({messageType:"sendScreenshotCoordinates",data:{coordinates:p.getBoundingClientRect(),sessionId:a.sessionId,requestId:a.requestId}}),C.disconnect()},200))})});a.hasScreenshot?l(!0):(x.observe(p),m=setTimeout(()=>{x.disconnect(),Y("copilot_debugging_screenshot_fallback",{elementId:a.elementId,url:window.location.href,messageUrl:a.url,sessionId:a.sessionId,requestId:a.requestId}),chrome.runtime.sendMessage({messageType:"sendScreenshotCoordinates",data:{coordinates:p.getBoundingClientRect(),sessionId:a.sessionId,requestId:a.requestId}})},4e3))}else Y("copilot_debugging_element_not_found",{elementId:a.elementId,url:window.location.href,messageUrl:a.url,sessionId:a.sessionId,requestId:a.requestId}),chrome.runtime.sendMessage({messageType:"getDomForCopilot"})}if(a.messageType==="getCurrentDom"&&window.self===window.top){Oa();const p=document.body.outerHTML;chrome.runtime.sendMessage({messageType:"currentDomForCopilot",currentDom:p,url:window.location.href,sessionId:a.sessionId})}a.messageType==="removeCopilotClickTarget"&&l(!1),a.messageType==="screenshotCaptureDone"&&(l(!0),f(!0))};return chrome.runtime.onMessage.addListener(O),()=>{chrome.runtime.onMessage.removeListener(O)}},[]);const{isVisible:v}=_r({element:h,subtreeEnabled:!0}),w=(()=>{if(!h)return{left:0,top:0,width:0,height:0};const O=h.getBoundingClientRect();return{left:O.left,top:O.top,width:O.width,height:O.height}})(),j=()=>{const O=w.left+w.width/2||0,a=w.top+w.height/2||0;return{x:O??0,y:a??0}},b=(()=>j())(),g=()=>r(!0),E=()=>r(!1),T=h&&w.width&&w.height;if(s.useEffect(()=>{var O;T&&!v&&!u&&((O=e==null?void 0:e.element)==null||O.scrollIntoView({behavior:"smooth",block:"center"}))},[e,T,v,u]),s.useEffect(()=>(r(!1),h==null||h.addEventListener("mouseenter",g),h==null||h.addEventListener("mouseleave",E),()=>{h==null||h.removeEventListener("mouseenter",g),h==null||h.removeEventListener("mouseleave",E)}),[h]),!T)return null;const I=16;return d.jsx("div",{id:"copilot-click-target-container",className:"group pointer-events-none absolute z-[999999] cursor-pointer opacity-100 transition-opacity",style:{position:"absolute",top:b.y-I,left:b.x-I,zIndex:999999},children:v&&d.jsxs("div",{id:"copilot-click-target",className:"gap-6",style:{display:c?"flex":"none"},children:[d.jsx(La,{sizeIncrease:!0,clickTargetColor:{from:"#3AC3FF",via:"#FFFFFF",to:"#6366F1"}}),d.jsx(wu,{targetHovered:n,modalInstruction:o,isClickContainerVisible:c})]})})},_u=()=>d.jsxs("div",{"aria-hidden":!0,className:$("fixed select-none blur-3xl inset-0 z-99 pointer-events-none animate-grow-in-from-right *:[clip-path:ellipse(closest-side_farthest-side)] *:absolute *:mix-blend-overlay *:bg-gradient-to-br"),children:[d.jsx("div",{className:"top-0 -right-5 w-20 h-[80dvh] from-blue-700/70 via-blue-500/90 to-cyan-500 animate-glow-loader"}),d.jsx("div",{className:"bottom-0 -right-5 w-20 h-[80dvh] from-blue-700/70 via-blue-500/90 to-cyan-500 animate-glow-loader-2"})]}),ku=()=>{const[e,t]=s.useState(!1);return s.useEffect(()=>{const n=r=>{r.messageType==="startCopilotGenerating"&&t(!0),r.messageType==="stopCopilotGenerating"&&t(!1)};return chrome.runtime.onMessage.addListener(n),()=>{chrome.runtime.onMessage.removeListener(n)}},[]),e?d.jsx(_u,{}):null};function Eu(e,...t){const n=document.getElementById("crxjs-ext"),r=c=>{n.contains(c.target)||(e==null||e(c))},o=c=>{let l=!1;t.forEach(u=>{var f;u&&((f=u.contains)!=null&&f.call(u,c.target))&&(l=!0)}),l||(e==null||e(t))},i=c=>{let l=null;return c.forEach(u=>{u&&u.current&&(l=u.current.getRootNode().getElementById("root-scribe-elem"))}),l};s.useEffect(()=>{const c=i(t);return document.addEventListener("mousedown",r),c!==null&&c.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",r),c!==null&&c.removeEventListener("mousedown",o)}},t)}const Cu=()=>{const e=s.useMemo(()=>{const t=window.location&&window.location.href?window.location.href:null;if(!t||t.trim()==="")return!1;const n=new URL(t).origin.split("//");return n[n.length-1]==="mail.google.com"},[]);return d.jsx("div",{style:_e.modal,onMouseDown:t=>{t.stopPropagation(),chrome.runtime.sendMessage({messageType:"closedGmailRecordModal"})},children:e?d.jsxs("div",{style:_e.outerBoxGmail,onMouseDown:t=>{t.stopPropagation()},children:[d.jsx("style",{children:`
                            @keyframes MoveUpDown {
                                0%,
                                100% {
                                    margin-right: 12px;
                                    margin-left: 12px;
                                }
                                50% {
                                    margin-right: 8px;
                                    margin-left: 16px;
                                }
                            }

                            @-webkit-keyframes MoveUpDown {
                                from {
                                    margin-bottom: 12px;
                                    margin-top: 12px;
                                }
                                to {
                                    margin-bottom: 8px;
                                    margin-top: 16px;
                                }
                            }`}),d.jsxs("div",{style:_e.iconsContainer,children:[d.jsx("img",{style:_e.extensionInstalledImg,src:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/logo/extension.svg"}),d.jsx("div",{style:_e.arrowGmail,children:d.jsx("svg",{width:"36px",height:"36px",version:"1.2",fill:"#aaaac8",baseProfile:"tiny",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 3.172l-6.414 6.414c-.781.781-.781 2.047 0 2.828s2.047.781 2.828 0l1.586-1.586v7.242c0 1.104.895 2 2 2 1.104 0 2-.896 2-2v-7.242l1.586 1.586c.391.391.902.586 1.414.586s1.023-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-6.414-6.414z"})})}),d.jsx("div",{style:_e.extensionInstalledImg,children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"52 42 88 66",width:"26",height:"25",children:[d.jsx("path",{fill:"#4285f4",d:"M58 108h14V74L52 59v43c0 3.32 2.69 6 6 6"}),d.jsx("path",{fill:"#34a853",d:"M120 108h14c3.32 0 6-2.69 6-6V59l-20 15"}),d.jsx("path",{fill:"#fbbc04",d:"M120 48v26l20-15v-8c0-7.42-8.47-11.65-14.4-7.2"}),d.jsx("path",{fill:"#ea4335",d:"M72 74V48l24 18 24-18v26L96 92"}),d.jsx("path",{fill:"#c5221f",d:"M52 51v8l20 15V48l-5.6-4.2c-5.94-4.45-14.4-.22-14.4 7.2"})]})})]}),d.jsx("div",{style:_e.instructionTextContainer,children:d.jsx("p",{style:_e.arrowText,children:"Start capturing from the extension and when finished, add it to your Gmail."})})]}):d.jsxs("div",{style:_e.outerBox,onMouseDown:t=>{t.stopPropagation()},children:[d.jsx("style",{children:`
                            @keyframes MoveUpDown {
                                0%,
                                100% {
                                    margin-bottom: 12px;
                                    margin-top: 12px;
                                }
                                50% {
                                    margin-bottom: 8px;
                                    margin-top: 16px;
                                }
                            }

                            @-webkit-keyframes MoveUpDown {
                                from {
                                    margin-bottom: 12px;
                                    margin-top: 12px;
                                }
                                to {
                                    margin-bottom: 8px;
                                    margin-top: 16px;
                                }
                            }`}),d.jsx("div",{style:_e.arrow,children:d.jsx("svg",{width:"36px",height:"36px",version:"1.2",fill:"#aaaac8",baseProfile:"tiny",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 3.172l-6.414 6.414c-.781.781-.781 2.047 0 2.828s2.047.781 2.828 0l1.586-1.586v7.242c0 1.104.895 2 2 2 1.104 0 2-.896 2-2v-7.242l1.586 1.586c.391.391.902.586 1.414.586s1.023-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-6.414-6.414z"})})}),d.jsx("img",{style:_e.extensionInstalledImg,src:"https://colony-labs-public.s3.us-east-2.amazonaws.com/images/logo/extension.svg"}),d.jsx("div",{style:_e.instructionTextContainer,children:d.jsx("p",{style:_e.arrowText,children:"Click the extension, start capturing, and then do the steps you want to appear in your guide."})})]})})},Nt={modal:{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(6px)",zIndex:"100",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",pointerEvents:"all"},outerBox:{position:"fixed",top:"16px",right:"32px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:"8px",backgroundColor:"white",width:"192px",boxShadow:"4px 4px 16px 4px rgba(0, 0, 0, 0.3)",overflow:"hidden",boxSizing:"content-box",padding:"20px 16px"},iconsContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignOtems:"center"},arrow:{color:"#aaaac8",animation:"MoveUpDown 1s linear infinite"},arrowText:{marginTop:"16px",fontSize:"16px",textAlign:"center",fontFamily:"Mulish, sans-serif"},extensionInstalledImg:{width:"38px",height:"38px",minWidth:"38px",minHeight:"38px",boxShadow:"2px 2px 8px 2px rgba(0, 0, 0, 0.3)",borderRadius:"100%",display:"flex",justifyContent:"center",alignItems:"center"},instructionTextContainer:{overflowY:"hidden",fontSize:"16px"}},_e={...Nt,outerBoxGmail:{...Nt.outerBox},outerBox:{...Nt.outerBox,paddingTop:"8px"},arrow:{...Nt.arrow},arrowGmail:{...Nt.arrow,transform:"rotate(90deg)"}},Ie=16,dn=Ie/2,Er=e=>{var t;try{return e.contentDocument||((t=e.contentWindow)==null?void 0:t.document)||null}catch(n){return console.warn("Cannot access iframe content:",n),null}},Fa=(e,t,n,r=0,o=0)=>{e.querySelectorAll("iframe").forEach(i=>{try{const c=Er(i);if(!c)return;const l=i.getBoundingClientRect(),u=r+l.left,f=o+l.top,h=n.createHandlers(u,f);n.eventTypes.forEach(v=>{const w=h[v];w&&c.addEventListener(v,w,{capture:n.useCapture||!1})}),t.push({iframeWindow:i.contentWindow,handlers:h}),Fa(c,t,n,u,f)}catch(c){console.warn("Cannot access iframe content:",c)}})},ju=(e,t,n=!1)=>{e.forEach(({iframeWindow:r,handlers:o})=>{try{if(!(r!=null&&r.document))return;t.forEach(i=>{const c=o[i];c&&r.document.removeEventListener(i,c,{capture:n})})}catch(i){console.warn("Error cleaning up iframe listener:",i)}})},Cr=s.forwardRef(({x:e,y:t,color:n,animate:r=!1,shape:o="circle",enablePointerEvents:i=!1,enableDragging:c=!1,isHovered:l=!1,onDragStart:u,onDrag:f,onDragEnd:h,onMouseEnter:v,onMouseLeave:w},j)=>{const[b,g]=s.useState(!1),[E,T]=s.useState({x:e,y:t});s.useEffect(()=>{b||T({x:e,y:t})},[e,t,b]),s.useEffect(()=>{const p=m=>{document.body.style.cursor=m;const x=_=>{_.querySelectorAll("iframe").forEach(C=>{var k;try{const S=C.contentDocument||((k=C.contentWindow)==null?void 0:k.document);S&&S.body&&(S.body.style.cursor=m,x(S))}catch(S){console.warn("Cannot access iframe content for cursor styling:",S)}})};x(document)};return p(b?"grabbing":""),()=>{p("")}},[b]),s.useEffect(()=>{if(!c||!j||typeof j=="function")return;const p=j.current;if(!p)return;const m=x=>{x.preventDefault(),x.stopPropagation(),x.stopImmediatePropagation(),g(!0),u==null||u(E)};return p.addEventListener("mousedown",m),()=>p.removeEventListener("mousedown",m)},[c,j,u]),s.useEffect(()=>{if(!b)return;const p=_=>{const C={x:_.clientX-8,y:_.clientY-8};T(C),f==null||f(C)},m=_=>{_.preventDefault(),_.stopPropagation(),_.stopImmediatePropagation(),g(!1),h==null||h(E,_)},x=[];return window.addEventListener("mousemove",p),window.addEventListener("mouseup",m),Fa(document,x,{eventTypes:["mousemove","mouseup"],createHandlers:(_,C)=>({mousemove:k=>{const S={x:k.clientX+_,y:k.clientY+C};T(S),f==null||f(S)},mouseup:k=>{const S=new MouseEvent("mouseup",{...k,clientX:k.clientX+_,clientY:k.clientY+C});g(!1),h==null||h(E,S)}})}),()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m),ju(x,["mousemove","mouseup"])}},[b,E,f,h]);const I=(()=>{switch(o){case"circle":return sr;default:return sr}})(),O=()=>{b||(v==null||v())},a=()=>{w==null||w()};return d.jsxs("div",{ref:j,style:{position:"fixed",top:E.y,left:E.x,width:`${Ie}px`,height:`${Ie}px`,zIndex:1e5-2,pointerEvents:i&&!b?"auto":"none",transform:l?"scale(1.5)":"scale(1)",transformOrigin:"center center",transition:"transform 0.2s ease-in-out",cursor:"pointer"},onMouseEnter:O,onMouseLeave:a,children:[r&&d.jsx(ae,{style:{color:n,width:`${Ie}px`,height:`${Ie}px`,position:"absolute",top:0,left:0},icon:I,size:"lg",className:"animate-ping opacity-75"}),d.jsx(ae,{style:{color:n,width:`${Ie}px`,height:`${Ie}px`,position:"absolute",top:0,left:0},icon:I,size:"lg"})]})}),za=e=>e?e.split(" ")[0]:null,jr=e=>"elementClickPosition"in e,Su=e=>{var l,u,f,h,v,w;const t=e.target;let n=null;const r=Ec(t,or((t.innerText||t.textContent||"").substring(0,2048)));try{r&&(n=cr(r))}catch{console.log("DEBUG -> Could not generate selector.")}const o=mr(t),i=((u=(l=r==null?void 0:r.ownerDocument)==null?void 0:l.defaultView)==null?void 0:u.frameElement)!==null,c=i?mr((h=(f=r==null?void 0:r.ownerDocument)==null?void 0:f.defaultView)==null?void 0:h.frameElement):null;return{selector:(v=window.location.hostname)!=null&&v.includes("dynamics.com")?za(n):n,clickPosition:{x:e.x,y:e.y},elementClickPosition:{x:e.offsetX-Ie/2,y:e.offsetY-Ie/2},text:or(((r==null?void 0:r.innerText)||(r==null?void 0:r.textContent)||"").substring(0,2048))||"",attributes:o||null,timestamp:new Date().getTime(),target_xpath:ba(r),target_tag:(r==null?void 0:r.tagName)||"",target_element_attributes:o||null,was_in_iframe:i,iframe_attributes:c||null,target_parent_attributes:mr((r==null?void 0:r.parentElement)||void 0)||null,target_parent_tag:((w=r==null?void 0:r.parentElement)==null?void 0:w.tagName)||""}},Pu=e=>{const t=[...(e==null?void 0:e.organizations)||[]].sort((o,i)=>o.name<i.name?-1:o.name>i.name?1:0),n=t.map(o=>({label:o.name,value:o.id,menuItemProps:{avatarProps:{children:o.name,color:o.color||jc(o.id).color,shape:"square"},showAvatar:!0,menuType:"checkbox"}})),r={label:"All teams",value:"all-teams",menuItemProps:{avatarProps:{children:"AT",color:"blue",shape:"square"},showAvatar:!0,menuType:"checkbox"}};return t.length>1?[r,...n]:n},Ba=(e,t,n)=>{if(!e)return{left:0,top:0,width:0,height:0};let r=0,o=0;if(t){const f=j=>{var g,E;const b=(g=j.contentWindow)==null?void 0:g.parent;if(!b)return{x:0,y:0};if(b!==window.top){const T=(E=b.frameElement)==null?void 0:E.getBoundingClientRect(),I=(T==null?void 0:T.x)??0,O=(T==null?void 0:T.y)??0,a=f(b.frameElement);return{x:I+a.x,y:O+a.y}}return{x:0,y:0}},{x:h,y:v}=f(t),w=t.getBoundingClientRect();r+=h,r+=w.left,o+=v,o+=w.top}const i=e.getBoundingClientRect(),c=e.ownerDocument!==document;let l=i.left+r,u=i.top+o;return n&&(c&&t?(l=i.left+n.x+r,u=i.top+n.y+o):(l=i.left+n.x,u=i.top+n.y)),{left:l,top:u,width:i.width,height:i.height}},pn=e=>e<16?16:e>window.innerWidth-16?window.innerWidth-16:e,mn=e=>e<16?16:e,Ha=e=>{const t=pn(e.left+e.width/2||0),n=mn(e.top+e.height/2||0);return{x:t??0,y:n??0}},Tu=e=>{const t=pn(e!=null&&e.left?e.left+10:0),n=mn(e!=null&&e.top?e.top+10:0);return{x:t,y:n}},$a=({pin:e,pinTarget:t,parentIframe:n})=>{var o,i,c,l,u,f;const r=Ba(t,n,jr(e)?e.elementClickPosition:void 0);if(!jr(e)&&(t!=null&&t.matches(xc.join(", "))))return Ha(r);if(jr(e)&&e.elementClickPosition){const h=pn(r.left),v=mn(r.top);return{x:h,y:v}}if((o=e.clickPosition)!=null&&o.x&&((i=e.clickPosition)!=null&&i.y)&&((c=e.clickPosition)==null?void 0:c.x)<r.width&&((l=e.clickPosition)==null?void 0:l.y)<r.height){const h=pn(r!=null&&r.left&&((u=e==null?void 0:e.clickPosition)!=null&&u.x)?r.left+e.clickPosition.x:0),v=mn(r!=null&&r.top&&((f=e==null?void 0:e.clickPosition)!=null&&f.y)?r.top+e.clickPosition.y:0);return{x:h,y:v}}return Tu(r)},Ru=({pinX:e,pinY:t,dialogWidth:n,dialogHeight:r,horizontalSpacing:o=12,verticalSpacing:i=12,tightHorizontalSpacing:c=6,tightVerticalSpacing:l=6})=>{const u=document.documentElement.clientWidth,f=document.documentElement.clientHeight,h=e,v=t,w=h+Ie,j=v+Ie;let b=w+o,g=v-i;const E=b+n>u;E&&(b=h-o-n);const T=g+r>f,I=g<0;return T&&!I?(g=v-l-r,E?b=h-o-n:(b=w+o,b+n>u&&(b=h-o-n))):I&&(g=j+l,b=w+o,b+n>u&&(b=h-o-n)),b=Math.max(0,Math.min(b,u-n)),g=Math.max(0,Math.min(g,f-r)),{x:b,y:g}},Iu=()=>window?window.location.href:"",Va=(e,t=document,n=0,r=0)=>{var i;if(e===t)return{offsetX:n,offsetY:r};const o=t.querySelectorAll("iframe");for(const c of o)try{const l=c.contentDocument||((i=c.contentWindow)==null?void 0:i.document);if(!l)continue;if(l===e){const g=c.getBoundingClientRect(),E=window.getComputedStyle(c),T=parseFloat(E.borderLeftWidth)||0,I=parseFloat(E.borderTopWidth)||0,O=parseFloat(E.paddingLeft)||0,a=parseFloat(E.paddingTop)||0;return{offsetX:n+g.left+T+O,offsetY:r+g.top+I+a}}const u=c.getBoundingClientRect(),f=window.getComputedStyle(c),h=parseFloat(f.borderLeftWidth)||0,v=parseFloat(f.borderTopWidth)||0,w=parseFloat(f.paddingLeft)||0,j=parseFloat(f.paddingTop)||0,b=Va(e,l,n+u.left+h+w,r+u.top+v+j);if(b.offsetX!==0||b.offsetY!==0||e===l)return b}catch{continue}return{offsetX:0,offsetY:0}},Nu=(e,t,n)=>{const r=n.elementFromPoint(e,t);if(!r)return null;const o=r.getBoundingClientRect();let i=0,c=0;if(n!==document){const{offsetX:l,offsetY:u}=Va(n);i=l,c=u}else if(r.tagName==="IFRAME"){const l=r,u=Er(l);if(u){const f=l.getBoundingClientRect(),h=e-f.left,v=t-f.top,w=u.elementFromPoint(h,v);if(w){const j=w.getBoundingClientRect();return{element:w,left:j.left+f.left,top:j.top+f.top,width:j.width,height:j.height}}}}return{element:r,left:o.left+i,top:o.top+c,width:o.width,height:o.height}},Mu=(e,t)=>{const[n,r]=s.useState({x:e.x+12,y:e.y+12});return s.useLayoutEffect(()=>{t.current&&requestAnimationFrame(()=>{if(!t.current)return;const o=t.current.getBoundingClientRect(),i=12,c=12;let l=e.x+c,u=e.y+c;l+o.width>window.innerWidth-i&&(l=e.x-c-o.width),u+o.height>window.innerHeight-i&&(u=e.y-c-o.height),l<i&&(l=i),u<i&&(u=i),r({x:l,y:u})})},[e.x,e.y,t]),n},Au=({mousePos:e,color:t})=>{const n=s.useRef(null),r=s.useRef(null),o=Mu(e,n);return d.jsxs(d.Fragment,{children:[d.jsx(Cr,{ref:r,x:e.x-8,y:e.y-8,animate:!0,color:t}),d.jsx("div",{ref:n,className:"absolute text-white pt-2 pl-3 pr-3 pb-3 rounded-xl text-xs border-2 border-slate-700",style:{left:o.x,top:o.y,zIndex:999999,backgroundColor:"#020617CC",width:"max-content",borderColor:"#636671",transition:"left 0.03s ease, top 0.03s ease",willChange:"left, top"},children:d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsx("p",{style:{marginBottom:0,marginTop:0},className:"text-sm font-medium",children:"Click to pin"}),d.jsxs("div",{className:"flex flex-row gap-2 text-slate-400",children:[d.jsx(_a,{theme:"dark",children:"P"}),"Pin to page ",d.jsx(_a,{theme:"dark",children:"ESC"})," cancel"]})]})})]})},Du=({onPinDrop:e,onEscape:t,onPinToPage:n,isDragging:r=!1,color:o})=>{const[i,c]=s.useState({x:0,y:0}),l=s.useRef(null),[u]=s.useState(Date.now()),f=(j,b,g,E)=>{l.current&&(l.current.style.display="block",l.current.style.left=`${j}px`,l.current.style.top=`${b}px`,l.current.style.width=`${g}px`,l.current.style.height=`${E}px`)},h=(j,b,g=document)=>{const E=Nu(j,b,g);E&&f(E.left,E.top,E.width,E.height)},v=(j,b,g)=>E=>{const T=E.clientX+b,I=E.clientY+g;c({x:T,y:I}),h(E.clientX,E.clientY,j)},w=(j,b,g,E=0,T=0)=>{j.querySelectorAll("iframe").forEach(I=>{const O=Er(I);if(!O)return;const a=I.getBoundingClientRect(),p=E+a.left,m=T+a.top,x=v(O,p,m),_=C=>{C.preventDefault(),C.stopPropagation(),C.stopImmediatePropagation();const k=new MouseEvent("click",{clientX:C.clientX+p,clientY:C.clientY+m});Object.defineProperty(k,"target",{value:C.target,enumerable:!0,configurable:!0}),Object.defineProperty(k,"offsetX",{value:C.offsetX,enumerable:!0,configurable:!0}),Object.defineProperty(k,"offsetY",{value:C.offsetY,enumerable:!0,configurable:!0}),g(k)};O.addEventListener("mousemove",x),O.addEventListener("click",_,{capture:!0}),b.push({iframeWindow:I.contentWindow,mouseHandler:x,clickHandler:_}),w(O,b,g,p,m)})};return s.useEffect(()=>{const j=E=>{c({x:E.clientX,y:E.clientY}),h(E.clientX,E.clientY)},b=E=>{E.preventDefault(),E.stopPropagation(),E.stopImmediatePropagation(),e(E)},g=[];return window.addEventListener("mousemove",j),window.addEventListener("click",b,{capture:!0}),w(document,g,b),()=>{window.removeEventListener("mousemove",j),window.removeEventListener("click",b,{capture:!0}),l.current&&(l.current.style.display="none"),g.forEach(({iframeWindow:E,mouseHandler:T,clickHandler:I})=>{try{E==null||E.document.removeEventListener("mousemove",T),E==null||E.document.removeEventListener("click",I,{capture:!0})}catch(O){console.warn("Error cleaning up iframe listener:",O)}})}},[e]),s.useEffect(()=>{const j=b=>{b.key==="Escape"&&(Tt("pins_drop_mode_cancel",{time_in_drop_mode_ms:Date.now()-u,page_domain:window.location.hostname}),t()),b.key==="p"&&n()};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[u,t,n]),s.useEffect(()=>(r||(document.body.style.cursor="pointer"),()=>{r||(document.body.style.cursor="")}),[r]),d.jsxs("div",{id:"guide-click-target",children:[!r&&d.jsx(Au,{mousePos:i,color:o}),d.jsx("div",{className:"border-rounded-sm",ref:l,style:{position:"absolute",border:"solid 3px #FBBF24",borderRadius:"8px",pointerEvents:"none"}})]})},Mt=()=>{const[e,t]=s.useState(null);return s.useEffect(()=>{const n=()=>{const r=br();r&&t(r)};if(n(),!e){const r=new MutationObserver(()=>{n()});return r.observe(document.body,{childList:!0,subtree:!0}),()=>r.disconnect()}},[e]),e},Ua="Dialog",[qa,sx]=sn(Ua),[Ou,Ne]=qa(Ua),Lu=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:c=!0}=e,l=s.useRef(null),u=s.useRef(null),[f=!1,h]=fr({prop:r,defaultProp:o,onChange:i});return s.createElement(Ou,{scope:t,triggerRef:l,contentRef:u,contentId:ln(),titleId:ln(),descriptionId:ln(),open:f,onOpenChange:h,onOpenToggle:s.useCallback(()=>h(v=>!v),[h]),modal:c},n)},Fu="DialogTrigger",zu=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ne(Fu,n),i=ye(t,o.triggerRef);return s.createElement(se.button,V({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Pr(o.open)},r,{ref:i,onClick:te(e.onClick,o.onOpenToggle)}))}),Ga="DialogPortal",[Bu,Wa]=qa(Ga,{forceMount:void 0}),Hu=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,i=Ne(Ga,t);return s.createElement(Bu,{scope:t,forceMount:n},s.Children.map(r,c=>s.createElement(Ae,{present:n||i.open},s.createElement(lr,{asChild:!0,container:o},c))))},Sr="DialogOverlay",$u=s.forwardRef((e,t)=>{const n=Wa(Sr,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=Ne(Sr,e.__scopeDialog);return i.modal?s.createElement(Ae,{present:r||i.open},s.createElement(Vu,V({},o,{ref:t}))):null}),Vu=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ne(Sr,n);return s.createElement(ca,{as:Ea,allowPinchZoom:!0,shards:[o.contentRef]},s.createElement(se.div,V({"data-state":Pr(o.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),At="DialogContent",Uu=s.forwardRef((e,t)=>{const n=Wa(At,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,i=Ne(At,e.__scopeDialog);return s.createElement(Ae,{present:r||i.open},i.modal?s.createElement(qu,V({},o,{ref:t})):s.createElement(Gu,V({},o,{ref:t})))}),qu=s.forwardRef((e,t)=>{const n=Ne(At,e.__scopeDialog),r=s.useRef(null),o=ye(t,n.contentRef,r);return s.useEffect(()=>{const i=r.current;if(i)return ua(i)},[]),s.createElement(Xa,V({},e,{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(e.onCloseAutoFocus,i=>{var c;i.preventDefault(),(c=n.triggerRef.current)===null||c===void 0||c.focus()}),onPointerDownOutside:te(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0;(c.button===2||l)&&i.preventDefault()}),onFocusOutside:te(e.onFocusOutside,i=>i.preventDefault())}))}),Gu=s.forwardRef((e,t)=>{const n=Ne(At,e.__scopeDialog),r=s.useRef(!1),o=s.useRef(!1);return s.createElement(Xa,V({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c;if((c=e.onCloseAutoFocus)===null||c===void 0||c.call(e,i),!i.defaultPrevented){var l;r.current||(l=n.triggerRef.current)===null||l===void 0||l.focus(),i.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:i=>{var c,l;(c=e.onInteractOutside)===null||c===void 0||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=i.target;!((l=n.triggerRef.current)===null||l===void 0)&&l.contains(u)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}}))}),Xa=s.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...c}=e,l=Ne(At,n),u=s.useRef(null),f=ye(t,u);return da(),s.createElement(s.Fragment,null,s.createElement(pa,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i},s.createElement(aa,V({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Pr(l.open)},c,{ref:f,onDismiss:()=>l.onOpenChange(!1)}))),!1)}),Wu="DialogTitle",Xu=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ne(Wu,n);return s.createElement(se.h2,V({id:o.titleId},r,{ref:t}))}),Yu="DialogDescription",Ku=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ne(Yu,n);return s.createElement(se.p,V({id:o.descriptionId},r,{ref:t}))}),Qu="DialogClose",Zu=s.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=Ne(Qu,n);return s.createElement(se.button,V({type:"button"},r,{ref:t,onClick:te(e.onClick,()=>o.onOpenChange(!1))}))});function Pr(e){return e?"open":"closed"}const Ju=Lu,ed=zu,td=Hu,nd=$u,rd=Uu,od=Xu,ad=Ku,Ya=Zu;function id(e,[t,n]){return Math.min(n,Math.max(t,e))}function sd(e,t){return s.useReducer((n,r)=>t[n][r]??n,e)}const Ka="ScrollArea",[Qa,lx]=sn(Ka),[ld,Ee]=Qa(Ka),cd=s.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:i=600,...c}=e,[l,u]=s.useState(null),[f,h]=s.useState(null),[v,w]=s.useState(null),[j,b]=s.useState(null),[g,E]=s.useState(null),[T,I]=s.useState(0),[O,a]=s.useState(0),[p,m]=s.useState(!1),[x,_]=s.useState(!1),C=ye(t,S=>u(S)),k=Nc(o);return s.createElement(ld,{scope:n,type:r,dir:k,scrollHideDelay:i,scrollArea:l,viewport:f,onViewportChange:h,content:v,onContentChange:w,scrollbarX:j,onScrollbarXChange:b,scrollbarXEnabled:p,onScrollbarXEnabledChange:m,scrollbarY:g,onScrollbarYChange:E,scrollbarYEnabled:x,onScrollbarYEnabledChange:_,onCornerWidthChange:I,onCornerHeightChange:a},s.createElement(se.div,V({dir:k},c,{ref:C,style:{position:"relative","--radix-scroll-area-corner-width":T+"px","--radix-scroll-area-corner-height":O+"px",...e.style}})))}),ud="ScrollAreaViewport",dd=s.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...o}=e,i=Ee(ud,n),c=s.useRef(null),l=ye(t,c,i.onViewportChange);return s.createElement(s.Fragment,null,s.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),s.createElement(se.div,V({"data-radix-scroll-area-viewport":""},o,{ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style}}),s.createElement("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),ze="ScrollAreaScrollbar",pd=s.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Ee(ze,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:c}=o,l=e.orientation==="horizontal";return s.useEffect(()=>(l?i(!0):c(!0),()=>{l?i(!1):c(!1)}),[l,i,c]),o.type==="hover"?s.createElement(md,V({},r,{ref:t,forceMount:n})):o.type==="scroll"?s.createElement(fd,V({},r,{ref:t,forceMount:n})):o.type==="auto"?s.createElement(Za,V({},r,{ref:t,forceMount:n})):o.type==="always"?s.createElement(Tr,V({},r,{ref:t})):null}),md=s.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Ee(ze,e.__scopeScrollArea),[i,c]=s.useState(!1);return s.useEffect(()=>{const l=o.scrollArea;let u=0;if(l){const f=()=>{window.clearTimeout(u),c(!0)},h=()=>{u=window.setTimeout(()=>c(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",f),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",f),l.removeEventListener("pointerleave",h)}}},[o.scrollArea,o.scrollHideDelay]),s.createElement(Ae,{present:n||i},s.createElement(Za,V({"data-state":i?"visible":"hidden"},r,{ref:t})))}),fd=s.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Ee(ze,e.__scopeScrollArea),i=e.orientation==="horizontal",c=gn(()=>u("SCROLL_END"),100),[l,u]=sd("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return s.useEffect(()=>{if(l==="idle"){const f=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(f)}},[l,o.scrollHideDelay,u]),s.useEffect(()=>{const f=o.viewport,h=i?"scrollLeft":"scrollTop";if(f){let v=f[h];const w=()=>{const j=f[h];v!==j&&(u("SCROLL"),c()),v=j};return f.addEventListener("scroll",w),()=>f.removeEventListener("scroll",w)}},[o.viewport,i,u,c]),s.createElement(Ae,{present:n||l!=="hidden"},s.createElement(Tr,V({"data-state":l==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:te(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:te(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),Za=s.forwardRef((e,t)=>{const n=Ee(ze,e.__scopeScrollArea),{forceMount:r,...o}=e,[i,c]=s.useState(!1),l=e.orientation==="horizontal",u=gn(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;c(l?f:h)}},10);return ft(n.viewport,u),ft(n.content,u),s.createElement(Ae,{present:r||i},s.createElement(Tr,V({"data-state":i?"visible":"hidden"},o,{ref:t})))}),Tr=s.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=Ee(ze,e.__scopeScrollArea),i=s.useRef(null),c=s.useRef(0),[l,u]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=ni(l.viewport,l.content),h={...r,sizes:l,onSizesChange:u,hasThumb:f>0&&f<1,onThumbChange:w=>i.current=w,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:w=>c.current=w};function v(w,j){return _d(w,c.current,l,j)}return n==="horizontal"?s.createElement(hd,V({},h,{ref:t,onThumbPositionChange:()=>{if(o.viewport&&i.current){const w=o.viewport.scrollLeft,j=ri(w,l,o.dir);i.current.style.transform=`translate3d(${j}px, 0, 0)`}},onWheelScroll:w=>{o.viewport&&(o.viewport.scrollLeft=w)},onDragScroll:w=>{o.viewport&&(o.viewport.scrollLeft=v(w,o.dir))}})):n==="vertical"?s.createElement(gd,V({},h,{ref:t,onThumbPositionChange:()=>{if(o.viewport&&i.current){const w=o.viewport.scrollTop,j=ri(w,l);i.current.style.transform=`translate3d(0, ${j}px, 0)`}},onWheelScroll:w=>{o.viewport&&(o.viewport.scrollTop=w)},onDragScroll:w=>{o.viewport&&(o.viewport.scrollTop=v(w))}})):null}),hd=s.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,i=Ee(ze,e.__scopeScrollArea),[c,l]=s.useState(),u=s.useRef(null),f=ye(t,u,i.onScrollbarXChange);return s.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),s.createElement(ei,V({"data-orientation":"horizontal"},o,{ref:f,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":hn(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,v)=>{if(i.viewport){const w=i.viewport.scrollLeft+h.deltaX;e.onWheelScroll(w),ai(w,v)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&c&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:fn(c.paddingLeft),paddingEnd:fn(c.paddingRight)}})}}))}),gd=s.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,i=Ee(ze,e.__scopeScrollArea),[c,l]=s.useState(),u=s.useRef(null),f=ye(t,u,i.onScrollbarYChange);return s.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),s.createElement(ei,V({"data-orientation":"vertical"},o,{ref:f,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":hn(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,v)=>{if(i.viewport){const w=i.viewport.scrollTop+h.deltaY;e.onWheelScroll(w),ai(w,v)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&c&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:fn(c.paddingTop),paddingEnd:fn(c.paddingBottom)}})}}))}),[bd,Ja]=Qa(ze),ei=s.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:i,onThumbPointerUp:c,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:f,onWheelScroll:h,onResize:v,...w}=e,j=Ee(ze,n),[b,g]=s.useState(null),E=ye(t,C=>g(C)),T=s.useRef(null),I=s.useRef(""),O=j.viewport,a=r.content-r.viewport,p=Re(h),m=Re(u),x=gn(v,10);function _(C){if(T.current){const k=C.clientX-T.current.left,S=C.clientY-T.current.top;f({x:k,y:S})}}return s.useEffect(()=>{const C=k=>{const S=k.target;b!=null&&b.contains(S)&&p(k,a)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[O,b,a,p]),s.useEffect(m,[r,m]),ft(b,x),ft(j.content,x),s.createElement(bd,{scope:n,scrollbar:b,hasThumb:o,onThumbChange:Re(i),onThumbPointerUp:Re(c),onThumbPositionChange:m,onThumbPointerDown:Re(l)},s.createElement(se.div,V({},w,{ref:E,style:{position:"absolute",...w.style},onPointerDown:te(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),T.current=b.getBoundingClientRect(),I.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),_(C))}),onPointerMove:te(e.onPointerMove,_),onPointerUp:te(e.onPointerUp,C=>{const k=C.target;k.hasPointerCapture(C.pointerId)&&k.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=I.current,j.viewport&&(j.viewport.style.scrollBehavior=""),T.current=null})})))}),Rr="ScrollAreaThumb",vd=s.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Ja(Rr,e.__scopeScrollArea);return s.createElement(Ae,{present:n||o.hasThumb},s.createElement(xd,V({ref:t},r)))}),xd=s.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,i=Ee(Rr,n),c=Ja(Rr,n),{onThumbPositionChange:l}=c,u=ye(t,v=>c.onThumbChange(v)),f=s.useRef(),h=gn(()=>{f.current&&(f.current(),f.current=void 0)},100);return s.useEffect(()=>{const v=i.viewport;if(v){const w=()=>{if(h(),!f.current){const j=kd(v,l);f.current=j,l()}};return l(),v.addEventListener("scroll",w),()=>v.removeEventListener("scroll",w)}},[i.viewport,h,l]),s.createElement(se.div,V({"data-state":c.hasThumb?"visible":"hidden"},o,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:te(e.onPointerDownCapture,v=>{const w=v.target.getBoundingClientRect(),j=v.clientX-w.left,b=v.clientY-w.top;c.onThumbPointerDown({x:j,y:b})}),onPointerUp:te(e.onPointerUp,c.onThumbPointerUp)}))}),ti="ScrollAreaCorner",wd=s.forwardRef((e,t)=>{const n=Ee(ti,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.createElement(yd,V({},e,{ref:t})):null}),yd=s.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=Ee(ti,n),[i,c]=s.useState(0),[l,u]=s.useState(0),f=!!(i&&l);return ft(o.scrollbarX,()=>{var h;const v=((h=o.scrollbarX)===null||h===void 0?void 0:h.offsetHeight)||0;o.onCornerHeightChange(v),u(v)}),ft(o.scrollbarY,()=>{var h;const v=((h=o.scrollbarY)===null||h===void 0?void 0:h.offsetWidth)||0;o.onCornerWidthChange(v),c(v)}),f?s.createElement(se.div,V({},r,{ref:t,style:{width:i,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function fn(e){return e?parseInt(e,10):0}function ni(e,t){const n=e/t;return isNaN(n)?0:n}function hn(e){const t=ni(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function _d(e,t,n,r="ltr"){const o=hn(n),i=o/2,c=t||i,l=o-c,u=n.scrollbar.paddingStart+c,f=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,v=r==="ltr"?[0,h]:[h*-1,0];return oi([u,f],v)(e)}function ri(e,t,n="ltr"){const r=hn(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-o,c=t.content-t.viewport,l=i-r,u=n==="ltr"?[0,c]:[c*-1,0],f=id(e,u);return oi([0,c],[0,l])(f)}function oi(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ai(e,t){return e>0&&e<t}const kd=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const i={left:e.scrollLeft,top:e.scrollTop},c=n.left!==i.left,l=n.top!==i.top;(c||l)&&t(),n=i,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function gn(e,t){const n=Re(e),r=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(r.current),[]),s.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function ft(e,t){const n=Re(t);Ca(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}const Ed=cd,Cd=dd,jd=wd,ii=s.forwardRef(({className:e,orientation:t="vertical",theme:n="light",...r},o)=>d.jsx(pd,{ref:o,orientation:t,className:$("absolute z-10 flex touch-none select-none bg-auto transition-opacity",t==="vertical"&&"h-full w-4 pb-1 pt-1",t==="horizontal"&&"h-4 w-full flex-col pl-1 pr-1",e),...r,children:d.jsx(vd,{className:$("relative w-1 flex-1 scroll-smooth rounded-full bg-opacity-25 transition-opacity hover:bg-opacity-50",{"bg-white":n==="dark","bg-black":n==="light"},{"ml-[5px] mr-[5px] hover:ml-1 hover:mr-1":t==="vertical","mb-[5px] mt-[5px] hover:mb-1 hover:mt-1":t==="horizontal"})})})),si=s.forwardRef(({className:e,children:t,theme:n="light",viewportRef:r,...o},i)=>d.jsxs(Ed,{ref:i,"data-testid":"scroll-area",className:$("relative",{"bg-white":n==="light","bg-slate-800 text-white":n==="dark"},e),...o,children:[d.jsx(Cd,{ref:r,className:"h-full w-full rounded-[inherit] [&>div]:!block",children:t}),d.jsx(ii,{theme:n,orientation:"vertical"}),d.jsx(ii,{theme:n,orientation:"horizontal"}),d.jsx(jd,{})]})),Sd=td,li=Ya,Pd=s.forwardRef(({className:e,...t},n)=>d.jsx(nd,{ref:n,className:$("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[100000] bg-slate-600/50 backdrop-blur-sm",e),...t})),Td=Ju,Rd=ed,Id=({title:e,description:t,hideClose:n,className:r,img:o,children:i,...c})=>d.jsxs("header",{className:$(!o&&"sticky top-0 z-10",r),...c,children:[o&&d.jsx("img",{height:200,className:"animate-bg-pulse block w-full bg-slate-300 object-cover",src:o.src,alt:o.alt}),d.jsxs("div",{className:$("flex items-center gap-3 rounded-t-xl bg-gradient-to-b from-white via-white/95 via-85% to-transparent p-6"),children:[d.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[d.jsx(od,{className:$("m-0 -mt-0.5 font-sans text-xl font-semibold leading-7 tracking-tight text-slate-900",r),children:e}),t&&d.jsx(ad,{className:"m-0 text-sm font-normal text-slate-600",children:t})]}),i&&d.jsx("div",{className:"ml-auto",children:i}),!n&&d.jsx(Ya,{"data-testid":"closeButton",asChild:!0,children:d.jsx(Q,{variant:"ghost",icon:Gl,"aria-label":"Close",className:$("size-7 shrink-0 self-start justify-self-end bg-transparent",!o&&"-mr-3 -mt-3",!!o&&"absolute right-4 top-4 bg-black/50 text-white hover:bg-black/80 hover:opacity-100")})})]})]}),Nd=({children:e,className:t,...n})=>d.jsx("div",{className:$("px-6",t),...n,children:e}),Md=({className:e,children:t,primaryAction:n,secondaryAction:r,primaryActionClose:o=!0,secondaryActionClose:i=!0,...c})=>d.jsxs("footer",{className:$("@[380px]:justify-end @[380px]:flex-row @[380px]:items-center sticky bottom-0 flex flex-col justify-stretch gap-3 rounded-b-xl bg-gradient-to-t from-white via-white/95 via-85% to-transparent p-6",e),...c,children:[t&&d.jsx("div",{className:"flex-1",children:t}),d.jsxs("div",{className:"@[380px]:flex-row flex flex-col-reverse gap-3",children:[r&&d.jsx(d.Fragment,{children:i?d.jsx(li,{asChild:!0,children:d.jsx(Q,{variant:"secondary",...r})}):d.jsx(Q,{variant:"secondary",...r})}),n&&d.jsx(li,{asChild:!0,children:d.jsx(Q,{...n})})]})]}),Ad=s.forwardRef(({className:e,children:t,scrollable:n=!0,container:r,...o},i)=>d.jsxs(Sd,{container:r,children:[d.jsx(Pd,{}),d.jsx(rd,{ref:i,className:$("@container data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-[100000] max-h-[calc(100dvh_-_5rem)] w-full max-w-[min(calc(100vw_-_2.5rem),_440px)] -translate-x-1/2 -translate-y-1/2 rounded-xl bg-white shadow-xl duration-200 first:rounded-t-xl last:rounded-b-xl [&_header_+_footer]:pt-0",e),...o,children:n?d.jsx(si,{className:"first:rounded-t-xl last:rounded-b-xl [&>[data-radix-scroll-area-viewport]]:max-h-[calc(100dvh_-_5rem)] [&_[data-orientation=vertical]]:py-2",type:"auto",children:t}):t})]})),ci=s.forwardRef(({label:e,helpText:t,icon:n,onClear:r,iconProps:o,iconLeft:i,className:c,fullWidth:l,...u},f)=>{var h,v,w,j,b,g;return d.jsxs("div",{className:l?"group w-full":"group w-fit","data-theme":u.theme,children:[e&&d.jsx(Ic,{htmlFor:(u==null?void 0:u.id)??((w=(h=u==null?void 0:u.name)==null?void 0:(v=h.replace(/\s/g,"")).toLowerCase)==null?void 0:w.call(v)),className:"mb-2",children:e}),d.jsxs("div",{className:"relative",children:[i&&d.jsx(ae,{icon:i,...o,className:$("absolute top-1/2 z-10 size-4 -translate-y-1/2 ",{"text-slate-500":u.theme==="light","text-slate-300":u.theme==="dark"},u.small?"left-2":"left-3",o==null?void 0:o.className)}),d.jsx(Tc,{ref:f,id:(u==null?void 0:u.id)??((g=(j=u==null?void 0:u.name)==null?void 0:(b=j.replace(/\s/g,"")).toLowerCase)==null?void 0:g.call(b)),className:$("peer",{"pr-[30px]":n&&!u.small,"pr-[34px]":n&&u.small,"pl-9":i&&!u.small,"pl-7":i&&u.small,"w-full":l},c),...u}),n&&d.jsx(ae,{icon:n,...o,className:$("absolute top-1/2 size-4 -translate-y-1/2",{"text-slate-500":!u.error&&u.theme==="light","text-slate-300":!u.error&&u.theme==="dark","text-red-500":u.error},u.small?"right-2":"right-3",o==null?void 0:o.className)}),(u==null?void 0:u.value)&&!n&&r&&d.jsx(Q,{"aria-label":`Clear ${e||"input"}`,"data-testid":"clear-input",className:$("absolute top-1/2 size-6 -translate-y-1/2 cursor-pointer bg-transparent opacity-50 [&_svg]:size-4",u.small?"right-2":"right-3",o==null?void 0:o.className),theme:u.theme,variant:"ghost",onClick:r,icon:Wl})]}),t&&d.jsx("p",{className:$("m-0 font-sans text-sm leading-4",{"text-slate-500":!u.error&&u.theme==="light","text-red-600":u.error&&u.theme==="light","text-slate-300":!u.error&&u.theme==="dark","text-red-300":u.error&&u.theme==="dark"},u.small?"mt-2":"mt-3"),children:t})]})}),Dd=e=>{const t=e.match(/^[a-zA-Z][a-zA-Z0-9+.-]*:\/\//);if(t){const i=e.slice(t[0].length).split("/").filter(u=>u!==""),c=t[0]+i[0],l=i.slice(1);return{baseDomain:c,pathSegments:l}}const n=e.split("/").filter(i=>i!==""),r=n[0]||"",o=n.slice(1);return{baseDomain:r,pathSegments:o}},Od=({baseDomain:e,urlChips:t,setUrlChips:n,emptyURLValue:r,setEmptyURLValue:o})=>{const i=(c,l)=>{n(u=>{const f=[...u];return f[l]=c,f})};return d.jsx("div",{className:"group relative mb-2 box-border rounded-md border border-slate-300 bg-white  text-slate-400 outline outline-0 transition-all p-3",children:d.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[d.jsxs("span",{className:"text-sm break-all flex items-center",children:[e,"/"]}),t.map((c,l)=>d.jsx(ka,{onChange:u=>i(u,l),value:c,className:"bg-slate-100 text-slate-900 border-none focus:bg-slate-200"},l)),t.length===0&&d.jsx(ka,{placeholder:"custom path",value:r,onChange:o,className:"bg-slate-100 text-slate-900 border-none focus:bg-slate-200"})]})})},Ld=({baseUrl:e,setPinUrl:t})=>{const[n,r]=s.useState(!1),{baseDomain:o,pathSegments:i}=Dd(e),[c,l]=s.useState(i),[u,f]=s.useState(""),h=u!==""?`${o}/${u}`:`${o}/${c.join("/")}`,v=i.join()!==c.join()||u!=="",w=()=>{t(h)},j=()=>{u!==""?f(""):l(i),r(!1)},b=Mt();return d.jsxs(Td,{onOpenChange:g=>{g||j()},children:[d.jsx(Rd,{asChild:!0,children:d.jsx(Q,{className:"border-slate-300 text-slate-600",icon:Xl,variant:"secondary",screenReaderLabel:"Edit URL configuration",size:"small"})}),d.jsxs(Ad,{container:b,children:[d.jsx(Id,{title:"URL Configuration",description:"Customizing the URL allows the pin to persist and appear on all pages matching the configured URL path."}),d.jsxs(Nd,{children:[n?d.jsx(Od,{baseDomain:o,urlChips:c,setUrlChips:l,emptyURLValue:u,setEmptyURLValue:f}):d.jsx(ci,{className:"mb-3 cursor-default overflow-hidden text-ellipsis",fullWidth:!0,value:h,disabled:!0}),n&&d.jsx("div",{className:"text-xs text-slate-500 mb-3",children:"Change URL parameters by editing or deleting the blocks above."}),d.jsx(Pc,{checked:n,onCheckedChange:g=>r(g==="indeterminate"?!1:g),label:"Use custom URL path"})]}),d.jsx(Md,{primaryAction:{children:"Save",variant:"primary",onClick:w},secondaryAction:{children:"Cancel",onClick:j},children:v&&d.jsx(Q,{variant:"secondary",screenReaderLabel:"reset",onClick:()=>{u!==""?f(""):l(i)},children:"Reset"})})]})]})},ui="Popover",[di,cx]=sn(ui,[ia]),bn=ia(),[Fd,tt]=di(ui),zd=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:c=!1}=e,l=bn(t),u=s.useRef(null),[f,h]=s.useState(!1),[v=!1,w]=fr({prop:r,defaultProp:o,onChange:i});return s.createElement(nc,l,s.createElement(Fd,{scope:t,contentId:ln(),triggerRef:u,open:v,onOpenChange:w,onOpenToggle:s.useCallback(()=>w(j=>!j),[w]),hasCustomAnchor:f,onCustomAnchorAdd:s.useCallback(()=>h(!0),[]),onCustomAnchorRemove:s.useCallback(()=>h(!1),[]),modal:c},n))},Bd="PopoverAnchor",Hd=s.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=tt(Bd,n),i=bn(n),{onCustomAnchorAdd:c,onCustomAnchorRemove:l}=o;return s.useEffect(()=>(c(),()=>l()),[c,l]),s.createElement(sa,V({},i,r,{ref:t}))}),$d="PopoverTrigger",Vd=s.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=tt($d,n),i=bn(n),c=ye(t,o.triggerRef),l=s.createElement(se.button,V({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":fi(o.open)},r,{ref:c,onClick:te(e.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?l:s.createElement(sa,V({asChild:!0},i),l)}),pi="PopoverPortal",[Ud,qd]=di(pi,{forceMount:void 0}),Gd=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,i=tt(pi,t);return s.createElement(Ud,{scope:t,forceMount:n},s.createElement(Ae,{present:n||i.open},s.createElement(lr,{asChild:!0,container:o},r)))},Dt="PopoverContent",Wd=s.forwardRef((e,t)=>{const n=qd(Dt,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,i=tt(Dt,e.__scopePopover);return s.createElement(Ae,{present:r||i.open},i.modal?s.createElement(Xd,V({},o,{ref:t})):s.createElement(Yd,V({},o,{ref:t})))}),Xd=s.forwardRef((e,t)=>{const n=tt(Dt,e.__scopePopover),r=s.useRef(null),o=ye(t,r),i=s.useRef(!1);return s.useEffect(()=>{const c=r.current;if(c)return ua(c)},[]),s.createElement(ca,{as:Ea,allowPinchZoom:!0},s.createElement(mi,V({},e,{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(e.onCloseAutoFocus,c=>{var l;c.preventDefault(),i.current||(l=n.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:te(e.onPointerDownOutside,c=>{const l=c.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,f=l.button===2||u;i.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:te(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})))}),Yd=s.forwardRef((e,t)=>{const n=tt(Dt,e.__scopePopover),r=s.useRef(!1),o=s.useRef(!1);return s.createElement(mi,V({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c;if((c=e.onCloseAutoFocus)===null||c===void 0||c.call(e,i),!i.defaultPrevented){var l;r.current||(l=n.triggerRef.current)===null||l===void 0||l.focus(),i.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:i=>{var c,l;(c=e.onInteractOutside)===null||c===void 0||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=i.target;!((l=n.triggerRef.current)===null||l===void 0)&&l.contains(u)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}}))}),mi=s.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,...v}=e,w=tt(Dt,n),j=bn(n);return da(),s.createElement(pa,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i},s.createElement(aa,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:f,onDismiss:()=>w.onOpenChange(!1)},s.createElement(tc,V({"data-state":fi(w.open),role:"dialog",id:w.contentId},j,v,{ref:t,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function fi(e){return e?"open":"closed"}const Kd=zd,Qd=Hd,Zd=Vd,Jd=Gd,ep=Wd,Ir=Kd,hi=Qd,gi=Zd,tp=nn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-auto rounded-xl outline-none text-sm font-medium max-w-full",{variants:{theme:{dark:"bg-slate-800 text-slate-100 shadow-popover",light:"bg-white text-slate-800 shadow-popoverLight"},variant:{simple:"px-4 py-3 text-center",complex:"p-4 min-w-[240px]"}},defaultVariants:{theme:"dark",variant:"simple"}}),Nr=s.forwardRef(({className:e,sideOffset:t=14,theme:n="dark",variant:r="simple",align:o="center",container:i,...c},l)=>d.jsx(Jd,{container:i,children:d.jsx(ep,{ref:l,align:o,className:$(tp({variant:r,theme:n}),e),sideOffset:t,"data-theme":n,...c})}));var nt=(e=>(e.Checkbox="checkbox",e.Radio="radio",e.Item="item",e))(nt||{});const bi=e=>d.jsx(Ir,{...e}),vi=H.forwardRef((e,t)=>d.jsx(gi,{ref:t,...e})),np=H.forwardRef((e,t)=>d.jsx(ac,{ref:t,...e})),xi=H.forwardRef(({theme:e="dark",children:t,className:n,...r},o)=>d.jsx(Nr,{theme:e,className:$("z-[100000] w-56 overflow-hidden px-0 py-2",n),ref:o,...r,children:t})),wi=({showAvatar:e,avatarProps:t,icon:n,childrenClassName:r,children:o,disabled:i})=>d.jsxs(d.Fragment,{children:[e&&d.jsx("div",{className:$("pl-1",{"pointer-events-none opacity-50":i}),children:d.jsx(Sc,{size:"xs",...t})}),n&&!e&&d.jsx("span",{className:"mr-1 size-5 flex-none items-center justify-center pl-1",children:d.jsx(ae,{icon:n,className:$(lc(),"text-sm transition-colors")})}),d.jsx("span",{className:$("w-56 truncate px-1 text-left",r),children:o})]}),yi=nn("group relative flex cursor-pointer select-none min-h-8 px-3 py-1 items-center gap-1 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:text-slate-500 w-full justify-between text-slate-900 bg-white dark:bg-slate-800 focus:bg-slate-50 dark:text-slate-100 dark:hover:bg-slate-700 dark:focus:bg-slate-700"),Mr=H.forwardRef(({showAvatar:e,avatarProps:t,icon:n,checked:r=!1,menuType:o=nt.Radio,className:i,childrenClassName:c,children:l,onItemSelect:u,onItemKeyDown:f,value:h,disabled:v,...w},j)=>{const b={label:(l==null?void 0:l.toString())||h.toString(),checked:r,value:h},g=()=>{u==null||u(b)};return d.jsxs("div",{ref:j,className:$(yi(),i),onClick:g,onKeyDown:E=>f==null?void 0:f(E,b),tabIndex:0,role:"button","data-disabled":v,...w,children:[o!==nt.Item&&d.jsx("div",{className:"size-4 flex-none",children:r&&d.jsx("div",{className:"flex size-4 items-center justify-center",children:d.jsx(ae,{icon:o===nt.Radio?Yl:na,className:$(ic(),"size-3")})})}),d.jsx(wi,{showAvatar:e,avatarProps:t,icon:n,childrenClassName:c,disabled:v,children:l})]})});H.forwardRef(({showAvatar:e,avatarProps:t,icon:n,className:r,childrenClassName:o,children:i,onClick:c,disabled:l,...u},f)=>d.jsx("button",{ref:f,className:$(yi(),r),onClick:c,"data-disabled":l,...u,children:d.jsx(wi,{showAvatar:e,avatarProps:t,icon:n,childrenClassName:o,disabled:l,children:i})}));const rp=nn("z-50 overflow-x-hidden max-h-[calc(var(--radix-dropdown-menu-content-available-height)_-_8px)]"),op=()=>d.jsxs("div",{className:"flex flex-col space-y-4 px-4 py-2",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(De,{className:"h-4 w-8 rounded-md"}),d.jsx(De,{className:"h-4 w-[60%] rounded-md"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(De,{className:"h-4 w-8 rounded-md"}),d.jsx(De,{className:"h-4 w-[75%] rounded-md"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(De,{className:"h-4 w-8 rounded-md"}),d.jsx(De,{className:"h-4 w-[69%] rounded-md"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(De,{className:"h-4 w-8 rounded-md"}),d.jsx(De,{className:"h-4 w-[71%] rounded-md"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(De,{className:"h-4 w-8 rounded-md"}),d.jsx(De,{className:"h-4 w-[66%] rounded-md"})]})]}),_i=H.forwardRef(({theme:e,placeholder:t="Search",menuType:n=nt.Radio,onOptionSelect:r,onValueChange:o,noResultsText:i,isLoading:c=!1,isSearchable:l=!0,children:u,className:f,scrollAreaChildren:h,handleInputChange:v},w)=>{const j=s.useMemo(()=>u.map(S=>S.props),[u]),[b,g]=s.useState(""),[E,T]=s.useState(j),[I,O]=s.useState(null),[a,p]=s.useState(0),m=s.useRef(null),x=s.useRef([]),_=s.useRef(null);s.useEffect(()=>{if(b!==""){const S=j.filter(M=>(M.children||M.label).toLowerCase().includes(b.toLowerCase()));T(S)}else T(j.slice(0,j.length))},[b,j]),s.useEffect(()=>{if(I){const S=E.map(M=>{if(M.value===I.value){const R={...M,checked:n===nt.Checkbox?!M.checked:!0};return r==null||r(R),R}return n===nt.Radio?{...M,checked:!1}:M});o==null||o(S.filter(M=>M.checked)),T(S)}},[I]);const C=S=>{O(S)},k=(S,M)=>{var R,P,N,y,A,z;if((S.key===" "||S.key==="Enter")&&(S.preventDefault(),C(M)),S.key==="ArrowDown"||S.key==="Tab"){if(S.preventDefault(),(R=x.current[a])==null||R.scrollIntoView({behavior:"smooth",block:"start"}),a<E.length-1)p(F=>F),(P=x.current[a])==null||P.focus(),(N=_.current)==null||N.scrollIntoView({behavior:"smooth",block:"end"});else{p(0),(y=m.current)==null||y.focus();return}p(F=>{var D;const L=F===E.length-1?0:F+1;return(D=x.current[L])==null||D.focus(),L})}if(S.key==="ArrowUp"){if(S.preventDefault(),(A=x.current[a])==null||A.scrollIntoView({behavior:"smooth",block:"start"}),a===0){(z=m.current)==null||z.focus();return}p(F=>{var D;const L=F===0?E.length-1:F-1;return(D=x.current[L])==null||D.focus(),L})}};return d.jsxs("div",{ref:w,"data-theme":e,children:[l&&d.jsx("div",{className:"px-2",children:d.jsx(ci,{iconLeft:Ac,placeholder:t,theme:e,iconProps:{className:"text-slate-500 size-4"},small:!0,className:"outline-0 focus:outline-0",onChange:S=>v?v(S.target.value):g(S.target.value),fullWidth:!0,...!v&&{value:b},ref:m})}),u&&l&&d.jsx(np,{}),d.jsx("div",{className:$(rp(),f),children:c?d.jsx(op,{}):d.jsxs(si,{theme:e,ref:_,children:[E.length>0?E.map((S,M)=>d.jsx(Mr,{onItemSelect:()=>C(S),onItemKeyDown:k,menuType:n,ref:R=>{x.current[M]=R},...S,children:S.children},S.value)):d.jsx("div",{className:"p-4 text-center text-sm text-slate-200",children:i??"No results found."}),!!h&&h]})})]})});H.forwardRef((e,t)=>d.jsx(sc,{ref:t,...e}));const ki=()=>"dark",ap=e=>({id:e==null?void 0:e.logo_app_tag_id,name:e==null?void 0:e.logo_app_tag_name,icon_url:e==null?void 0:e.logo_app_tag_icon_url}),Ei=e=>({created:new Date(e==null?void 0:e.created),icon_and_color_updated:e==null?void 0:e.icon_and_color_updated,app_tags:e==null?void 0:e.app_tags,icon:e==null?void 0:e.fa_icon,icon_color:e==null?void 0:e.fa_icon_color,logo_app_tag:ap(e)}),ip=(e,t,n,r,o)=>{const[i,c]=s.useState(!1),l=n!==void 0?n:i,u=r||c,f=s.useCallback(w=>{const j=document.getElementById("crxjs-ext");j&&!j.contains(w.target)&&u(!1)},[u]),h=s.useCallback(w=>{const j=w.target;if(e.current&&(e.current===j||e.current.contains(j))){u(!l);return}if(o!=null&&o.current&&(o.current===j||o.current.contains(j))){u(!l);return}t.current&&(t.current===j||t.current.contains(j))||u(!1)},[l,e,t,o,u]),v=s.useCallback(()=>{if(e.current){const w=e.current.getRootNode();if("getElementById"in w)return w.getElementById("root-scribe-elem")}return null},[e]);return s.useEffect(()=>{const w=v();return document.addEventListener("mousedown",f),w&&w.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",f),w&&w.removeEventListener("mousedown",h)}},[f,h,v]),s.useEffect(()=>{if(l){const w=v();w&&requestAnimationFrame(()=>{const j=w.querySelector("[data-radix-popper-content-wrapper] input");j instanceof HTMLInputElement&&j.focus()})}},[l,v]),[l,u]},Ci=({selectedDocument:e,setSelectedDocument:t,debouncedDocumentSearchValue:n,setDebouncedDocumentSearchValue:r,external:o=!1,externalOpen:i,onExternalOpenChange:c,externalTriggerRef:l})=>{const u=ki(),f=Mt(),h=s.useRef(null),v=s.useRef(null),[w,j]=ip(h,v,i,c,l),{pinsDocuments:b}=re(Yo),[g,E]=s.useState("");s.useEffect(()=>{const I=setTimeout(()=>{r(g)},100);return()=>{clearTimeout(I)}},[g]),s.useEffect(()=>{chrome.runtime.sendMessage({messageType:"fetchDocuments",query:n})},[n]);const T=s.useMemo(()=>b.map(I=>({value:I.external_id,label:I.name,...I})),[b]);return s.useEffect(()=>{w&&chrome.runtime.sendMessage({messageType:"fetchDocuments",query:g})},[w]),d.jsxs(bi,{open:w,children:[o&&(l==null?void 0:l.current)&&d.jsx(hi,{asChild:!0,children:d.jsx("span",{})}),d.jsx(vi,{asChild:!0,className:o?"hidden":"",children:d.jsx(Q,{ref:h,size:"default",variant:"ghost",icon:Dc,iconProps:{style:{color:"#64748B"}},children:"Document"})}),d.jsx(xi,{ref:v,theme:u,container:f,align:"start",alignOffset:-16,style:{maxHeight:"220px",overflowY:"scroll",width:"300px"},children:d.jsx(_i,{menuType:"checkbox",theme:u,placeholder:"Search document titles",handleInputChange:E,onOptionSelect:I=>{const O=T.find(a=>a.value===I.value);t(O||null),j(!1)},noResultsText:"No scribe documents found",children:T.map(I=>d.jsx(Mr,{value:I.value,className:"flex justify-start",style:{width:"100%"},checked:(e==null?void 0:e.external_id)===I.value,children:d.jsxs("div",{className:"flex items-center gap-2",children:[I.kind==="scribe"&&d.jsx("div",{className:"",children:d.jsx(ma,{document:Ei(I),size:13,variant:"iconGlow",classes:"h-5 w-5",className:"",style:{marginRight:"10px"}})}),I.kind==="knowledge_page"&&d.jsx("div",{children:d.jsx(fa,{isColorfulHeaderEnabled:!!(I!=null&&I.colorful_header_enabled),colorfulHeader:(I==null?void 0:I.colorful_header_color)||"",className:"flex-none",size:"small"})}),d.jsx("span",{children:I.label})]})},I.value))})})]})},sp=({selectedDocument:e,setSelectedDocument:t,debouncedDocumentSearchValue:n,setDebouncedDocumentSearchValue:r})=>{const[o,i]=s.useState(!1),c=s.useRef(null);return d.jsxs(bc,{className:"group relative p-2 text-slate-500 flex gap-2",style:{background:"#F8FAFC",border:"1px solid  #F1F5F9",gridTemplateColumns:"auto 1fr",maxWidth:"300px"},children:[d.jsx("div",{children:e.kind==="scribe"?d.jsx(ma,{variant:"iconGlow",classes:"h-8 w-8",shapeSquare:!1,tinted:!1,dropShadowIcon:!1,coloredShadow:!1,shadowed:!0,size:18,document:Ei(e)}):d.jsx(fa,{isColorfulHeaderEnabled:!!(e!=null&&e.colorful_header_enabled),colorfulHeader:(e==null?void 0:e.colorful_header_color)||"",className:"flex-none",size:"medium"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-1",children:e.name}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:"text-xs text-slate-500",children:[e.user_owner_first_name," ",e.user_owner_last_name]}),e.steps_count&&d.jsxs("div",{className:"text-xs whitespace-nowrap rounded  text-center border-l border-slate-200 ml-2 pl-2",children:[e==null?void 0:e.steps_count," ",(e==null?void 0:e.steps_count)===1?"Step":"Steps"]})]})]}),d.jsx(Ci,{selectedDocument:e,setSelectedDocument:t,debouncedDocumentSearchValue:n,setDebouncedDocumentSearchValue:r,external:!0,externalOpen:o,onExternalOpenChange:i,externalTriggerRef:c}),d.jsxs(cc,{className:$("absolute right-1 top-1 opacity-0 transition-opacity duration-200 group-focus-within:opacity-100 group-hover:opacity-100"),children:[d.jsx(ha,{ref:c,icon:Oc,onClick:()=>i(!0),title:"Change document","aria-label":"Change document"}),d.jsx(uc,{}),d.jsx(ha,{icon:Lc,onClick:()=>t(null),title:"Delete document","aria-label":"Delete document",style:{color:"inherit"},onMouseEnter:l=>{l.currentTarget.style.color="#EF4444"},onMouseLeave:l=>{l.currentTarget.style.color=""}})]})]})},ji=(e,t)=>{const n=e.startsWith("#")?e.slice(1):e,r=parseInt(n.slice(0,2),16),o=parseInt(n.slice(2,4),16),i=parseInt(n.slice(4,6),16);return`rgba(${r}, ${o}, ${i}, ${t})`},lp=(e,t=.1)=>{const n=e.startsWith("#")?e.slice(1):e,r=Math.min(255,parseInt(n.slice(0,2),16)+255*t),o=Math.min(255,parseInt(n.slice(2,4),16)+255*t),i=Math.min(255,parseInt(n.slice(4,6),16)+255*t);return`#${[r,o,i].map(c=>Math.round(c).toString(16).padStart(2,"0")).join("")}`},Ot=e=>/^[0-9A-F]{6}$/i.test(e),cp=e=>e.length===3?e.split("").map(t=>t+t).join(""):e,up=[{id:"D946EF",color:"#D946EF"},{id:"8B5CF6",color:"#8B5CF6"},{id:"6366F1",color:"#6366F1"},{id:"3B82F6",color:"#3B82F6"},{id:"0EA5E9",color:"#0EA5E9"},{id:"06B6D4",color:"#06B6D4"},{id:"34D399",color:"#34D399"},{id:"EAB308",color:"#EAB308"},{id:"FB923C",color:"#FB923C"},{id:"F97316",color:"#F97316"},{id:"EF4444",color:"#EF4444"},{id:"F43F5E",color:"#F43F5E"},{id:"EC4899",color:"#EC4899"}],dp=({onColorChange:e,customColor:t})=>{const[n,r]=s.useState(!1),[o,i]=s.useState(t.slice(1)),[c,l]=s.useState(!1),u=Mt(),f=s.useRef(null),h=s.useRef(null);return d.jsxs(Ir,{open:c,onOpenChange:l,children:[d.jsx(gi,{asChild:!0,children:d.jsx(Q,{ref:h,className:"border-slate-300 text-slate-600",style:{color:t},size:"small",variant:"secondary",icon:sr})}),d.jsxs(Nr,{className:"pt-2 pb-2",style:{zIndex:1e6,width:"230px"},side:"bottom",align:"start",alignOffset:-16,container:u,children:[d.jsx("div",{className:"pb-1 text-xs uppercase text-slate-400  text-left",children:"select color"}),d.jsxs("div",{className:"relative flex flex-row flex-wrap p-1 gap-3",children:[d.jsxs("button",{onClick:()=>{r(!0)},"aria-label":"Select custom color",className:$("flex h-4 w-4 cursor-pointer items-center justify-center rounded-full bg-transparent text-white hover:bg-slate-800"),children:[d.jsx("div",{className:"flex rounded-full text-white",children:d.jsx(ae,{icon:Kl,style:{width:"15px",height:"15px"}})}),n&&d.jsx("div",{className:"absolute h-7 w-7 rounded-full pointer-events-none",style:{border:"2px solid #6366F1"}})]}),up.map(v=>d.jsx("button",{className:"cursor-pointer h-4 w-4 rounded-full relative items-center justify-center flex","aria-label":`Select ${v.color} color`,onClick:()=>{r(!1),e(v.color),i(v.color.slice(1))},children:d.jsxs("div",{className:"flex h-6 w-6 items-center justify-center",children:[d.jsx("div",{className:"absolute h-4 w-4 rounded-full",style:{backgroundColor:v.color,boxShadow:`${lp(v.id,.3)} 0px 0px 0px 1px`},children:d.jsx("div",{className:"absolute inset-0 h-4 w-4 rounded-full hover:animate-ping",style:{backgroundColor:ji(v.id,.3),border:`1px solid ${v.color}`}})}),t===v.color&&!n&&d.jsx("div",{className:"absolute h-7 w-7 rounded-full pointer-events-none left-[-6px] top-[-6px]",style:{border:"2px solid #6366F1"}})]})},v.id)),n&&d.jsx("div",{className:"mb-2 mt-2 block w-full flex-row justify-around align-middle",style:{backgroundColor:"#33415526",border:"1px solid #334155",borderRadius:"4px",width:"200px"},children:d.jsxs("div",{className:"relative rounded-md shadow-sm grid grid-cols-[auto_1fr_auto] items-center pl-2",children:[d.jsx("div",{className:"h-4 w-4 rounded-full mr-2",onClick:()=>{f.current&&f.current.focus()},style:{backgroundColor:ji(o,1),boxShadow:"rgba(255, 255, 255, 0.15) 0px 0px 0px 1px inset"}}),d.jsx("input",{type:"text",ref:f,style:{width:"100%",height:"1rem",backgroundColor:"#212D3F",border:"none",fontSize:"12px"},className:"p-0 text-slate-100",maxLength:7,minLength:3,value:o,onChange:v=>{const w=v.target.value;Ot(w)?i(cp(w)):i(w)}}),d.jsx("button",{"aria-label":"Select custom color",disabled:!Ot(o),onClick:()=>{if(Ot(o)){const v=`#${o}`;r(!0),e(v),i(v.slice(1)),l(!1)}},className:"pt-1 pb-1",style:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px",backgroundColor:"#212D3F",cursor:Ot(o)?"pointer":"default"},children:d.jsx(ae,{icon:na,style:{width:"1rem",height:"100%"},className:$("h-4 w-4",Ot(o)?"text-white":"text-gray-500"),"aria-hidden":"true"})})]})})]})]})]})},pp=({pinDescription:e,onDescriptionChange:t})=>{const n=s.useRef(null),r=100,o=()=>{const i=n.current;i&&(i.style.height="auto",i.style.height=`${Math.min(i.scrollHeight,r)}px`)};return d.jsx("div",{className:"text-slate-400 mb-2",children:d.jsx(ou,{ref:n,value:e,onInput:o,onChange:i=>t(i.target.value),placeholder:"Type your notes",resize:!1,rows:1,maxLength:1e3,small:!0,style:{overflow:"auto",maxHeight:`${r}px`,height:"24px",minHeight:"24px",padding:"4px 8px"},className:"w-full rounded-md bg-white text-slate-900 outline-0 focus:outline-1 focus:outline-indigo-400"})})},mp=({selectedTeamIds:e,onTeamChange:t})=>{const n=ki(),r=Mt(),o=re(jl),i=Pu(o),c=(o==null?void 0:o.organizations)||[],l=h=>{const v=h.map(b=>b.value),w=v.includes("all-teams"),j=c.length>0&&c.every(b=>e.includes(b.id));if(w&&!j){const b=c.map(g=>g.id);t(b)}else if(!w&&j)t([]);else{const b=v.filter(g=>g!=="all-teams");t(b)}},u=c.length>0&&c.every(h=>e.includes(h.id)),f=`menu-${u}-${e.join(",")}`;return d.jsxs(bi,{children:[d.jsx(vi,{asChild:!0,children:d.jsx(Q,{className:"border-slate-300 text-slate-600",size:"small",variant:"secondary",icon:Fc})}),d.jsx(xi,{theme:n,container:r,align:"start",alignOffset:-16,children:d.jsx(_i,{menuType:"checkbox",theme:n,onValueChange:l,children:i.map(h=>d.jsx(Mr,{value:h.value,checked:h.value==="all-teams"?u:e.includes(h.value),...h.menuItemProps,children:h.label},h.value))},f)})]})},fp=({handleCreatePin:e,selectedTeamIds:t,onTeamChange:n,onColorChange:r,customColor:o,pinUrl:i,setPinUrl:c,pinDescription:l,onDescriptionChange:u,selectedDocument:f,setSelectedDocument:h,debouncedDocumentSearchValue:v,setDebouncedDocumentSearchValue:w})=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"text-slate-400 mb-4",children:d.jsx(pp,{pinDescription:l,onDescriptionChange:u})}),f&&d.jsx(sp,{selectedDocument:f,setSelectedDocument:h,debouncedDocumentSearchValue:v,setDebouncedDocumentSearchValue:w}),!f&&d.jsx(Ci,{selectedDocument:f,setSelectedDocument:h,debouncedDocumentSearchValue:v,setDebouncedDocumentSearchValue:w}),d.jsxs("div",{className:"flex gap-2 mt-4",children:[d.jsx(dp,{onColorChange:r,customColor:o}),d.jsx(mp,{selectedTeamIds:t,onTeamChange:n}),d.jsx(Ld,{baseUrl:i,setPinUrl:c}),d.jsx(Q,{className:"text-white ml-auto",icon:ra,variant:"primary",screenReaderLabel:"create pin",size:"small",onClick:()=>{e()}})]})]}),Si=({pinX:e,pinY:t,isVisible:n,onMouseEnter:r,onMouseLeave:o,enableKeyboardCapture:i=!1,children:c})=>{const l=s.useRef(null),[u,f]=s.useState(null),h=Mt();return s.useEffect(()=>{if(l.current&&n){const v=l.current.getBoundingClientRect(),w=Ru({pinX:e,pinY:t,dialogWidth:v.width,dialogHeight:v.height,horizontalSpacing:12,verticalSpacing:12,tightHorizontalSpacing:6,tightVerticalSpacing:6});f(w)}},[e,t,n]),s.useEffect(()=>{if(i&&h){const v=["keydown","keypress"],w=[];return v.forEach(j=>{const b=g=>{g.stopPropagation()};h.addEventListener(j,b),w.push(b)}),()=>{v.forEach((j,b)=>{h.removeEventListener(j,w[b])})}}},[i,h]),n?d.jsx("div",{ref:l,className:"rounded-lg shadow-lg bg-white p-4",style:{position:"fixed",left:(u==null?void 0:u.x)??e,top:(u==null?void 0:u.y)??t,zIndex:1e5-1,width:"300px",visibility:u?"visible":"hidden",pointerEvents:"auto",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseEnter:r,onMouseLeave:o,children:c}):null},hp={attributes:!0,childList:!0,subtree:!0},gp=({callback:e,debounceMs:t=0,options:n=hp})=>{const[r,o]=s.useState();return s.useEffect(()=>{const i=new MutationObserver(t>0?Sl.debounce(e,t):e);return o(i),()=>i==null?void 0:i.disconnect()},[e]),s.useEffect(()=>{r&&r.observe(document,n)},[n,r]),r},bp={attributes:!0,childList:!0,subtree:!0},Pi=({selector:e,xpath:t,tag:n,text:r,attributes:o,debounceMs:i,options:c=bp,retryCount:l=0,timestamp:u,actionType:f,aiFallbackElementId:h,actionId:v,wasInIframe:w,iframeAttributes:j,parentAttributes:b,parentTag:g})=>{const{guideMeAlgo:E,guideMeAlgoV3:T,guideMeAiFallbackAlwaysOn:I,guideMeAiFallback:O}=Qe(ue.getState()),[a,p]=s.useState(null),[m,x]=s.useState(null),[_,C]=s.useState(""),[k,S]=s.useState(null),M=(y,A=1)=>{let z=0,F=y;for(;z<=A;){if(!F.parentElement)return y;if(yc(F.parentElement))return F.parentElement;z+=1,F=F.parentElement}return y},R=y=>y?y!=null&&y.matches(wc.join(", "))||f!=="mouse_click_action"?y:M(y):null,P=s.useRef({selector:e,xpath:t,tag:n,text:r,attributes:o,aiFallbackElementId:h,actionId:v,wasInIframe:w,iframeAttributes:j,parentAttributes:b,parentTag:g});s.useEffect(()=>{P.current={selector:e,xpath:t,tag:n,text:r,attributes:o,aiFallbackElementId:h,actionId:v,wasInIframe:w,iframeAttributes:j,parentAttributes:b,parentTag:g}},[e,t,n,r,o,h,v,w,j,b,g]);const N=s.useCallback(()=>{var L,D,B,q,G,W,ne,J,ee,Ve,Ue;const{element:y,matchMethod:A,parentIframe:z,algorithm:F}=va({selector:(L=P==null?void 0:P.current)==null?void 0:L.selector,attributes:(D=P==null?void 0:P.current)==null?void 0:D.attributes,xpath:(B=P==null?void 0:P.current)==null?void 0:B.xpath,tag:(q=P==null?void 0:P.current)==null?void 0:q.tag,text:(G=P==null?void 0:P.current)==null?void 0:G.text,parentAttributes:(W=P==null?void 0:P.current)==null?void 0:W.parentAttributes,parentTag:(ne=P==null?void 0:P.current)==null?void 0:ne.parentTag,algoVersion:E==null?void 0:E.toString(),algoV3Enabled:!!T,isAiFallbackEnabled:!!O,isAiFallbackAlwaysOnEnabled:!!I,aiFallbackElementId:(J=P==null?void 0:P.current)==null?void 0:J.aiFallbackElementId,actionId:(ee=P==null?void 0:P.current)==null?void 0:ee.actionId,wasInIframe:(Ve=P==null?void 0:P.current)==null?void 0:Ve.wasInIframe,iframeAttributes:(Ue=P==null?void 0:P.current)==null?void 0:Ue.iframeAttributes});p(R(y)??y??null),x(A),S(z||null),C(F||"")},[v]);return s.useEffect(()=>{const{element:y,matchMethod:A,parentIframe:z,algorithm:F}=va({selector:e,attributes:o,xpath:t,tag:n,text:r,parentAttributes:b,parentTag:g,algoVersion:E==null?void 0:E.toString(),algoV3Enabled:!!T,isAiFallbackEnabled:!!O,isAiFallbackAlwaysOnEnabled:!!I,aiFallbackElementId:h,actionId:v,wasInIframe:w,iframeAttributes:j});p(R(y)??y??null),x(A),S(z||null),C(F||"")},[p,e,t,n,r,l,u,h]),gp({callback:N,debounceMs:i,options:c}),{element:a,matchMethod:m,parentIframe:k,algorithm:_}},vp=({pin:e,isSimplified:t=!1})=>t?e.description?d.jsx("div",{className:"text-sm text-gray-900 leading-relaxed",children:e.description}):d.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[d.jsx("div",{className:"flex-shrink-0 mt-1",children:d.jsx("div",{className:"w-6 h-6 rounded flex items-center justify-center",style:{backgroundColor:"#4285f4"},children:d.jsx(Xo,{icon:oa,className:"text-white",style:{fontSize:"12px"}})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"How to apply custom fonts in Google Docs"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[d.jsx("span",{children:"Shelley Feeney"}),d.jsx("span",{children:"\u2022"}),d.jsx("span",{children:"12 Steps"})]})]})]}):d.jsxs(d.Fragment,{children:[e.description&&d.jsx("div",{className:"mb-4",children:d.jsx("div",{className:"text-sm text-gray-900 leading-relaxed truncate",children:e.description})}),d.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[d.jsx("div",{className:"flex-shrink-0 mt-1",children:d.jsx("div",{className:"w-6 h-6 rounded flex items-center justify-center",style:{backgroundColor:"#4285f4"},children:d.jsx(Xo,{icon:oa,className:"text-white",style:{fontSize:"12px"}})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"How to apply custom fonts in Google Docs"}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[d.jsx("span",{children:"Shelley Feeney"}),d.jsx("span",{children:"\u2022"}),d.jsx("span",{children:"12 Steps"})]})]})]})]}),xp=({pin:e,isPinning:t})=>{var g;const[n,r]=s.useState(!1),o=s.useRef(null),i=re(Pl),c=n||i===e.id,{element:l,parentIframe:u}=Pi({aiFallbackElementId:e.id.toString(),selector:e.selector,xpath:e.target_xpath,tag:e.target_tag,text:e.text,attributes:e.attributes,debounceMs:200,retryCount:0,timestamp:e.timestamp.toString(),actionType:"mouse_click_action",actionId:((g=e.actionExternalId)==null?void 0:g.toString())??"",wasInIframe:e?e.was_in_iframe:null,iframeAttributes:(e==null?void 0:e.iframe_attributes)||null,parentAttributes:(e==null?void 0:e.target_parent_attributes)||null,parentTag:(e==null?void 0:e.target_parent_tag)||""}),{isVisible:f}=_r({element:l,subtreeEnabled:!1,isPinning:t}),h=$a({pin:e,pinTarget:l,parentIframe:u});s.useEffect(()=>()=>{o.current&&clearTimeout(o.current)},[]);const v=()=>{o.current&&(clearTimeout(o.current),o.current=null),r(!0)},w=()=>{o.current=setTimeout(()=>{r(!1)},150)},j=()=>{o.current&&(clearTimeout(o.current),o.current=null)},b=()=>{r(!1)};return f?d.jsxs(d.Fragment,{children:[d.jsx(Cr,{x:h.x,y:h.y,animate:!0,shape:"circle",enablePointerEvents:!0,color:e.pin_color,isHovered:c,onMouseEnter:v,onMouseLeave:w}),d.jsx(Si,{pinX:h.x,pinY:h.y,isVisible:c,onMouseEnter:j,onMouseLeave:b,children:d.jsx(vp,{pin:e})})]}):null},wp=({pins:e,isPinning:t})=>(s.useEffect(()=>{if(e&&e.length>0){const n=e.filter(r=>!0);Tt("pins_display",{pins_visible_count:n.length,pins_total_count:e.length,page_domain:window.location.hostname,iframe_pins_count:e.filter(r=>r.was_in_iframe).length})}},[e]),d.jsx(d.Fragment,{children:e.map(n=>d.jsx(xp,{pin:n,isPinning:t},n.id))})),yp="#EAB308",_p=({pins:e})=>{const[t,n]=s.useState(!1),[r,o]=s.useState(!1),[i,c]=s.useState(!1),[l,u]=s.useState(null),[f,h]=s.useState([]),[v,w]=s.useState(null),[j,b]=s.useState(""),[g,E]=s.useState(yp),[T,I]=s.useState(Iu()),[O,a]=s.useState(""),p=s.useRef(null),m=R=>{var z,F;if(!R)return{element:null,elementTag:"unknown",elementClass:"",isInIframe:!1};const P=R.target,N=((z=P==null?void 0:P.tagName)==null?void 0:z.toLowerCase())||"unknown",y=(P==null?void 0:P.className)||"",A=document!==((F=window.top)==null?void 0:F.document);return{element:P,elementTag:N,elementClass:y,isInIframe:A}},x=R=>{R.preventDefault(),R.stopPropagation(),R.stopImmediatePropagation();const{element:P,elementTag:N,elementClass:y,isInIframe:A}=m(R);Tt("pins_drop_pin",{element:P,element_tag:N,element_class:y,pin_x:R.clientX,pin_y:R.clientY,iframe_context:A,page_domain:window.location.hostname}),n(!1),u(R),o(!0),Tt("pins_dialog_open",{pin_x:R.clientX,pin_y:R.clientY,element:P})},_=()=>{chrome.runtime.sendMessage({messageType:"stopDropPin"})};s.useEffect(()=>{const R=P=>{P.messageType==="startDropPin"&&n(!0),P.messageType==="stopDropPin"&&n(!1)};return chrome.runtime.onMessage.addListener(R),()=>{chrome.runtime.onMessage.removeListener(R)}},[]);const C=()=>{alert("pin to page")},k=()=>{if(o(!1),!l)return;const{element:R}=m(l),P=Su(l),N={id:crypto.randomUUID(),...P,shared_with_orgs:f,pin_color:g,scribe_document:v==null?void 0:v.external_id,pin_shape:"circle",description:O};Tt("pins_create_confirm",{pin:N,element:R,page_domain:window.location.hostname}),chrome.runtime.sendMessage({messageType:"createPin",pin:N}),a(""),w(null),b("")},S=R=>{h(R)},M=R=>{E(R)};return d.jsxs(d.Fragment,{children:[e&&e.length!==0&&d.jsx(wp,{pins:e,isPinning:r}),t&&d.jsx(Du,{onPinDrop:x,onEscape:_,onPinToPage:C,isDragging:i,color:g}),r&&l&&d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{display:i?"none":"block"},children:d.jsx(Si,{pinX:l.x-dn,pinY:l.y-dn,isVisible:!0,enableKeyboardCapture:!0,children:d.jsx(fp,{handleCreatePin:k,selectedTeamIds:f,onTeamChange:S,customColor:g,onColorChange:M,pinUrl:T,setPinUrl:I,pinDescription:O,onDescriptionChange:a,selectedDocument:v,setSelectedDocument:w,debouncedDocumentSearchValue:j,setDebouncedDocumentSearchValue:b})})}),l&&d.jsx(Cr,{color:g,ref:p,x:l.x-dn,y:l.y-dn,animate:!0,enablePointerEvents:!0,enableDragging:!0,onDragStart:()=>{c(!0)},onDrag:()=>{n(!0)},onDragEnd:(R,P)=>{c(!1),n(!1),x(P)}})]})]})};var Ti=function(e){return e.reduce(function(t,n){var r=n[0],o=n[1];return t[r]=o,t},{})},Ri=typeof window<"u"&&window.document&&window.document.createElement?s.useLayoutEffect:s.useEffect,ve="top",Ce="bottom",je="right",xe="left",Ar="auto",Lt=[ve,Ce,je,xe],ht="start",Ft="end",kp="clippingParents",Ii="viewport",zt="popper",Ep="reference",Ni=Lt.reduce(function(e,t){return e.concat([t+"-"+ht,t+"-"+Ft])},[]),Mi=[].concat(Lt,[Ar]).reduce(function(e,t){return e.concat([t,t+"-"+ht,t+"-"+Ft])},[]),Cp="beforeRead",jp="read",Sp="afterRead",Pp="beforeMain",Tp="main",Rp="afterMain",Ip="beforeWrite",Np="write",Mp="afterWrite",Ap=[Cp,jp,Sp,Pp,Tp,Rp,Ip,Np,Mp];function Oe(e){return e?(e.nodeName||"").toLowerCase():null}function ke(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function rt(e){var t=ke(e).Element;return e instanceof t||e instanceof Element}function Se(e){var t=ke(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Dr(e){if(typeof ShadowRoot>"u")return!1;var t=ke(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Dp(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},i=t.elements[n];!Se(i)||!Oe(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(c){var l=o[c];l===!1?i.removeAttribute(c):i.setAttribute(c,l===!0?"":l)}))})}function Op(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],i=t.attributes[r]||{},c=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),l=c.reduce(function(u,f){return u[f]="",u},{});!Se(o)||!Oe(o)||(Object.assign(o.style,l),Object.keys(i).forEach(function(u){o.removeAttribute(u)}))})}}const Lp={name:"applyStyles",enabled:!0,phase:"write",fn:Dp,effect:Op,requires:["computeStyles"]};function Le(e){return e.split("-")[0]}var ot=Math.max,vn=Math.min,gt=Math.round;function Or(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ai(){return!/^((?!chrome|android).)*safari/i.test(Or())}function bt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&Se(e)&&(o=e.offsetWidth>0&&gt(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&gt(r.height)/e.offsetHeight||1);var c=rt(e)?ke(e):window,l=c.visualViewport,u=!Ai()&&n,f=(r.left+(u&&l?l.offsetLeft:0))/o,h=(r.top+(u&&l?l.offsetTop:0))/i,v=r.width/o,w=r.height/i;return{width:v,height:w,top:h,right:f+v,bottom:h+w,left:f,x:f,y:h}}function Lr(e){var t=bt(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Di(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Dr(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Be(e){return ke(e).getComputedStyle(e)}function Fp(e){return["table","td","th"].indexOf(Oe(e))>=0}function Ge(e){return((rt(e)?e.ownerDocument:e.document)||window.document).documentElement}function xn(e){return Oe(e)==="html"?e:e.assignedSlot||e.parentNode||(Dr(e)?e.host:null)||Ge(e)}function Oi(e){return!Se(e)||Be(e).position==="fixed"?null:e.offsetParent}function zp(e){var t=/firefox/i.test(Or()),n=/Trident/i.test(Or());if(n&&Se(e)){var r=Be(e);if(r.position==="fixed")return null}var o=xn(e);for(Dr(o)&&(o=o.host);Se(o)&&["html","body"].indexOf(Oe(o))<0;){var i=Be(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function Bt(e){for(var t=ke(e),n=Oi(e);n&&Fp(n)&&Be(n).position==="static";)n=Oi(n);return n&&(Oe(n)==="html"||Oe(n)==="body"&&Be(n).position==="static")?t:n||zp(e)||t}function Fr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ht(e,t,n){return ot(e,vn(t,n))}function Bp(e,t,n){var r=Ht(e,t,n);return r>n?n:r}function Li(){return{top:0,right:0,bottom:0,left:0}}function Fi(e){return Object.assign({},Li(),e)}function zi(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var Hp=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Fi(typeof e!="number"?e:zi(e,Lt))};function $p(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,c=n.modifiersData.popperOffsets,l=Le(n.placement),u=Fr(l),f=[xe,je].indexOf(l)>=0,h=f?"height":"width";if(!(!i||!c)){var v=Hp(o.padding,n),w=Lr(i),j=u==="y"?ve:xe,b=u==="y"?Ce:je,g=n.rects.reference[h]+n.rects.reference[u]-c[u]-n.rects.popper[h],E=c[u]-n.rects.reference[u],T=Bt(i),I=T?u==="y"?T.clientHeight||0:T.clientWidth||0:0,O=g/2-E/2,a=v[j],p=I-w[h]-v[b],m=I/2-w[h]/2+O,x=Ht(a,m,p),_=u;n.modifiersData[r]=(t={},t[_]=x,t.centerOffset=x-m,t)}}function Vp(e){var t=e.state,n=e.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||Di(t.elements.popper,o)&&(t.elements.arrow=o))}const Up={name:"arrow",enabled:!0,phase:"main",fn:$p,effect:Vp,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vt(e){return e.split("-")[1]}var qp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gp(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:gt(n*o)/o||0,y:gt(r*o)/o||0}}function Bi(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,c=e.offsets,l=e.position,u=e.gpuAcceleration,f=e.adaptive,h=e.roundOffsets,v=e.isFixed,w=c.x,j=w===void 0?0:w,b=c.y,g=b===void 0?0:b,E=typeof h=="function"?h({x:j,y:g}):{x:j,y:g};j=E.x,g=E.y;var T=c.hasOwnProperty("x"),I=c.hasOwnProperty("y"),O=xe,a=ve,p=window;if(f){var m=Bt(n),x="clientHeight",_="clientWidth";if(m===ke(n)&&(m=Ge(n),Be(m).position!=="static"&&l==="absolute"&&(x="scrollHeight",_="scrollWidth")),m=m,o===ve||(o===xe||o===je)&&i===Ft){a=Ce;var C=v&&m===p&&p.visualViewport?p.visualViewport.height:m[x];g-=C-r.height,g*=u?1:-1}if(o===xe||(o===ve||o===Ce)&&i===Ft){O=je;var k=v&&m===p&&p.visualViewport?p.visualViewport.width:m[_];j-=k-r.width,j*=u?1:-1}}var S=Object.assign({position:l},f&&qp),M=h===!0?Gp({x:j,y:g},ke(n)):{x:j,y:g};if(j=M.x,g=M.y,u){var R;return Object.assign({},S,(R={},R[a]=I?"0":"",R[O]=T?"0":"",R.transform=(p.devicePixelRatio||1)<=1?"translate("+j+"px, "+g+"px)":"translate3d("+j+"px, "+g+"px, 0)",R))}return Object.assign({},S,(t={},t[a]=I?g+"px":"",t[O]=T?j+"px":"",t.transform="",t))}function Wp(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,c=i===void 0?!0:i,l=n.roundOffsets,u=l===void 0?!0:l,f={placement:Le(t.placement),variation:vt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Bi(Object.assign({},f,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:c,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Bi(Object.assign({},f,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Xp={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wp,data:{}};var wn={passive:!0};function Yp(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=o===void 0?!0:o,c=r.resize,l=c===void 0?!0:c,u=ke(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&f.forEach(function(h){h.addEventListener("scroll",n.update,wn)}),l&&u.addEventListener("resize",n.update,wn),function(){i&&f.forEach(function(h){h.removeEventListener("scroll",n.update,wn)}),l&&u.removeEventListener("resize",n.update,wn)}}const Kp={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Yp,data:{}};var Qp={left:"right",right:"left",bottom:"top",top:"bottom"};function yn(e){return e.replace(/left|right|bottom|top/g,function(t){return Qp[t]})}var Zp={start:"end",end:"start"};function Hi(e){return e.replace(/start|end/g,function(t){return Zp[t]})}function zr(e){var t=ke(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Br(e){return bt(Ge(e)).left+zr(e).scrollLeft}function Jp(e,t){var n=ke(e),r=Ge(e),o=n.visualViewport,i=r.clientWidth,c=r.clientHeight,l=0,u=0;if(o){i=o.width,c=o.height;var f=Ai();(f||!f&&t==="fixed")&&(l=o.offsetLeft,u=o.offsetTop)}return{width:i,height:c,x:l+Br(e),y:u}}function em(e){var t,n=Ge(e),r=zr(e),o=(t=e.ownerDocument)==null?void 0:t.body,i=ot(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=ot(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-r.scrollLeft+Br(e),u=-r.scrollTop;return Be(o||n).direction==="rtl"&&(l+=ot(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:c,x:l,y:u}}function Hr(e){var t=Be(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function $i(e){return["html","body","#document"].indexOf(Oe(e))>=0?e.ownerDocument.body:Se(e)&&Hr(e)?e:$i(xn(e))}function $t(e,t){var n;t===void 0&&(t=[]);var r=$i(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=ke(r),c=o?[i].concat(i.visualViewport||[],Hr(r)?r:[]):r,l=t.concat(c);return o?l:l.concat($t(xn(c)))}function $r(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function tm(e,t){var n=bt(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Vi(e,t,n){return t===Ii?$r(Jp(e,n)):rt(t)?tm(t,n):$r(em(Ge(e)))}function nm(e){var t=$t(xn(e)),n=["absolute","fixed"].indexOf(Be(e).position)>=0,r=n&&Se(e)?Bt(e):e;return rt(r)?t.filter(function(o){return rt(o)&&Di(o,r)&&Oe(o)!=="body"}):[]}function rm(e,t,n,r){var o=t==="clippingParents"?nm(e):[].concat(t),i=[].concat(o,[n]),c=i[0],l=i.reduce(function(u,f){var h=Vi(e,f,r);return u.top=ot(h.top,u.top),u.right=vn(h.right,u.right),u.bottom=vn(h.bottom,u.bottom),u.left=ot(h.left,u.left),u},Vi(e,c,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Ui(e){var t=e.reference,n=e.element,r=e.placement,o=r?Le(r):null,i=r?vt(r):null,c=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,u;switch(o){case ve:u={x:c,y:t.y-n.height};break;case Ce:u={x:c,y:t.y+t.height};break;case je:u={x:t.x+t.width,y:l};break;case xe:u={x:t.x-n.width,y:l};break;default:u={x:t.x,y:t.y}}var f=o?Fr(o):null;if(f!=null){var h=f==="y"?"height":"width";switch(i){case ht:u[f]=u[f]-(t[h]/2-n[h]/2);break;case Ft:u[f]=u[f]+(t[h]/2-n[h]/2);break}}return u}function Vt(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=r===void 0?e.placement:r,i=n.strategy,c=i===void 0?e.strategy:i,l=n.boundary,u=l===void 0?kp:l,f=n.rootBoundary,h=f===void 0?Ii:f,v=n.elementContext,w=v===void 0?zt:v,j=n.altBoundary,b=j===void 0?!1:j,g=n.padding,E=g===void 0?0:g,T=Fi(typeof E!="number"?E:zi(E,Lt)),I=w===zt?Ep:zt,O=e.rects.popper,a=e.elements[b?I:w],p=rm(rt(a)?a:a.contextElement||Ge(e.elements.popper),u,h,c),m=bt(e.elements.reference),x=Ui({reference:m,element:O,strategy:"absolute",placement:o}),_=$r(Object.assign({},O,x)),C=w===zt?_:m,k={top:p.top-C.top+T.top,bottom:C.bottom-p.bottom+T.bottom,left:p.left-C.left+T.left,right:C.right-p.right+T.right},S=e.modifiersData.offset;if(w===zt&&S){var M=S[o];Object.keys(k).forEach(function(R){var P=[je,Ce].indexOf(R)>=0?1:-1,N=[ve,Ce].indexOf(R)>=0?"y":"x";k[R]+=M[N]*P})}return k}function om(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,c=n.padding,l=n.flipVariations,u=n.allowedAutoPlacements,f=u===void 0?Mi:u,h=vt(r),v=h?l?Ni:Ni.filter(function(b){return vt(b)===h}):Lt,w=v.filter(function(b){return f.indexOf(b)>=0});w.length===0&&(w=v);var j=w.reduce(function(b,g){return b[g]=Vt(e,{placement:g,boundary:o,rootBoundary:i,padding:c})[Le(g)],b},{});return Object.keys(j).sort(function(b,g){return j[b]-j[g]})}function am(e){if(Le(e)===Ar)return[];var t=yn(e);return[Hi(e),t,Hi(t)]}function im(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,c=n.altAxis,l=c===void 0?!0:c,u=n.fallbackPlacements,f=n.padding,h=n.boundary,v=n.rootBoundary,w=n.altBoundary,j=n.flipVariations,b=j===void 0?!0:j,g=n.allowedAutoPlacements,E=t.options.placement,T=Le(E),I=T===E,O=u||(I||!b?[yn(E)]:am(E)),a=[E].concat(O).reduce(function(G,W){return G.concat(Le(W)===Ar?om(t,{placement:W,boundary:h,rootBoundary:v,padding:f,flipVariations:b,allowedAutoPlacements:g}):W)},[]),p=t.rects.reference,m=t.rects.popper,x=new Map,_=!0,C=a[0],k=0;k<a.length;k++){var S=a[k],M=Le(S),R=vt(S)===ht,P=[ve,Ce].indexOf(M)>=0,N=P?"width":"height",y=Vt(t,{placement:S,boundary:h,rootBoundary:v,altBoundary:w,padding:f}),A=P?R?je:xe:R?Ce:ve;p[N]>m[N]&&(A=yn(A));var z=yn(A),F=[];if(i&&F.push(y[M]<=0),l&&F.push(y[A]<=0,y[z]<=0),F.every(function(G){return G})){C=S,_=!1;break}x.set(S,F)}if(_)for(var L=b?3:1,D=function(G){var W=a.find(function(ne){var J=x.get(ne);if(J)return J.slice(0,G).every(function(ee){return ee})});if(W)return C=W,"break"},B=L;B>0;B--){var q=D(B);if(q==="break")break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}}const sm={name:"flip",enabled:!0,phase:"main",fn:im,requiresIfExists:["offset"],data:{_skip:!1}};function qi(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Gi(e){return[ve,je,Ce,xe].some(function(t){return e[t]>=0})}function lm(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,c=Vt(t,{elementContext:"reference"}),l=Vt(t,{altBoundary:!0}),u=qi(c,r),f=qi(l,o,i),h=Gi(u),v=Gi(f);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:h,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":v})}const cm={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:lm};function um(e,t,n){var r=Le(e),o=[xe,ve].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,c=i[0],l=i[1];return c=c||0,l=(l||0)*o,[xe,je].indexOf(r)>=0?{x:l,y:c}:{x:c,y:l}}function dm(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=o===void 0?[0,0]:o,c=Mi.reduce(function(h,v){return h[v]=um(v,t.rects,i),h},{}),l=c[t.placement],u=l.x,f=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=f),t.modifiersData[r]=c}const pm={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dm};function mm(e){var t=e.state,n=e.name;t.modifiersData[n]=Ui({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const fm={name:"popperOffsets",enabled:!0,phase:"read",fn:mm,data:{}};function hm(e){return e==="x"?"y":"x"}function gm(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=o===void 0?!0:o,c=n.altAxis,l=c===void 0?!1:c,u=n.boundary,f=n.rootBoundary,h=n.altBoundary,v=n.padding,w=n.tether,j=w===void 0?!0:w,b=n.tetherOffset,g=b===void 0?0:b,E=Vt(t,{boundary:u,rootBoundary:f,padding:v,altBoundary:h}),T=Le(t.placement),I=vt(t.placement),O=!I,a=Fr(T),p=hm(a),m=t.modifiersData.popperOffsets,x=t.rects.reference,_=t.rects.popper,C=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,k=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(m){if(i){var R,P=a==="y"?ve:xe,N=a==="y"?Ce:je,y=a==="y"?"height":"width",A=m[a],z=A+E[P],F=A-E[N],L=j?-_[y]/2:0,D=I===ht?x[y]:_[y],B=I===ht?-_[y]:-x[y],q=t.elements.arrow,G=j&&q?Lr(q):{width:0,height:0},W=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Li(),ne=W[P],J=W[N],ee=Ht(0,x[y],G[y]),Ve=O?x[y]/2-L-ee-ne-k.mainAxis:D-ee-ne-k.mainAxis,Ue=O?-x[y]/2+L+ee+J+k.mainAxis:B+ee+J+k.mainAxis,ut=t.elements.arrow&&Bt(t.elements.arrow),Ct=ut?a==="y"?ut.clientTop||0:ut.clientLeft||0:0,jt=(R=S==null?void 0:S[a])!=null?R:0,wl=A+Ve-jt-Ct,yl=A+Ue-jt,Bo=Ht(j?vn(z,wl):z,A,j?ot(F,yl):F);m[a]=Bo,M[a]=Bo-A}if(l){var Ho,_l=a==="x"?ve:xe,kl=a==="x"?Ce:je,Ke=m[p],tn=p==="y"?"height":"width",$o=Ke+E[_l],Vo=Ke-E[kl],nr=[ve,xe].indexOf(T)!==-1,Uo=(Ho=S==null?void 0:S[p])!=null?Ho:0,qo=nr?$o:Ke-x[tn]-_[tn]-Uo+k.altAxis,Go=nr?Ke+x[tn]+_[tn]-Uo-k.altAxis:Vo,Wo=j&&nr?Bp(qo,Ke,Go):Ht(j?qo:$o,Ke,j?Go:Vo);m[p]=Wo,M[p]=Wo-Ke}t.modifiersData[r]=M}}const bm={name:"preventOverflow",enabled:!0,phase:"main",fn:gm,requiresIfExists:["offset"]};function vm(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function xm(e){return e===ke(e)||!Se(e)?zr(e):vm(e)}function wm(e){var t=e.getBoundingClientRect(),n=gt(t.width)/e.offsetWidth||1,r=gt(t.height)/e.offsetHeight||1;return n!==1||r!==1}function ym(e,t,n){n===void 0&&(n=!1);var r=Se(t),o=Se(t)&&wm(t),i=Ge(t),c=bt(e,o,n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((Oe(t)!=="body"||Hr(i))&&(l=xm(t)),Se(t)?(u=bt(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):i&&(u.x=Br(i))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function _m(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function o(i){n.add(i.name);var c=[].concat(i.requires||[],i.requiresIfExists||[]);c.forEach(function(l){if(!n.has(l)){var u=t.get(l);u&&o(u)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||o(i)}),r}function km(e){var t=_m(e);return Ap.reduce(function(n,r){return n.concat(t.filter(function(o){return o.phase===r}))},[])}function Em(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Cm(e){var t=e.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Wi={placement:"bottom",modifiers:[],strategy:"absolute"};function Xi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function jm(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,o=t.defaultOptions,i=o===void 0?Wi:o;return function(c,l,u){u===void 0&&(u=i);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wi,i),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},h=[],v=!1,w={state:f,setOptions:function(g){var E=typeof g=="function"?g(f.options):g;b(),f.options=Object.assign({},i,f.options,E),f.scrollParents={reference:rt(c)?$t(c):c.contextElement?$t(c.contextElement):[],popper:$t(l)};var T=km(Cm([].concat(r,f.options.modifiers)));return f.orderedModifiers=T.filter(function(I){return I.enabled}),j(),w.update()},forceUpdate:function(){if(!v){var g=f.elements,E=g.reference,T=g.popper;if(Xi(E,T)){f.rects={reference:ym(E,Bt(T),f.options.strategy==="fixed"),popper:Lr(T)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(_){return f.modifiersData[_.name]=Object.assign({},_.data)});for(var I=0;I<f.orderedModifiers.length;I++){if(f.reset===!0){f.reset=!1,I=-1;continue}var O=f.orderedModifiers[I],a=O.fn,p=O.options,m=p===void 0?{}:p,x=O.name;typeof a=="function"&&(f=a({state:f,options:m,name:x,instance:w})||f)}}}},update:Em(function(){return new Promise(function(g){w.forceUpdate(),g(f)})}),destroy:function(){b(),v=!0}};if(!Xi(c,l))return w;w.setOptions(u).then(function(g){!v&&u.onFirstUpdate&&u.onFirstUpdate(g)});function j(){f.orderedModifiers.forEach(function(g){var E=g.name,T=g.options,I=T===void 0?{}:T,O=g.effect;if(typeof O=="function"){var a=O({state:f,name:E,instance:w,options:I}),p=function(){};h.push(a||p)}})}function b(){h.forEach(function(g){return g()}),h=[]}return w}}var Sm=[Kp,fm,Xp,Lp,pm,sm,bm,Up,cm],Pm=jm({defaultModifiers:Sm}),Tm=typeof Element<"u",Rm=typeof Map=="function",Im=typeof Set=="function",Nm=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function _n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!_n(e[r],t[r]))return!1;return!0}var i;if(Rm&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;for(i=e.entries();!(r=i.next()).done;)if(!_n(r.value[1],t.get(r.value[0])))return!1;return!0}if(Im&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(Nm&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;if(Tm&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&e.$$typeof)&&!_n(e[o[r]],t[o[r]]))return!1;return!0}return e!==e&&t!==t}var Mm=function(e,t){try{return _n(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Am=gr(Mm);var Dm=[],Yi=function(e,t,n){n===void 0&&(n={});var r=s.useRef(null),o={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Dm},i=s.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),c=i[0],l=i[1],u=s.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(v){var w=v.state,j=Object.keys(w.elements);rr.flushSync(function(){l({styles:Ti(j.map(function(b){return[b,w.styles[b]||{}]})),attributes:Ti(j.map(function(b){return[b,w.attributes[b]]}))})})},requires:["computeStyles"]}},[]),f=s.useMemo(function(){var v={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[u,{name:"applyStyles",enabled:!1}])};return Am(r.current,v)?r.current||v:(r.current=v,v)},[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,u]),h=s.useRef();return Ri(function(){h.current&&h.current.setOptions(f)},[f]),Ri(function(){if(!(e==null||t==null)){var v=n.createPopper||Pm,w=v(e,t,f);return h.current=w,function(){w.destroy(),h.current=null}}},[e,t,n.createPopper]),{state:h.current?h.current.state:null,styles:c.styles,attributes:c.attributes,update:h.current?h.current.update:null,forceUpdate:h.current?h.current.forceUpdate:null}};function Pe(){let e=[],t=[],n={enqueue(r){t.push(r)},requestAnimationFrame(...r){let o=requestAnimationFrame(...r);n.add(()=>cancelAnimationFrame(o))},nextFrame(...r){n.requestAnimationFrame(()=>{n.requestAnimationFrame(...r)})},setTimeout(...r){let o=setTimeout(...r);n.add(()=>clearTimeout(o))},add(r){e.push(r)},dispose(){for(let r of e.splice(0))r()},async workQueue(){for(let r of t.splice(0))await r()}};return n}function at(){let[e]=s.useState(Pe);return s.useEffect(()=>()=>e.dispose(),[e]),e}var U=typeof window<"u"?s.useLayoutEffect:s.useEffect,Vr={serverHandoffComplete:!1};function kn(){let[e,t]=s.useState(Vr.serverHandoffComplete);return s.useEffect(()=>{e!==!0&&t(!0)},[e]),s.useEffect(()=>{Vr.serverHandoffComplete===!1&&(Vr.serverHandoffComplete=!0)},[]),e}var Om=0;function Ki(){return++Om}function oe(){let e=kn(),[t,n]=s.useState(e?Ki:null);return U(()=>{t===null&&n(Ki())},[t]),t!=null?""+t:void 0}function Qi(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e},[e]),t}function Ut(e,t){let[n,r]=s.useState(e),o=Qi(e);return U(()=>r(o.current),[o,r,...t]),n}function fe(...e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e},[e]),s.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[t])}function Z(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Z),r}function K({props:e,slot:t,defaultTag:n,features:r,visible:o=!0,name:i}){if(o)return En(e,t,n,i);let c=r??0;if(c&2){let{static:l=!1,...u}=e;if(l)return En(u,t,n,i)}if(c&1){let{unmount:l=!0,...u}=e;return Z(l?0:1,{0(){return null},1(){return En({...u,hidden:!0,style:{display:"none"}},t,n,i)}})}return En(e,t,n,i)}function En(e,t={},n,r){let{as:o=n,children:i,refName:c="ref",...l}=Ur(e,["unmount","static"]),u=e.ref!==void 0?{[c]:e.ref}:{},f=typeof i=="function"?i(t):i;if(l.className&&typeof l.className=="function"&&(l.className=l.className(t)),o===s.Fragment&&Object.keys(l).length>0){if(!s.isValidElement(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`));return s.cloneElement(f,Object.assign({},Lm(Fm(Ur(l,["ref"])),f.props,["onClick"]),u))}return s.createElement(o,Object.assign({},Ur(l,["ref"]),o!==s.Fragment&&u),f)}function Lm(e,t,n){let r=Object.assign({},e);for(let o of n)e[o]!==void 0&&t[o]!==void 0&&Object.assign(r,{[o](i){i.defaultPrevented||e[o](i),i.defaultPrevented||t[o](i)}});return r}function he(e){var t;return Object.assign(s.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Fm(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Ur(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function zm(e){throw new Error("Unexpected object: "+e)}function qr(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),o=r??-1,i=(()=>{switch(e.focus){case 0:return n.findIndex(c=>!t.resolveDisabled(c));case 1:{let c=n.slice().reverse().findIndex((l,u,f)=>o!==-1&&f.length-u-1>=o?!1:!t.resolveDisabled(l));return c===-1?c:n.length-1-c}case 2:return n.findIndex((c,l)=>l<=o?!1:!t.resolveDisabled(c));case 3:{let c=n.slice().reverse().findIndex(l=>!t.resolveDisabled(l));return c===-1?c:n.length-1-c}case 4:return n.findIndex(c=>t.resolveId(c)===e.id);case 5:return null;default:zm(e)}})();return i===-1?r:i}function it(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&Bm(n)?!1:r}function Bm(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function Te(e,t,n){let r=s.useRef(t);r.current=t,s.useEffect(()=>{function o(i){r.current.call(window,i)}return window.addEventListener(e,o,n),()=>window.removeEventListener(e,o,n)},[e,n])}var Gr=s.createContext(null);Gr.displayName="OpenClosedContext";function He(){return s.useContext(Gr)}function xt({value:e,children:t}){return H.createElement(Gr.Provider,{value:e},t)}function Zi(e){var t;if(e.type)return e.type;let n=(t=e.as)!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function qt(e,t){let[n,r]=s.useState(()=>Zi(e));return U(()=>{r(Zi(e))},[e.type,e.as]),U(()=>{n||!t.current||t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&r("button")},[n,t]),n}function Ji({container:e,accept:t,walk:n,enabled:r=!0}){let o=s.useRef(t),i=s.useRef(n);s.useEffect(()=>{o.current=t,i.current=n},[t,n]),U(()=>{if(!e||!r)return;let c=o.current,l=i.current,u=Object.assign(h=>c(h),{acceptNode:c}),f=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;f.nextNode();)l(f.currentNode)},[e,r,o,i])}var Hm={1(e){return e.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1}},0(e){return e.disabled||e.comboboxState===0?e:{...e,comboboxState:0}},2(e,t){return e.disabled===t.disabled?e:{...e,disabled:t.disabled}},3(e,t){if(e.disabled||e.optionsRef.current&&!e.optionsPropsRef.current.static&&e.comboboxState===1)return e;let n=qr(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled});return e.activeOptionIndex===n?e:{...e,activeOptionIndex:n}},4:(e,t)=>{var n;let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,o=Array.from((n=e.optionsRef.current)==null?void 0:n.querySelectorAll('[id^="headlessui-combobox-option-"]')).reduce((c,l,u)=>Object.assign(c,{[l.id]:u}),{}),i=[...e.options,{id:t.id,dataRef:t.dataRef}].sort((c,l)=>o[c.id]-o[l.id]);return{...e,options:i,activeOptionIndex:(()=>r===null?null:i.indexOf(r))()}},5:(e,t)=>{let n=e.options.slice(),r=e.activeOptionIndex!==null?n[e.activeOptionIndex]:null,o=n.findIndex(i=>i.id===t.id);return o!==-1&&n.splice(o,1),{...e,options:n,activeOptionIndex:(()=>o===e.activeOptionIndex||r===null?null:n.indexOf(r))()}}},Wr=s.createContext(null);Wr.displayName="ComboboxContext";function wt(e){let t=s.useContext(Wr);if(t===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,wt),n}return t}var Xr=s.createContext(null);Xr.displayName="ComboboxActions";function Cn(){let e=s.useContext(Xr);if(e===null){let t=new Error("ComboboxActions is missing a parent <Combobox /> component.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Cn),t}return e}function $m(e,t){return Z(t.type,Hm,e,t)}var Vm=s.Fragment,Um=he(function(e,t){let{value:n,onChange:r,disabled:o=!1,...i}=e,c=s.useRef({value:n,onChange:r}),l=s.useRef({static:!1,hold:!1}),u=s.useRef({displayValue:void 0}),f=s.useReducer($m,{comboboxState:1,comboboxPropsRef:c,optionsPropsRef:l,inputPropsRef:u,labelRef:s.createRef(),inputRef:s.createRef(),buttonRef:s.createRef(),optionsRef:s.createRef(),disabled:o,options:[],activeOptionIndex:null}),[{comboboxState:h,options:v,activeOptionIndex:w,optionsRef:j,inputRef:b,buttonRef:g},E]=f;U(()=>{c.current.value=n},[n,c]),U(()=>{c.current.onChange=r},[r,c]),U(()=>E({type:2,disabled:o}),[o]),Te("mousedown",x=>{var _,C,k;let S=x.target;h===0&&((_=g.current)!=null&&_.contains(S)||(C=b.current)!=null&&C.contains(S)||(k=j.current)!=null&&k.contains(S)||E({type:1}))});let T=w===null?null:v[w].dataRef.current.value,I=s.useMemo(()=>({open:h===0,disabled:o,activeIndex:w,activeOption:T}),[h,o,v,w]),O=s.useCallback(()=>{if(!b.current||n===void 0)return;let x=u.current.displayValue;typeof x=="function"?b.current.value=x(n):typeof n=="string"&&(b.current.value=n)},[n,b,u]),a=s.useCallback(x=>{let _=v.find(k=>k.id===x);if(!_)return;let{dataRef:C}=_;c.current.onChange(C.current.value),O()},[v,c,b]),p=s.useCallback(()=>{if(w!==null){let{dataRef:x}=v[w];c.current.onChange(x.current.value),O()}},[w,v,c,b]),m=s.useMemo(()=>({selectOption:a,selectActiveOption:p}),[a,p]);return U(()=>{h===1&&O()},[O,h]),U(O,[O]),H.createElement(Xr.Provider,{value:m},H.createElement(Wr.Provider,{value:f},H.createElement(xt,{value:Z(h,{0:0,1:1})},K({props:t===null?i:{...i,ref:t},slot:I,defaultTag:Vm,name:"Combobox"}))))}),qm="input",Gm=he(function(e,t){var n,r;let{value:o,onChange:i,displayValue:c,...l}=e,[u,f]=wt("Combobox.Input"),h=Cn(),v=fe(u.inputRef,t),w=u.inputPropsRef,j=`headlessui-combobox-input-${oe()}`,b=at(),g=Qi(i);U(()=>{w.current.displayValue=c},[c,w]);let E=s.useCallback(p=>{switch(p.key){case"Enter":p.preventDefault(),p.stopPropagation(),h.selectActiveOption(),f({type:1});break;case"ArrowDown":return p.preventDefault(),p.stopPropagation(),Z(u.comboboxState,{0:()=>f({type:3,focus:2}),1:()=>{f({type:0}),b.nextFrame(()=>{u.comboboxPropsRef.current.value||f({type:3,focus:0})})}});case"ArrowUp":return p.preventDefault(),p.stopPropagation(),Z(u.comboboxState,{0:()=>f({type:3,focus:1}),1:()=>{f({type:0}),b.nextFrame(()=>{u.comboboxPropsRef.current.value||f({type:3,focus:3})})}});case"Home":case"PageUp":return p.preventDefault(),p.stopPropagation(),f({type:3,focus:0});case"End":case"PageDown":return p.preventDefault(),p.stopPropagation(),f({type:3,focus:3});case"Escape":return p.preventDefault(),u.optionsRef.current&&!u.optionsPropsRef.current.static&&p.stopPropagation(),f({type:1});case"Tab":h.selectActiveOption(),f({type:1});break}},[b,f,u,h]),T=s.useCallback(p=>{var m;f({type:0}),(m=g.current)==null||m.call(g,p)},[f,g]),I=Ut(()=>{if(u.labelRef.current)return[u.labelRef.current.id].join(" ")},[u.labelRef.current]),O=s.useMemo(()=>({open:u.comboboxState===0,disabled:u.disabled}),[u]),a={ref:v,id:j,role:"combobox",type:"text","aria-controls":(n=u.optionsRef.current)==null?void 0:n.id,"aria-expanded":u.disabled?void 0:u.comboboxState===0,"aria-activedescendant":u.activeOptionIndex===null||(r=u.options[u.activeOptionIndex])==null?void 0:r.id,"aria-labelledby":I,disabled:u.disabled,onKeyDown:E,onChange:T};return K({props:{...l,...a},slot:O,defaultTag:qm,name:"Combobox.Input"})}),Wm="button",Xm=he(function(e,t){var n;let[r,o]=wt("Combobox.Button"),i=Cn(),c=fe(r.buttonRef,t),l=`headlessui-combobox-button-${oe()}`,u=at(),f=s.useCallback(g=>{switch(g.key){case"ArrowDown":return g.preventDefault(),g.stopPropagation(),r.comboboxState===1&&(o({type:0}),u.nextFrame(()=>{r.comboboxPropsRef.current.value||o({type:3,focus:0})})),u.nextFrame(()=>{var E;return(E=r.inputRef.current)==null?void 0:E.focus({preventScroll:!0})});case"ArrowUp":return g.preventDefault(),g.stopPropagation(),r.comboboxState===1&&(o({type:0}),u.nextFrame(()=>{r.comboboxPropsRef.current.value||o({type:3,focus:3})})),u.nextFrame(()=>{var E;return(E=r.inputRef.current)==null?void 0:E.focus({preventScroll:!0})});case"Escape":return g.preventDefault(),r.optionsRef.current&&!r.optionsPropsRef.current.static&&g.stopPropagation(),o({type:1}),u.nextFrame(()=>{var E;return(E=r.inputRef.current)==null?void 0:E.focus({preventScroll:!0})})}},[u,o,r,i]),h=s.useCallback(g=>{if(it(g.currentTarget))return g.preventDefault();r.comboboxState===0?o({type:1}):(g.preventDefault(),o({type:0})),u.nextFrame(()=>{var E;return(E=r.inputRef.current)==null?void 0:E.focus({preventScroll:!0})})},[o,u,r]),v=Ut(()=>{if(r.labelRef.current)return[r.labelRef.current.id,l].join(" ")},[r.labelRef.current,l]),w=s.useMemo(()=>({open:r.comboboxState===0,disabled:r.disabled}),[r]),j=e,b={ref:c,id:l,type:qt(e,r.buttonRef),tabIndex:-1,"aria-haspopup":!0,"aria-controls":(n=r.optionsRef.current)==null?void 0:n.id,"aria-expanded":r.disabled?void 0:r.comboboxState===0,"aria-labelledby":v,disabled:r.disabled,onClick:h,onKeyDown:f};return K({props:{...j,...b},slot:w,defaultTag:Wm,name:"Combobox.Button"})}),Ym="label";function Km(e){let[t]=wt("Combobox.Label"),n=`headlessui-combobox-label-${oe()}`,r=s.useCallback(()=>{var c;return(c=t.inputRef.current)==null?void 0:c.focus({preventScroll:!0})},[t.inputRef]),o=s.useMemo(()=>({open:t.comboboxState===0,disabled:t.disabled}),[t]),i={ref:t.labelRef,id:n,onClick:r};return K({props:{...e,...i},slot:o,defaultTag:Ym,name:"Combobox.Label"})}var Qm="ul",Zm=3,Jm=he(function(e,t){var n;let{hold:r=!1,...o}=e,[i]=wt("Combobox.Options"),{optionsPropsRef:c}=i,l=fe(i.optionsRef,t),u=`headlessui-combobox-options-${oe()}`,f=He(),h=(()=>f!==null?f===0:i.comboboxState===0)();U(()=>{var b;c.current.static=(b=e.static)!=null?b:!1},[c,e.static]),U(()=>{c.current.hold=r},[r,c]),Ji({container:i.optionsRef.current,enabled:i.comboboxState===0,accept(b){return b.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:b.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(b){b.setAttribute("role","none")}});let v=Ut(()=>{var b,g,E;return(E=(b=i.labelRef.current)==null?void 0:b.id)!=null?E:(g=i.buttonRef.current)==null?void 0:g.id},[i.labelRef.current,i.buttonRef.current]),w=s.useMemo(()=>({open:i.comboboxState===0}),[i]),j={"aria-activedescendant":i.activeOptionIndex===null||(n=i.options[i.activeOptionIndex])==null?void 0:n.id,"aria-labelledby":v,role:"listbox",id:u,ref:l};return K({props:{...o,...j},slot:w,defaultTag:Qm,features:Zm,visible:h,name:"Combobox.Options"})}),ef="li";function tf(e){let{disabled:t=!1,value:n,...r}=e,[o,i]=wt("Combobox.Option"),c=Cn(),l=`headlessui-combobox-option-${oe()}`,u=o.activeOptionIndex!==null?o.options[o.activeOptionIndex].id===l:!1,f=o.comboboxPropsRef.current.value===n,h=s.useRef({disabled:t,value:n});U(()=>{h.current.disabled=t},[h,t]),U(()=>{h.current.value=n},[h,n]),U(()=>{var T,I;h.current.textValue=(I=(T=document.getElementById(l))==null?void 0:T.textContent)==null?void 0:I.toLowerCase()},[h,l]);let v=s.useCallback(()=>c.selectOption(l),[c,l]);U(()=>(i({type:4,id:l,dataRef:h}),()=>i({type:5,id:l})),[h,l]),U(()=>{o.comboboxState===0&&(!f||i({type:3,focus:4,id:l}))},[o.comboboxState,f,l]),U(()=>{if(o.comboboxState!==0||!u)return;let T=Pe();return T.requestAnimationFrame(()=>{var I,O;(O=(I=document.getElementById(l))==null?void 0:I.scrollIntoView)==null||O.call(I,{block:"nearest"})}),T.dispose},[l,u,o.comboboxState,o.activeOptionIndex]);let w=s.useCallback(T=>{if(t)return T.preventDefault();v(),i({type:1}),Pe().nextFrame(()=>{var I;return(I=o.inputRef.current)==null?void 0:I.focus({preventScroll:!0})})},[i,o.inputRef,t,v]),j=s.useCallback(()=>{if(t)return i({type:3,focus:5});i({type:3,focus:4,id:l})},[t,l,i]),b=s.useCallback(()=>{t||u||i({type:3,focus:4,id:l})},[t,u,l,i]),g=s.useCallback(()=>{t||!u||o.optionsPropsRef.current.hold||i({type:3,focus:5})},[t,u,i,o.comboboxState,o.comboboxPropsRef]),E=s.useMemo(()=>({active:u,selected:f,disabled:t}),[u,f,t]);return K({props:{...r,id:l,role:"option",tabIndex:t===!0?void 0:-1,"aria-disabled":t===!0?!0:void 0,"aria-selected":f===!0?!0:void 0,disabled:void 0,onClick:w,onFocus:j,onPointerMove:b,onMouseMove:b,onPointerLeave:g,onMouseLeave:g},slot:E,defaultTag:ef,name:"Combobox.Option"})}Object.assign(Um,{Input:Gm,Button:Xm,Label:Km,Options:Jm,Option:tf});var Yr=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");function jn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Yr))}function Kr(e,t=0){return e===document.body?!1:Z(t,{0(){return e.matches(Yr)},1(){let n=e;for(;n!==null;){if(n.matches(Yr))return!0;n=n.parentElement}return!1}})}function Gt(e){e==null||e.focus({preventScroll:!0})}function $e(e,t){let n=Array.isArray(e)?e.slice().sort((h,v)=>{let w=h.compareDocumentPosition(v);return w&Node.DOCUMENT_POSITION_FOLLOWING?-1:w&Node.DOCUMENT_POSITION_PRECEDING?1:0}):jn(e),r=document.activeElement,o=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,n.indexOf(r))-1;if(t&4)return Math.max(0,n.indexOf(r))+1;if(t&8)return n.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=t&32?{preventScroll:!0}:{},l=0,u=n.length,f;do{if(l>=u||l+u<=0)return 0;let h=i+l;if(t&16)h=(h+u)%u;else{if(h<0)return 3;if(h>=u)return 1}f=n[h],f==null||f.focus(c),l+=o}while(f!==document.activeElement);return f.hasAttribute("tabindex")||f.setAttribute("tabindex","0"),2}function es(){let e=s.useRef(!1);return s.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function nf(e,t=30,{initialFocus:n,containers:r}={}){let o=s.useRef(typeof window<"u"?document.activeElement:null),i=s.useRef(null),c=es(),l=!!(t&16),u=!!(t&2);s.useEffect(()=>{!l||(o.current=document.activeElement)},[l]),s.useEffect(()=>{if(l)return()=>{Gt(o.current),o.current=null}},[l]),s.useEffect(()=>{if(!u||!e.current)return;let f=document.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===f){i.current=f;return}}else if(e.current.contains(f)){i.current=f;return}n!=null&&n.current?Gt(n.current):$e(e.current,1)===0&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.current=document.activeElement},[e,n,u]),Te("keydown",f=>{!(t&4)||!e.current||f.key==="Tab"&&(f.preventDefault(),$e(e.current,(f.shiftKey?2:4)|16)===2&&(i.current=document.activeElement))}),Te("focus",f=>{if(!(t&8))return;let h=new Set(r==null?void 0:r.current);if(h.add(e),!h.size)return;let v=i.current;if(!v||!c.current)return;let w=f.target;w&&w instanceof HTMLElement?rf(h,w)?(i.current=w,Gt(w)):(f.preventDefault(),f.stopPropagation(),Gt(v)):Gt(i.current)},!0)}function rf(e,t){var n;for(let r of e)if((n=r.current)!=null&&n.contains(t))return!0;return!1}var yt=new Set,We=new Map;function ts(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function ns(e){let t=We.get(e);!t||(t["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}function of(e,t=!0){U(()=>{if(!t||!e.current)return;let n=e.current;yt.add(n);for(let r of We.keys())r.contains(n)&&(ns(r),We.delete(r));return document.querySelectorAll("body > *").forEach(r=>{if(r instanceof HTMLElement){for(let o of yt)if(r.contains(o))return;yt.size===1&&(We.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),ts(r))}}),()=>{if(yt.delete(n),yt.size>0)document.querySelectorAll("body > *").forEach(r=>{if(r instanceof HTMLElement&&!We.has(r)){for(let o of yt)if(r.contains(o))return;We.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),ts(r)}});else for(let r of We.keys())ns(r),We.delete(r)}},[t])}var rs=s.createContext(!1);function af(){return s.useContext(rs)}function os(e){return H.createElement(rs.Provider,{value:e.force},e.children)}function sf(){let e=af(),t=s.useContext(as),[n,r]=s.useState(()=>{if(!e&&t!==null||typeof window>"u")return null;let o=document.getElementById("headlessui-portal-root");if(o)return o;let i=document.createElement("div");return i.setAttribute("id","headlessui-portal-root"),document.body.appendChild(i)});return s.useEffect(()=>{n!==null&&(document.body.contains(n)||document.body.appendChild(n))},[n]),s.useEffect(()=>{e||t!==null&&r(t.current)},[t,r,e]),n}var lf=s.Fragment;function Qr(e){let t=e,n=sf(),[r]=s.useState(()=>typeof window>"u"?null:document.createElement("div")),o=kn();return U(()=>{if(n&&r)return n.appendChild(r),()=>{var i;!n||!r||(n.removeChild(r),n.childNodes.length<=0&&((i=n.parentElement)==null||i.removeChild(n)))}},[n,r]),o?!n||!r?null:rr.createPortal(K({props:t,defaultTag:lf,name:"Portal"}),r):null}var cf=s.Fragment,as=s.createContext(null);function uf(e){let{target:t,...n}=e;return H.createElement(as.Provider,{value:t},K({props:n,defaultTag:cf,name:"Popover.Group"}))}Qr.Group=uf;var is=s.createContext(null);function ss(){let e=s.useContext(is);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ss),t}return e}function df(){let[e,t]=s.useState([]);return[e.length>0?e.join(" "):void 0,s.useMemo(()=>function(n){let r=s.useCallback(i=>(t(c=>[...c,i]),()=>t(c=>{let l=c.slice(),u=l.indexOf(i);return u!==-1&&l.splice(u,1),l})),[]),o=s.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return H.createElement(is.Provider,{value:o},n.children)},[t])]}var pf="p";function mf(e){let t=ss(),n=`headlessui-description-${oe()}`;U(()=>t.register(n),[n,t.register]);let r=e,o={...t.props,id:n};return K({props:{...r,...o},slot:t.slot||{},defaultTag:pf,name:t.name||"Description"})}var Zr=s.createContext(()=>{});Zr.displayName="StackContext";function ff(){return s.useContext(Zr)}function hf({children:e,onUpdate:t,type:n,element:r}){let o=ff(),i=s.useCallback((...c)=>{t==null||t(...c),o(...c)},[o,t]);return U(()=>(i(0,n,r),()=>i(1,n,r)),[i,n,r]),H.createElement(Zr.Provider,{value:i},e)}var gf={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Sn=s.createContext(null);Sn.displayName="DialogContext";function Jr(e){let t=s.useContext(Sn);if(t===null){let n=new Error(`<${e} /> is missing a parent <${Cf.displayName} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Jr),n}return t}function bf(e,t){return Z(t.type,gf,e,t)}var vf="div",xf=3,wf=he(function(e,t){let{open:n,onClose:r,initialFocus:o,...i}=e,[c,l]=s.useState(0),u=He();n===void 0&&u!==null&&(n=Z(u,{0:!0,1:!1}));let f=s.useRef(new Set),h=s.useRef(null),v=fe(h,t),w=e.hasOwnProperty("open")||u!==null,j=e.hasOwnProperty("onClose");if(!w&&!j)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!w)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!j)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof n!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${n}`);if(typeof r!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${r}`);let b=n?0:1,g=(()=>u!==null?u===0:b===0)(),[E,T]=s.useReducer(bf,{titleId:null,descriptionId:null}),I=s.useCallback(()=>r(!1),[r]),O=s.useCallback(P=>T({type:0,id:P}),[T]),a=kn()&&b===0,p=c>1,m=s.useContext(Sn)!==null;nf(h,a?Z(p?"parent":"leaf",{parent:16,leaf:30}):1,{initialFocus:o,containers:f}),of(h,p?a:!1),Te("mousedown",P=>{var N;let y=P.target;b===0&&(p||(N=h.current)!=null&&N.contains(y)||I())}),Te("keydown",P=>{P.key==="Escape"&&b===0&&(p||(P.preventDefault(),P.stopPropagation(),I()))}),s.useEffect(()=>{if(b!==0||m)return;let P=document.documentElement.style.overflow,N=document.documentElement.style.paddingRight,y=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${y}px`,()=>{document.documentElement.style.overflow=P,document.documentElement.style.paddingRight=N}},[b,m]),s.useEffect(()=>{if(b!==0||!h.current)return;let P=new IntersectionObserver(N=>{for(let y of N)y.boundingClientRect.x===0&&y.boundingClientRect.y===0&&y.boundingClientRect.width===0&&y.boundingClientRect.height===0&&I()});return P.observe(h.current),()=>P.disconnect()},[b,h,I]);let[x,_]=df(),C=`headlessui-dialog-${oe()}`,k=s.useMemo(()=>[{dialogState:b,close:I,setTitleId:O},E],[b,E,I,O]),S=s.useMemo(()=>({open:b===0}),[b]),M={ref:v,id:C,role:"dialog","aria-modal":b===0?!0:void 0,"aria-labelledby":E.titleId,"aria-describedby":x,onClick(P){P.stopPropagation()}},R=i;return H.createElement(hf,{type:"Dialog",element:h,onUpdate:s.useCallback((P,N,y)=>{N==="Dialog"&&Z(P,{0(){f.current.add(y),l(A=>A+1)},1(){f.current.add(y),l(A=>A-1)}})},[])},H.createElement(os,{force:!0},H.createElement(Qr,null,H.createElement(Sn.Provider,{value:k},H.createElement(Qr.Group,{target:h},H.createElement(os,{force:!1},H.createElement(_,{slot:S,name:"Dialog.Description"},K({props:{...R,...M},slot:S,defaultTag:vf,features:xf,visible:g,name:"Dialog"}))))))))}),yf="div",_f=he(function(e,t){let[{dialogState:n,close:r}]=Jr("Dialog.Overlay"),o=fe(t),i=`headlessui-dialog-overlay-${oe()}`,c=s.useCallback(u=>{if(u.target===u.currentTarget){if(it(u.currentTarget))return u.preventDefault();u.preventDefault(),u.stopPropagation(),r()}},[r]),l=s.useMemo(()=>({open:n===0}),[n]);return K({props:{...e,ref:o,id:i,"aria-hidden":!0,onClick:c},slot:l,defaultTag:yf,name:"Dialog.Overlay"})}),kf="h2";function Ef(e){let[{dialogState:t,setTitleId:n}]=Jr("Dialog.Title"),r=`headlessui-dialog-title-${oe()}`;s.useEffect(()=>(n(r),()=>n(null)),[r,n]);let o=s.useMemo(()=>({open:t===0}),[t]);return K({props:{...e,id:r},slot:o,defaultTag:kf,name:"Dialog.Title"})}var Cf=Object.assign(wf,{Overlay:_f,Title:Ef,Description:mf}),jf={0:e=>({...e,disclosureState:Z(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},eo=s.createContext(null);eo.displayName="DisclosureContext";function to(e){let t=s.useContext(eo);if(t===null){let n=new Error(`<${e} /> is missing a parent <${Pn.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,to),n}return t}var no=s.createContext(null);no.displayName="DisclosureAPIContext";function ls(e){let t=s.useContext(no);if(t===null){let n=new Error(`<${e} /> is missing a parent <${Pn.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ls),n}return t}var ro=s.createContext(null);ro.displayName="DisclosurePanelContext";function Sf(){return s.useContext(ro)}function Pf(e,t){return Z(t.type,jf,e,t)}var Tf=s.Fragment;function Pn(e){let{defaultOpen:t=!1,...n}=e,r=`headlessui-disclosure-button-${oe()}`,o=`headlessui-disclosure-panel-${oe()}`,i=s.useReducer(Pf,{disclosureState:t?0:1,linkedPanel:!1,buttonId:r,panelId:o}),[{disclosureState:c},l]=i;s.useEffect(()=>l({type:2,buttonId:r}),[r,l]),s.useEffect(()=>l({type:3,panelId:o}),[o,l]);let u=s.useCallback(v=>{l({type:1});let w=(()=>v?v instanceof HTMLElement?v:v.current instanceof HTMLElement?v.current:document.getElementById(r):document.getElementById(r))();w==null||w.focus()},[l,r]),f=s.useMemo(()=>({close:u}),[u]),h=s.useMemo(()=>({open:c===0,close:u}),[c,u]);return H.createElement(eo.Provider,{value:i},H.createElement(no.Provider,{value:f},H.createElement(xt,{value:Z(c,{0:0,1:1})},K({props:n,slot:h,defaultTag:Tf,name:"Disclosure"}))))}var Rf="button",If=he(function(e,t){let[n,r]=to("Disclosure.Button"),o=s.useRef(null),i=fe(o,t),c=Sf(),l=c===null?!1:c===n.panelId,u=s.useCallback(g=>{var E;if(l){if(n.disclosureState===1)return;switch(g.key){case" ":case"Enter":g.preventDefault(),g.stopPropagation(),r({type:0}),(E=document.getElementById(n.buttonId))==null||E.focus();break}}else switch(g.key){case" ":case"Enter":g.preventDefault(),g.stopPropagation(),r({type:0});break}},[r,l,n.disclosureState,n.buttonId]),f=s.useCallback(g=>{switch(g.key){case" ":g.preventDefault();break}},[]),h=s.useCallback(g=>{var E;it(g.currentTarget)||e.disabled||(l?(r({type:0}),(E=document.getElementById(n.buttonId))==null||E.focus()):r({type:0}))},[r,e.disabled,n.buttonId,l]),v=s.useMemo(()=>({open:n.disclosureState===0}),[n]),w=qt(e,o),j=e,b=l?{ref:i,type:w,onKeyDown:u,onClick:h}:{ref:i,id:n.buttonId,type:w,"aria-expanded":e.disabled?void 0:n.disclosureState===0,"aria-controls":n.linkedPanel?n.panelId:void 0,onKeyDown:u,onKeyUp:f,onClick:h};return K({props:{...j,...b},slot:v,defaultTag:Rf,name:"Disclosure.Button"})}),Nf="div",Mf=3,Af=he(function(e,t){let[n,r]=to("Disclosure.Panel"),{close:o}=ls("Disclosure.Panel"),i=fe(t,()=>{n.linkedPanel||r({type:4})}),c=He(),l=(()=>c!==null?c===0:n.disclosureState===0)();s.useEffect(()=>()=>r({type:5}),[r]),s.useEffect(()=>{var v;n.disclosureState===1&&((v=e.unmount)==null||v)&&r({type:5})},[n.disclosureState,e.unmount,r]);let u=s.useMemo(()=>({open:n.disclosureState===0,close:o}),[n,o]),f={ref:i,id:n.panelId},h=e;return H.createElement(ro.Provider,{value:n.panelId},K({props:{...h,...f},slot:u,defaultTag:Nf,features:Mf,visible:l,name:"Disclosure.Panel"}))});Pn.Button=If,Pn.Panel=Af;var Df={1(e){return e.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){return e.disabled||e.listboxState===0?e:{...e,listboxState:0}},2(e,t){return e.disabled===t.disabled?e:{...e,disabled:t.disabled}},3(e,t){return e.orientation===t.orientation?e:{...e,orientation:t.orientation}},4(e,t){if(e.disabled||e.listboxState===1)return e;let n=qr(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled});return e.searchQuery===""&&e.activeOptionIndex===n?e:{...e,searchQuery:"",activeOptionIndex:n}},5:(e,t)=>{if(e.disabled||e.listboxState===1)return e;let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),o=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find(c=>{var l;return!c.dataRef.current.disabled&&((l=c.dataRef.current.textValue)==null?void 0:l.startsWith(r))}),i=o?e.options.indexOf(o):-1;return i===-1||i===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:i}},6(e){return e.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},7:(e,t)=>{var n;let r=Array.from((n=e.optionsRef.current)==null?void 0:n.querySelectorAll('[id^="headlessui-listbox-option-"]')).reduce((i,c,l)=>Object.assign(i,{[c.id]:l}),{}),o=[...e.options,{id:t.id,dataRef:t.dataRef}].sort((i,c)=>r[i.id]-r[c.id]);return{...e,options:o}},8:(e,t)=>{let n=e.options.slice(),r=e.activeOptionIndex!==null?n[e.activeOptionIndex]:null,o=n.findIndex(i=>i.id===t.id);return o!==-1&&n.splice(o,1),{...e,options:n,activeOptionIndex:(()=>o===e.activeOptionIndex||r===null?null:n.indexOf(r))()}}},oo=s.createContext(null);oo.displayName="ListboxContext";function Wt(e){let t=s.useContext(oo);if(t===null){let n=new Error(`<${e} /> is missing a parent <${Xt.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Wt),n}return t}function Of(e,t){return Z(t.type,Df,e,t)}var Lf=s.Fragment;function Xt(e){let{value:t,onChange:n,disabled:r=!1,horizontal:o=!1,...i}=e,c=o?"horizontal":"vertical",l=s.useReducer(Of,{listboxState:1,propsRef:{current:{value:t,onChange:n}},labelRef:s.createRef(),buttonRef:s.createRef(),optionsRef:s.createRef(),disabled:r,orientation:c,options:[],searchQuery:"",activeOptionIndex:null}),[{listboxState:u,propsRef:f,optionsRef:h,buttonRef:v},w]=l;U(()=>{f.current.value=t},[t,f]),U(()=>{f.current.onChange=n},[n,f]),U(()=>w({type:2,disabled:r}),[r]),U(()=>w({type:3,orientation:c}),[c]),Te("mousedown",b=>{var g,E,T;let I=b.target;u===0&&((g=v.current)!=null&&g.contains(I)||(E=h.current)!=null&&E.contains(I)||(w({type:1}),Kr(I,1)||(b.preventDefault(),(T=v.current)==null||T.focus())))});let j=s.useMemo(()=>({open:u===0,disabled:r}),[u,r]);return H.createElement(oo.Provider,{value:l},H.createElement(xt,{value:Z(u,{0:0,1:1})},K({props:i,slot:j,defaultTag:Lf,name:"Listbox"})))}var Ff="button",zf=he(function(e,t){var n;let[r,o]=Wt("Listbox.Button"),i=fe(r.buttonRef,t),c=`headlessui-listbox-button-${oe()}`,l=at(),u=s.useCallback(g=>{switch(g.key){case" ":case"Enter":case"ArrowDown":g.preventDefault(),o({type:0}),l.nextFrame(()=>{r.propsRef.current.value||o({type:4,focus:0})});break;case"ArrowUp":g.preventDefault(),o({type:0}),l.nextFrame(()=>{r.propsRef.current.value||o({type:4,focus:3})});break}},[o,r,l]),f=s.useCallback(g=>{switch(g.key){case" ":g.preventDefault();break}},[]),h=s.useCallback(g=>{if(it(g.currentTarget))return g.preventDefault();r.listboxState===0?(o({type:1}),l.nextFrame(()=>{var E;return(E=r.buttonRef.current)==null?void 0:E.focus({preventScroll:!0})})):(g.preventDefault(),o({type:0}))},[o,l,r]),v=Ut(()=>{if(r.labelRef.current)return[r.labelRef.current.id,c].join(" ")},[r.labelRef.current,c]),w=s.useMemo(()=>({open:r.listboxState===0,disabled:r.disabled}),[r]),j=e,b={ref:i,id:c,type:qt(e,r.buttonRef),"aria-haspopup":!0,"aria-controls":(n=r.optionsRef.current)==null?void 0:n.id,"aria-expanded":r.disabled?void 0:r.listboxState===0,"aria-labelledby":v,disabled:r.disabled,onKeyDown:u,onKeyUp:f,onClick:h};return K({props:{...j,...b},slot:w,defaultTag:Ff,name:"Listbox.Button"})}),Bf="label";function Hf(e){let[t]=Wt("Listbox.Label"),n=`headlessui-listbox-label-${oe()}`,r=s.useCallback(()=>{var c;return(c=t.buttonRef.current)==null?void 0:c.focus({preventScroll:!0})},[t.buttonRef]),o=s.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled}),[t]),i={ref:t.labelRef,id:n,onClick:r};return K({props:{...e,...i},slot:o,defaultTag:Bf,name:"Listbox.Label"})}var $f="ul",Vf=3,Uf=he(function(e,t){var n;let[r,o]=Wt("Listbox.Options"),i=fe(r.optionsRef,t),c=`headlessui-listbox-options-${oe()}`,l=at(),u=at(),f=He(),h=(()=>f!==null?f===0:r.listboxState===0)();U(()=>{let g=r.optionsRef.current;!g||r.listboxState===0&&g!==document.activeElement&&g.focus({preventScroll:!0})},[r.listboxState,r.optionsRef]);let v=s.useCallback(g=>{switch(u.dispose(),g.key){case" ":if(r.searchQuery!=="")return g.preventDefault(),g.stopPropagation(),o({type:5,value:g.key});case"Enter":if(g.preventDefault(),g.stopPropagation(),o({type:1}),r.activeOptionIndex!==null){let{dataRef:E}=r.options[r.activeOptionIndex];r.propsRef.current.onChange(E.current.value)}Pe().nextFrame(()=>{var E;return(E=r.buttonRef.current)==null?void 0:E.focus({preventScroll:!0})});break;case Z(r.orientation,{vertical:"ArrowDown",horizontal:"ArrowRight"}):return g.preventDefault(),g.stopPropagation(),o({type:4,focus:2});case Z(r.orientation,{vertical:"ArrowUp",horizontal:"ArrowLeft"}):return g.preventDefault(),g.stopPropagation(),o({type:4,focus:1});case"Home":case"PageUp":return g.preventDefault(),g.stopPropagation(),o({type:4,focus:0});case"End":case"PageDown":return g.preventDefault(),g.stopPropagation(),o({type:4,focus:3});case"Escape":return g.preventDefault(),g.stopPropagation(),o({type:1}),l.nextFrame(()=>{var E;return(E=r.buttonRef.current)==null?void 0:E.focus({preventScroll:!0})});case"Tab":g.preventDefault(),g.stopPropagation();break;default:g.key.length===1&&(o({type:5,value:g.key}),u.setTimeout(()=>o({type:6}),350));break}},[l,o,u,r]),w=Ut(()=>{var g,E,T;return(T=(g=r.labelRef.current)==null?void 0:g.id)!=null?T:(E=r.buttonRef.current)==null?void 0:E.id},[r.labelRef.current,r.buttonRef.current]),j=s.useMemo(()=>({open:r.listboxState===0}),[r]),b={"aria-activedescendant":r.activeOptionIndex===null||(n=r.options[r.activeOptionIndex])==null?void 0:n.id,"aria-labelledby":w,"aria-orientation":r.orientation,id:c,onKeyDown:v,role:"listbox",tabIndex:0,ref:i};return K({props:{...e,...b},slot:j,defaultTag:$f,features:Vf,visible:h,name:"Listbox.Options"})}),qf="li";function Gf(e){let{disabled:t=!1,value:n,...r}=e,[o,i]=Wt("Listbox.Option"),c=`headlessui-listbox-option-${oe()}`,l=o.activeOptionIndex!==null?o.options[o.activeOptionIndex].id===c:!1,u=o.propsRef.current.value===n,f=s.useRef({disabled:t,value:n});U(()=>{f.current.disabled=t},[f,t]),U(()=>{f.current.value=n},[f,n]),U(()=>{var E,T;f.current.textValue=(T=(E=document.getElementById(c))==null?void 0:E.textContent)==null?void 0:T.toLowerCase()},[f,c]);let h=s.useCallback(()=>o.propsRef.current.onChange(n),[o.propsRef,n]);U(()=>(i({type:7,id:c,dataRef:f}),()=>i({type:8,id:c})),[f,c]),U(()=>{var E,T;o.listboxState===0&&(!u||(i({type:4,focus:4,id:c}),(T=(E=document.getElementById(c))==null?void 0:E.focus)==null||T.call(E)))},[o.listboxState]),U(()=>{if(o.listboxState!==0||!l)return;let E=Pe();return E.requestAnimationFrame(()=>{var T,I;(I=(T=document.getElementById(c))==null?void 0:T.scrollIntoView)==null||I.call(T,{block:"nearest"})}),E.dispose},[c,l,o.listboxState,o.activeOptionIndex]);let v=s.useCallback(E=>{if(t)return E.preventDefault();h(),i({type:1}),Pe().nextFrame(()=>{var T;return(T=o.buttonRef.current)==null?void 0:T.focus({preventScroll:!0})})},[i,o.buttonRef,t,h]),w=s.useCallback(()=>{if(t)return i({type:4,focus:5});i({type:4,focus:4,id:c})},[t,c,i]),j=s.useCallback(()=>{t||l||i({type:4,focus:4,id:c})},[t,l,c,i]),b=s.useCallback(()=>{t||!l||i({type:4,focus:5})},[t,l,i]),g=s.useMemo(()=>({active:l,selected:u,disabled:t}),[l,u,t]);return K({props:{...r,id:c,role:"option",tabIndex:t===!0?void 0:-1,"aria-disabled":t===!0?!0:void 0,"aria-selected":u===!0?!0:void 0,disabled:void 0,onClick:v,onFocus:w,onPointerMove:j,onMouseMove:j,onPointerLeave:b,onMouseLeave:b},slot:g,defaultTag:qf,name:"Listbox.Option"})}Xt.Button=zf,Xt.Label=Hf,Xt.Options=Uf,Xt.Option=Gf;var Wf={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,menuState:0}},2:(e,t)=>{let n=qr(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled});return e.searchQuery===""&&e.activeItemIndex===n?e:{...e,searchQuery:"",activeItemIndex:n}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(c=>{var l;return((l=c.dataRef.current.textValue)==null?void 0:l.startsWith(r))&&!c.dataRef.current.disabled}),i=o?e.items.indexOf(o):-1;return i===-1||i===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:i}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{var n;let r=Array.from((n=e.itemsRef.current)==null?void 0:n.querySelectorAll('[id^="headlessui-menu-item-"]')).reduce((i,c,l)=>Object.assign(i,{[c.id]:l}),{}),o=[...e.items,{id:t.id,dataRef:t.dataRef}].sort((i,c)=>r[i.id]-r[c.id]);return{...e,items:o}},6:(e,t)=>{let n=e.items.slice(),r=e.activeItemIndex!==null?n[e.activeItemIndex]:null,o=n.findIndex(i=>i.id===t.id);return o!==-1&&n.splice(o,1),{...e,items:n,activeItemIndex:(()=>o===e.activeItemIndex||r===null?null:n.indexOf(r))()}}},ao=s.createContext(null);ao.displayName="MenuContext";function Tn(e){let t=s.useContext(ao);if(t===null){let n=new Error(`<${e} /> is missing a parent <${Rn.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Tn),n}return t}function Xf(e,t){return Z(t.type,Wf,e,t)}var Yf=s.Fragment;function Rn(e){let t=s.useReducer(Xf,{menuState:1,buttonRef:s.createRef(),itemsRef:s.createRef(),items:[],searchQuery:"",activeItemIndex:null}),[{menuState:n,itemsRef:r,buttonRef:o},i]=t;Te("mousedown",l=>{var u,f,h;let v=l.target;n===0&&((u=o.current)!=null&&u.contains(v)||(f=r.current)!=null&&f.contains(v)||(i({type:1}),Kr(v,1)||(l.preventDefault(),(h=o.current)==null||h.focus())))});let c=s.useMemo(()=>({open:n===0}),[n]);return H.createElement(ao.Provider,{value:t},H.createElement(xt,{value:Z(n,{0:0,1:1})},K({props:e,slot:c,defaultTag:Yf,name:"Menu"})))}var Kf="button",Qf=he(function(e,t){var n;let[r,o]=Tn("Menu.Button"),i=fe(r.buttonRef,t),c=`headlessui-menu-button-${oe()}`,l=at(),u=s.useCallback(b=>{switch(b.key){case" ":case"Enter":case"ArrowDown":b.preventDefault(),b.stopPropagation(),o({type:0}),l.nextFrame(()=>o({type:2,focus:0}));break;case"ArrowUp":b.preventDefault(),b.stopPropagation(),o({type:0}),l.nextFrame(()=>o({type:2,focus:3}));break}},[o,l]),f=s.useCallback(b=>{switch(b.key){case" ":b.preventDefault();break}},[]),h=s.useCallback(b=>{if(it(b.currentTarget))return b.preventDefault();e.disabled||(r.menuState===0?(o({type:1}),l.nextFrame(()=>{var g;return(g=r.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})})):(b.preventDefault(),b.stopPropagation(),o({type:0})))},[o,l,r,e.disabled]),v=s.useMemo(()=>({open:r.menuState===0}),[r]),w=e,j={ref:i,id:c,type:qt(e,r.buttonRef),"aria-haspopup":!0,"aria-controls":(n=r.itemsRef.current)==null?void 0:n.id,"aria-expanded":e.disabled?void 0:r.menuState===0,onKeyDown:u,onKeyUp:f,onClick:h};return K({props:{...w,...j},slot:v,defaultTag:Kf,name:"Menu.Button"})}),Zf="div",Jf=3,eh=he(function(e,t){var n,r;let[o,i]=Tn("Menu.Items"),c=fe(o.itemsRef,t),l=`headlessui-menu-items-${oe()}`,u=at(),f=He(),h=(()=>f!==null?f===0:o.menuState===0)();s.useEffect(()=>{let g=o.itemsRef.current;!g||o.menuState===0&&g!==document.activeElement&&g.focus({preventScroll:!0})},[o.menuState,o.itemsRef]),Ji({container:o.itemsRef.current,enabled:o.menuState===0,accept(g){return g.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:g.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(g){g.setAttribute("role","none")}});let v=s.useCallback(g=>{var E;switch(u.dispose(),g.key){case" ":if(o.searchQuery!=="")return g.preventDefault(),g.stopPropagation(),i({type:3,value:g.key});case"Enter":if(g.preventDefault(),g.stopPropagation(),i({type:1}),o.activeItemIndex!==null){let{id:T}=o.items[o.activeItemIndex];(E=document.getElementById(T))==null||E.click()}Pe().nextFrame(()=>{var T;return(T=o.buttonRef.current)==null?void 0:T.focus({preventScroll:!0})});break;case"ArrowDown":return g.preventDefault(),g.stopPropagation(),i({type:2,focus:2});case"ArrowUp":return g.preventDefault(),g.stopPropagation(),i({type:2,focus:1});case"Home":case"PageUp":return g.preventDefault(),g.stopPropagation(),i({type:2,focus:0});case"End":case"PageDown":return g.preventDefault(),g.stopPropagation(),i({type:2,focus:3});case"Escape":g.preventDefault(),g.stopPropagation(),i({type:1}),Pe().nextFrame(()=>{var T;return(T=o.buttonRef.current)==null?void 0:T.focus({preventScroll:!0})});break;case"Tab":g.preventDefault(),g.stopPropagation();break;default:g.key.length===1&&(i({type:3,value:g.key}),u.setTimeout(()=>i({type:4}),350));break}},[i,u,o]),w=s.useCallback(g=>{switch(g.key){case" ":g.preventDefault();break}},[]),j=s.useMemo(()=>({open:o.menuState===0}),[o]),b={"aria-activedescendant":o.activeItemIndex===null||(n=o.items[o.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=o.buttonRef.current)==null?void 0:r.id,id:l,onKeyDown:v,onKeyUp:w,role:"menu",tabIndex:0,ref:c};return K({props:{...e,...b},slot:j,defaultTag:Zf,features:Jf,visible:h,name:"Menu.Items"})}),th=s.Fragment;function nh(e){let{disabled:t=!1,onClick:n,...r}=e,[o,i]=Tn("Menu.Item"),c=`headlessui-menu-item-${oe()}`,l=o.activeItemIndex!==null?o.items[o.activeItemIndex].id===c:!1;U(()=>{if(o.menuState!==0||!l)return;let b=Pe();return b.requestAnimationFrame(()=>{var g,E;(E=(g=document.getElementById(c))==null?void 0:g.scrollIntoView)==null||E.call(g,{block:"nearest"})}),b.dispose},[c,l,o.menuState,o.activeItemIndex]);let u=s.useRef({disabled:t});U(()=>{u.current.disabled=t},[u,t]),U(()=>{var b,g;u.current.textValue=(g=(b=document.getElementById(c))==null?void 0:b.textContent)==null?void 0:g.toLowerCase()},[u,c]),U(()=>(i({type:5,id:c,dataRef:u}),()=>i({type:6,id:c})),[u,c]);let f=s.useCallback(b=>{if(t)return b.preventDefault();if(i({type:1}),Pe().nextFrame(()=>{var g;return(g=o.buttonRef.current)==null?void 0:g.focus({preventScroll:!0})}),n)return n(b)},[i,o.buttonRef,t,n]),h=s.useCallback(()=>{if(t)return i({type:2,focus:5});i({type:2,focus:4,id:c})},[t,c,i]),v=s.useCallback(()=>{t||l||i({type:2,focus:4,id:c})},[t,l,c,i]),w=s.useCallback(()=>{t||!l||i({type:2,focus:5})},[t,l,i]),j=s.useMemo(()=>({active:l,disabled:t}),[l,t]);return K({props:{...r,id:c,role:"menuitem",tabIndex:t===!0?void 0:-1,"aria-disabled":t===!0?!0:void 0,disabled:void 0,onClick:f,onFocus:h,onPointerMove:v,onMouseMove:v,onPointerLeave:w,onMouseLeave:w},slot:j,defaultTag:th,name:"Menu.Item"})}Rn.Button=Qf,Rn.Items=eh,Rn.Item=nh;var rh={0:e=>({...e,popoverState:Z(e.popoverState,{0:1,1:0})}),1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},io=s.createContext(null);io.displayName="PopoverContext";function In(e){let t=s.useContext(io);if(t===null){let n=new Error(`<${e} /> is missing a parent <${_t.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,In),n}return t}var so=s.createContext(null);so.displayName="PopoverAPIContext";function cs(e){let t=s.useContext(so);if(t===null){let n=new Error(`<${e} /> is missing a parent <${_t.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,cs),n}return t}var lo=s.createContext(null);lo.displayName="PopoverGroupContext";function us(){return s.useContext(lo)}var co=s.createContext(null);co.displayName="PopoverPanelContext";function oh(){return s.useContext(co)}function ah(e,t){return Z(t.type,rh,e,t)}var ih="div";function _t(e){let t=`headlessui-popover-button-${oe()}`,n=`headlessui-popover-panel-${oe()}`,r=s.useReducer(ah,{popoverState:1,button:null,buttonId:t,panel:null,panelId:n}),[{popoverState:o,button:i,panel:c},l]=r;s.useEffect(()=>l({type:3,buttonId:t}),[t,l]),s.useEffect(()=>l({type:5,panelId:n}),[n,l]);let u=s.useMemo(()=>({buttonId:t,panelId:n,close:()=>l({type:1})}),[t,n,l]),f=us(),h=f==null?void 0:f.registerPopover,v=s.useCallback(()=>{var g;return(g=f==null?void 0:f.isFocusWithinPopoverGroup())!=null?g:(i==null?void 0:i.contains(document.activeElement))||(c==null?void 0:c.contains(document.activeElement))},[f,i,c]);s.useEffect(()=>h==null?void 0:h(u),[h,u]),Te("focus",()=>{o===0&&(v()||!i||!c||l({type:1}))},!0),Te("mousedown",g=>{let E=g.target;o===0&&(i!=null&&i.contains(E)||c!=null&&c.contains(E)||(l({type:1}),Kr(E,1)||(g.preventDefault(),i==null||i.focus())))});let w=s.useCallback(g=>{l({type:1});let E=(()=>g?g instanceof HTMLElement?g:g.current instanceof HTMLElement?g.current:i:i)();E==null||E.focus()},[l,i]),j=s.useMemo(()=>({close:w}),[w]),b=s.useMemo(()=>({open:o===0,close:w}),[o,w]);return H.createElement(io.Provider,{value:r},H.createElement(so.Provider,{value:j},H.createElement(xt,{value:Z(o,{0:0,1:1})},K({props:e,slot:b,defaultTag:ih,name:"Popover"}))))}var sh="button",lh=he(function(e,t){let[n,r]=In("Popover.Button"),o=s.useRef(null),i=us(),c=i==null?void 0:i.closeOthers,l=oh(),u=l===null?!1:l===n.panelId,f=fe(o,t,u?null:a=>r({type:2,button:a})),h=fe(o,t),v=s.useRef(null),w=s.useRef(typeof window>"u"?null:document.activeElement);Te("focus",()=>{w.current=v.current,v.current=document.activeElement},!0);let j=s.useCallback(a=>{var p,m;if(u){if(n.popoverState===1)return;switch(a.key){case" ":case"Enter":a.preventDefault(),a.stopPropagation(),r({type:1}),(p=n.button)==null||p.focus();break}}else switch(a.key){case" ":case"Enter":a.preventDefault(),a.stopPropagation(),n.popoverState===1&&(c==null||c(n.buttonId)),r({type:0});break;case"Escape":if(n.popoverState!==0)return c==null?void 0:c(n.buttonId);if(!o.current||!o.current.contains(document.activeElement))return;a.preventDefault(),a.stopPropagation(),r({type:1});break;case"Tab":if(n.popoverState!==0||!n.panel||!n.button)return;if(a.shiftKey){if(!w.current||(m=n.button)!=null&&m.contains(w.current)||n.panel.contains(w.current))return;let x=jn(),_=x.indexOf(w.current);if(x.indexOf(n.button)>_)return;a.preventDefault(),a.stopPropagation(),$e(n.panel,8)}else a.preventDefault(),a.stopPropagation(),$e(n.panel,1);break}},[r,n.popoverState,n.buttonId,n.button,n.panel,o,c,u]),b=s.useCallback(a=>{var p;if(!u&&(a.key===" "&&a.preventDefault(),n.popoverState===0&&!!n.panel&&!!n.button))switch(a.key){case"Tab":if(!w.current||(p=n.button)!=null&&p.contains(w.current)||n.panel.contains(w.current))return;let m=jn(),x=m.indexOf(w.current);if(m.indexOf(n.button)>x)return;a.preventDefault(),a.stopPropagation(),$e(n.panel,8);break}},[n.popoverState,n.panel,n.button,u]),g=s.useCallback(a=>{var p,m;it(a.currentTarget)||e.disabled||(u?(r({type:1}),(p=n.button)==null||p.focus()):(n.popoverState===1&&(c==null||c(n.buttonId)),(m=n.button)==null||m.focus(),r({type:0})))},[r,n.button,n.popoverState,n.buttonId,e.disabled,c,u]),E=s.useMemo(()=>({open:n.popoverState===0}),[n]),T=qt(e,o),I=e,O=u?{ref:h,type:T,onKeyDown:j,onClick:g}:{ref:f,id:n.buttonId,type:T,"aria-expanded":e.disabled?void 0:n.popoverState===0,"aria-controls":n.panel?n.panelId:void 0,onKeyDown:j,onKeyUp:b,onClick:g};return K({props:{...I,...O},slot:E,defaultTag:sh,name:"Popover.Button"})}),ch="div",uh=3,dh=he(function(e,t){let[{popoverState:n},r]=In("Popover.Overlay"),o=fe(t),i=`headlessui-popover-overlay-${oe()}`,c=He(),l=(()=>c!==null?c===0:n===0)(),u=s.useCallback(h=>{if(it(h.currentTarget))return h.preventDefault();r({type:1})},[r]),f=s.useMemo(()=>({open:n===0}),[n]);return K({props:{...e,ref:o,id:i,"aria-hidden":!0,onClick:u},slot:f,defaultTag:ch,features:uh,visible:l,name:"Popover.Overlay"})}),ph="div",mh=3,fh=he(function(e,t){let{focus:n=!1,...r}=e,[o,i]=In("Popover.Panel"),{close:c}=cs("Popover.Panel"),l=s.useRef(null),u=fe(l,t,b=>{i({type:4,panel:b})}),f=He(),h=(()=>f!==null?f===0:o.popoverState===0)(),v=s.useCallback(b=>{var g;switch(b.key){case"Escape":if(o.popoverState!==0||!l.current||!l.current.contains(document.activeElement))return;b.preventDefault(),b.stopPropagation(),i({type:1}),(g=o.button)==null||g.focus();break}},[o,l,i]);s.useEffect(()=>()=>i({type:4,panel:null}),[i]),s.useEffect(()=>{var b;e.static||o.popoverState===1&&((b=e.unmount)==null||b)&&i({type:4,panel:null})},[o.popoverState,e.unmount,e.static,i]),s.useEffect(()=>{if(!n||o.popoverState!==0||!l.current)return;let b=document.activeElement;l.current.contains(b)||$e(l.current,1)},[n,l,o.popoverState]),Te("keydown",b=>{var g;if(o.popoverState!==0||!l.current||b.key!=="Tab"||!document.activeElement||!l.current||!l.current.contains(document.activeElement))return;b.preventDefault();let E=$e(l.current,b.shiftKey?2:4);if(E===3)return(g=o.button)==null?void 0:g.focus();if(E===1){if(!o.button)return;let T=jn(),I=T.indexOf(o.button),O=T.splice(I+1).filter(a=>{var p;return!((p=l.current)!=null&&p.contains(a))});$e(O,1)===0&&$e(document.body,1)}}),Te("focus",()=>{var b;!n||o.popoverState===0&&(!l.current||(b=l.current)!=null&&b.contains(document.activeElement)||i({type:1}))},!0);let w=s.useMemo(()=>({open:o.popoverState===0,close:c}),[o,c]),j={ref:u,id:o.panelId,onKeyDown:v};return H.createElement(co.Provider,{value:o.panelId},K({props:{...r,...j},slot:w,defaultTag:ph,features:mh,visible:h,name:"Popover.Panel"}))}),hh="div";function gh(e){let t=s.useRef(null),[n,r]=s.useState([]),o=s.useCallback(w=>{r(j=>{let b=j.indexOf(w);if(b!==-1){let g=j.slice();return g.splice(b,1),g}return j})},[r]),i=s.useCallback(w=>(r(j=>[...j,w]),()=>o(w)),[r,o]),c=s.useCallback(()=>{var w;let j=document.activeElement;return(w=t.current)!=null&&w.contains(j)?!0:n.some(b=>{var g,E;return((g=document.getElementById(b.buttonId))==null?void 0:g.contains(j))||((E=document.getElementById(b.panelId))==null?void 0:E.contains(j))})},[t,n]),l=s.useCallback(w=>{for(let j of n)j.buttonId!==w&&j.close()},[n]),u=s.useMemo(()=>({registerPopover:i,unregisterPopover:o,isFocusWithinPopoverGroup:c,closeOthers:l}),[i,o,c,l]),f=s.useMemo(()=>({}),[]),h={ref:t},v=e;return H.createElement(lo.Provider,{value:u},K({props:{...v,...h},slot:f,defaultTag:hh,name:"Popover.Group"}))}_t.Button=lh,_t.Overlay=dh,_t.Panel=fh,_t.Group=gh,s.createContext(null);var bh=s.createContext(null);bh.displayName="RadioGroupContext";var vh=s.createContext(null);vh.displayName="GroupContext";var xh=s.createContext(null);xh.displayName="TabsContext";function wh(){let e=s.useRef(!0);return s.useEffect(()=>{e.current=!1},[]),e.current}function yh(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function uo(e,...t){e&&t.length>0&&e.classList.add(...t)}function Nn(e,...t){e&&t.length>0&&e.classList.remove(...t)}function _h(e,t){let n=Pe();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:o}=getComputedStyle(e),[i,c]=[r,o].map(l=>{let[u=0]=l.split(",").filter(Boolean).map(f=>f.includes("ms")?parseFloat(f):parseFloat(f)*1e3).sort((f,h)=>h-f);return u});return i!==0?n.setTimeout(()=>{t("finished")},i+c):t("finished"),n.add(()=>t("cancelled")),n.dispose}function ds(e,t,n,r,o,i){let c=Pe(),l=i!==void 0?yh(i):()=>{};return Nn(e,...o),uo(e,...t,...n),c.nextFrame(()=>{Nn(e,...n),uo(e,...r),c.add(_h(e,u=>(Nn(e,...r,...t),uo(e,...o),l(u))))}),c.add(()=>Nn(e,...t,...n,...r,...o)),c.add(()=>l("cancelled")),c.dispose}function st(e=""){return s.useMemo(()=>e.split(" ").filter(t=>t.trim().length>1),[e])}var Mn=s.createContext(null);Mn.displayName="TransitionContext";function kh(){let e=s.useContext(Mn);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Eh(){let e=s.useContext(An);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}var An=s.createContext(null);An.displayName="NestingContext";function Dn(e){return"children"in e?Dn(e.children):e.current.filter(({state:t})=>t==="visible").length>0}function ps(e){let t=s.useRef(e),n=s.useRef([]),r=es();s.useEffect(()=>{t.current=e},[e]);let o=s.useCallback((c,l=1)=>{var u;let f=n.current.findIndex(({id:h})=>h===c);f!==-1&&(Z(l,{0(){n.current.splice(f,1)},1(){n.current[f].state="hidden"}}),!Dn(n)&&r.current&&((u=t.current)==null||u.call(t)))},[t,r,n]),i=s.useCallback(c=>{let l=n.current.find(({id:u})=>u===c);return l?l.state!=="visible"&&(l.state="visible"):n.current.push({id:c,state:"visible"}),()=>o(c,0)},[n,o]);return s.useMemo(()=>({children:n,register:i,unregister:o}),[i,o,n])}function Ch(){}var jh=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function ms(e){var t;let n={};for(let r of jh)n[r]=(t=e[r])!=null?t:Ch;return n}function Sh(e){let t=s.useRef(ms(e));return s.useEffect(()=>{t.current=ms(e)},[e]),t}var Ph="div",fs=1;function hs(e){let{beforeEnter:t,afterEnter:n,beforeLeave:r,afterLeave:o,enter:i,enterFrom:c,enterTo:l,entered:u,leave:f,leaveFrom:h,leaveTo:v,...w}=e,j=s.useRef(null),[b,g]=s.useState("visible"),E=w.unmount?0:1,{show:T,appear:I,initial:O}=kh(),{register:a,unregister:p}=Eh(),m=oe(),x=s.useRef(!1),_=ps(()=>{x.current||(g("hidden"),p(m),y.current.afterLeave())});U(()=>{if(m)return a(m)},[a,m]),U(()=>{if(E===1&&m){if(T&&b!=="visible"){g("visible");return}Z(b,{hidden:()=>p(m),visible:()=>a(m)})}},[b,m,a,p,T,E]);let C=st(i),k=st(c),S=st(l),M=st(u),R=st(f),P=st(h),N=st(v),y=Sh({beforeEnter:t,afterEnter:n,beforeLeave:r,afterLeave:o}),A=kn();s.useEffect(()=>{if(A&&b==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,b,A]);let z=O&&!I;U(()=>{let D=j.current;if(D&&!z)return x.current=!0,T&&y.current.beforeEnter(),T||y.current.beforeLeave(),T?ds(D,C,k,S,M,B=>{x.current=!1,B==="finished"&&y.current.afterEnter()}):ds(D,R,P,N,M,B=>{x.current=!1,B==="finished"&&(Dn(_)||(g("hidden"),p(m),y.current.afterLeave()))})},[y,m,x,p,_,j,z,T,C,k,S,R,P,N]);let F={ref:j},L=w;return H.createElement(An.Provider,{value:_},H.createElement(xt,{value:Z(b,{visible:0,hidden:1})},K({props:{...L,...F},defaultTag:Ph,features:fs,visible:b==="visible",name:"Transition.Child"})))}function kt(e){let{show:t,appear:n=!1,unmount:r,...o}=e,i=He();if(t===void 0&&i!==null&&(t=Z(i,{0:!0,1:!1})),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,l]=s.useState(t?"visible":"hidden"),u=ps(()=>{l("hidden")}),f=wh(),h=s.useMemo(()=>({show:t,appear:n||!f,initial:f}),[t,n,f]);s.useEffect(()=>{t?l("visible"):Dn(u)||l("hidden")},[t,u]);let v={unmount:r};return H.createElement(An.Provider,{value:u},H.createElement(Mn.Provider,{value:h},K({props:{...v,as:s.Fragment,children:H.createElement(hs,{...v,...o})},defaultTag:s.Fragment,features:fs,visible:c==="visible",name:"Transition"})))}kt.Child=function(e){let t=s.useContext(Mn)!==null,n=He()!==null;return!t&&n?H.createElement(kt,{...e}):H.createElement(hs,{...e})},kt.Root=kt;const gs=({show:e=!0,onClick:t,modalRef:n})=>window===window.top&&d.jsx(kt,{appear:!0,show:e,enter:"transition-opacity duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:d.jsx("div",{role:"presentation",onClick:t,ref:n,className:"absolute left-0 top-0 -z-[1] flex h-screen w-screen items-center justify-center bg-slate-900/70",children:d.jsx("div",{className:"top-[50%] select-none text-5xl font-extrabold text-white",children:"Now capturing your browser."})})}),bs=({onClick:e,text:t,showCancel:n,primary:r=!0,dataTestID:o=void 0})=>n?d.jsx("button",{onClick:e,className:r?"DeleteButton":"CancelButton","data-testid":o,children:d.jsx("a",{className:r?"DeleteButton--text":"CancelButton--text",children:t})}):d.jsx("button",{onClick:e,className:"GotItButton",children:d.jsx("a",{className:"GotItButton--text",children:t})});function Th({onCancel:e,onDelete:t,showDelete:n,showCancelButton:r,modalRef:o,title:i,description:c,dataTestID:l=void 0,dataTestIDPrimaryBtn:u=void 0,dataTestIDSecondaryBtn:f=void 0}){return d.jsx("div",{className:"AlertModal--wrapper","data-testid":l,children:d.jsxs("div",{className:"AlertModal",ref:o,children:[d.jsxs("div",{className:"AlertModal--content",children:[d.jsx("div",{className:"AlertModal--row",children:r&&d.jsxs(d.Fragment,{children:[d.jsx("a",{className:"AlertModal--title",children:i}),d.jsx(ae,{onClick:e,className:"XButton",icon:zc})]})}),d.jsx("p",{className:"AlertModal--body",children:c})]}),d.jsx("div",{className:"BounceLoaderModal",children:d.jsx(dc,{size:50,color:"#6466f1",loading:!r})}),r&&d.jsxs("div",{className:n?"AlertModal--row":"GotItScribeModal--row",children:[d.jsx(bs,{onClick:e,text:n?"Cancel":"Got it",showCancel:n,primary:!1,dataTestID:f}),n&&d.jsx(bs,{onClick:t,showCancel:n,text:"Yes, Delete Scribe",dataTestID:u})]})]})})}const Rh=({onCancel:e,onDelete:t,modalRef:n})=>{const r=s.useCallback(o=>{o.keyCode===27&&e(o)},[]);return s.useEffect(()=>(document.addEventListener("keydown",r,!1),()=>{document.removeEventListener("keydown",r,!1)}),[r]),d.jsx(Th,{onCancel:e,showDelete:!0,onDelete:t,modalRef:n,showCancelButton:!0,title:"Are you sure?",description:"This action is permanent. You can always edit a Scribe when you are done capturing it.",dataTestID:"extensionDeleteCurrentScribeModal",dataTestIDPrimaryBtn:"extensionDeleteCurrentScribeButton",dataTestIDSecondaryBtn:"extensionCancelDeleteCurrentScribeButton"})},Ih=()=>d.jsx(kt,{appear:!0,show:!0,enter:"transition-opacity duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:d.jsx("div",{className:"absolute left-0 top-0 -z-[1] flex h-screen w-screen items-center justify-center bg-slate-900/70 text-center",children:d.jsxs("text",{className:"top-[50%] select-none text-5xl font-extrabold text-white",children:["Step limit has been reached.",d.jsx("br",{}),"Your Scribe has stopped capturing.",d.jsx("br",{}),d.jsx("br",{}),d.jsx("br",{}),"Processing your Scribe...."]})})}),Nh=()=>d.jsx("div",{className:"h-5 w-5 animate-pulse rounded-full bg-red-400"}),Mh="/assets/spinner.png",Ah=()=>d.jsx("img",{className:"h-full w-full animate-spin",src:Mh,alt:"Ending capturing"}),Dh=()=>d.jsx("div",{className:"h-5 w-5 rounded-full bg-slate-400"}),Oh=({open:e,hovered:t,status:n})=>{if(e||t)return d.jsx(ae,{className:"h-4 w-4 text-slate-100",icon:e?Bc:Hc});switch(n){case ce.PAUSED_RECORDING:return d.jsx(Dh,{});case ce.ENDING_RECORDING:return d.jsx(Ah,{});default:return d.jsx(Nh,{})}},Lh=({status:e,open:t,onClick:n})=>{const[r,o]=s.useState(!1);function i(){o(!0)}function c(){o(!1)}return d.jsx(dt,{children:d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx("button",{"data-testid":"extensionRecordingControlsIndicator",className:Ze("flex cursor-pointer flex-col rounded-full border bg-slate-800 p-2 shadow-2xl",{"border-slate-600":t,"border-transparent bg-indigo-800":!t&&(e===ce.RECORDING||e===ce.ENDING_RECORDING)}),onClick:n,onMouseEnter:i,onMouseLeave:c,children:d.jsx("div",{className:Ze("flex h-10 w-10 items-center justify-center rounded-full  text-slate-100",{"bg-slate-300/10":t||r||e===ce.IDLE}),children:d.jsx(Oh,{open:t,hovered:r,status:e})})})}),d.jsxs(me,{side:"right",children:[t?"Hide":"Show"," Controls"]})]})})},po=s.createContext(null),vs=({message:e,icon:t,iconClassName:n,children:r,className:o,side:i="bottom",container:c,...l})=>{const u=s.useMemo(()=>({side:i}),[i]);return d.jsxs(Ir,{...l,children:[d.jsx(hi,{className:$("fixed left-0 right-0 flex justify-center",{"bottom-0":i==="bottom","top-0":i==="top"})}),d.jsx(Nr,{sideOffset:24,onOpenAutoFocus:f=>f.preventDefault(),className:$("flex h-12 min-w-0 items-center justify-between gap-6 rounded-xl p-0 bg-slate-800 shadow-2xl",o),container:c,children:d.jsxs(po.Provider,{value:u,children:[!!(t||e)&&d.jsxs("div",{className:"flex items-center gap-2 px-4 h-full",children:[t&&d.jsx(ae,{icon:t,className:$("size-4 shrink-0 text-indigo-400",n)}),e&&d.jsx("span",{className:"whitespace-nowrap font-sans text-sm font-normal tabular-nums leading-5 text-slate-100",children:e})]}),r&&d.jsx("div",{className:"flex shrink-0 gap-1.5 p-2",children:r})]})})]})};s.forwardRef(({tooltip:e,icon:t,...n},r)=>{const o=s.useContext(po);if(!o)throw new Error("ActionBarIconButton must be used within an ActionBar");return d.jsxs(de,{children:[d.jsx(pe,{asChild:!0,children:d.jsx(Q,{theme:"dark",variant:"ghost",screenReaderLabel:e,icon:t,ref:r,"data-testid":n["data-testid"],...n})}),d.jsx(me,{side:o.side==="bottom"?"top":"bottom",variant:"compact",children:e})]})});const mo=({children:e,tooltip:t,className:n,...r})=>{const o=s.useContext(po);if(!o)throw new Error("ActionBarButton must be used within an ActionBar");const i=d.jsx(Q,{theme:"dark",variant:"ghost",size:"small","data-action-bar-text":!0,className:n,...r,children:e});return t?d.jsxs(de,{children:[d.jsx(pe,{asChild:!0,children:i}),d.jsx(me,{side:o.side==="bottom"?"top":"bottom",variant:"compact",children:t})]}):i},Fh=(e,t)=>t?document.elementsFromPoint(e.clientX,e.clientY)[0]:uu(document.elementsFromPoint(e.clientX,e.clientY)),zh=e=>{const[t,n]=s.useState(null),[r,o]=s.useState(!1),i=s.useCallback(l=>{n(Fh(l,e)),o(!1)},[]),c=s.useCallback(()=>o(!0),[]);return s.useEffect(()=>(window.addEventListener("scroll",c,!0),()=>{window.removeEventListener("scroll",c)}),[c]),s.useEffect(()=>(window.addEventListener("mousemove",i),()=>{window.removeEventListener("mousemove",i)}),[i]),r?null:t};function xs(e){const t=document.getElementById(Rt);return t?t.contains(e):!1}const Bh=({onClick:e,onEscape:t})=>{const n=zh(!0),[r,o]=s.useState(!1),i=s.useRef(void 0);return s.useEffect(()=>{const c=l=>{l.key==="Escape"&&(t==null||t())};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[t]),s.useEffect(()=>{const c=l=>{l.target&&!xs(l.target)&&(l.preventDefault(),l.stopPropagation(),e==null||e(l))};return document.addEventListener("click",c,!0),()=>document.removeEventListener("click",c,!0)},[e]),s.useEffect(()=>()=>{i.current&&(i.current.style.filter="")},[]),s.useEffect(()=>{i.current&&(i.current.getAttribute(Cc)||(i.current.style.filter="")),n&&!xs(n)?(n.getAttribute(pr)||(n.style.filter="blur(16px)",i.current=n),o(!0)):n&&o(!1)},[n]),r?d.jsx("div",{className:"pointer-events-none fixed z-50 cursor-pointer rounded-md rounded-tr-none border-2 border-dashed border-indigo-500 border-opacity-80",style:{top:n==null?void 0:n.getBoundingClientRect().top,left:n==null?void 0:n.getBoundingClientRect().left,width:n==null?void 0:n.getBoundingClientRect().width,height:n==null?void 0:n.getBoundingClientRect().height}}):null},Hh=({isEnabled:e,isPreviewing:t,onEnabledChange:n,onSettingsChange:r,onPrecisionBlurEnabledChange:o,settings:i})=>{const[c,l]=s.useState(!1),u=(h,v)=>{Y("change_smart_blur_setting",{key:h,value:v,isPreview:t}),r({...i||{},[h]:v})};s.useEffect(()=>{e||(n(!0),Object.keys(i).filter(h=>!!Object.create(i)[h]).length===0&&r({...i,images:!0,commonNames:!0,emailAddresses:!0,numbers:!0}))},[]);const f=s.useCallback((h,v)=>{const w=h.target.getAttribute(pr);if(w){const j=(v.customTargets||[]).filter(b=>b.id!==w);r({...i||{},customTargets:j})}else{const j=Pa().split("-")[0];h.target.setAttribute(pr,j);const b={id:j,selector:cr(h.target,{attr:E=>["title","alt"].includes(E)||E.startsWith("aria-label")}),url:`${document.location.protocol}//${document.location.hostname}${document.location.pathname}`},g=JSON.parse(JSON.stringify(Array.from(v.customTargets||[])));g.push(b),r({...v||{},customTargets:g})}},[i,r]);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:Ze("w-[280px] flex-col rounded-xl bg-slate-800 shadow-2xl",{flex:!c,hidden:c}),children:[d.jsx("div",{className:"flex flex-col gap-3 px-4 py-3",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("span",{className:"text-base font-semibold leading-6 text-slate-50",children:"Smart Blur"}),d.jsx(qe,{theme:"dark",checked:e,onCheckedChange:n})]})}),d.jsxs("div",{children:[d.jsx("div",{className:"h-px bg-slate-900"}),d.jsx("div",{className:"h-px bg-slate-700"})]}),d.jsxs("div",{className:"flex flex-col gap-3 px-4 py-3",children:[d.jsx(qe,{label:"Email Addresses",checked:i==null?void 0:i.emailAddresses,disabled:!e,onCheckedChange:h=>u("emailAddresses",h),theme:"dark"}),d.jsx(qe,{label:"Numbers",checked:i==null?void 0:i.numbers,disabled:!e,onCheckedChange:h=>u("numbers",h),theme:"dark"}),d.jsx(qe,{label:"Common Names",checked:(i==null?void 0:i.commonNames)||!1,disabled:!e,onCheckedChange:h=>u("commonNames",h),theme:"dark"}),d.jsx(qe,{label:"Long Text",checked:i==null?void 0:i.longText,disabled:!e,onCheckedChange:h=>u("longText",h),theme:"dark"}),d.jsx(qe,{label:"Form Fields",checked:i==null?void 0:i.formFields,disabled:!e,onCheckedChange:h=>u("formFields",h),theme:"dark"}),d.jsx(qe,{label:"Table Rows",checked:i==null?void 0:i.tableRows,disabled:!e,onCheckedChange:h=>u("tableRows",h),theme:"dark"}),d.jsx(qe,{label:"Images",checked:i==null?void 0:i.images,disabled:!e,onCheckedChange:h=>u("images",h),theme:"dark"}),d.jsx(Q,{className:"mt-2",onClick:()=>{o(!0),l(!0)},variant:"ghost",theme:"dark",disabled:!e||c,children:d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx(ae,{icon:$c,className:"mr-2 h-3 w-3 text-slate-500"}),"Choose Others"]})}),d.jsx("span",{className:"block text-xs font-normal leading-4 text-slate-400",children:"Elements you hover over will still be visible. Works on most sites."})]})]}),d.jsx(vs,{icon:hr,message:"Select elements to blur",open:c&&e,container:br(),children:d.jsx(mo,{variant:"primary",onClick:()=>{Y("enable_precision_blur"),o(!1),l(!1)},children:"Done"})}),c&&e&&d.jsx(Bh,{onClick:h=>{Y("add_precision_blur_target"),f(h,i)},onEscape:()=>{o(!1),l(!1)}}),d.jsxs(vs,{icon:hr,message:"Capture is paused during preview. Get Scribe Pro to use Smart Blur while capturing a guide.",side:"top",open:t&&e,container:br(),children:[d.jsx(mo,{onClick:()=>{n(!1)},children:"Done"}),d.jsx(mo,{variant:"primary",onClick:()=>{Y("show_pro_features_workspace_page",{location:"smart_blur_snackbar"}),window.open(ga("smart_blur_snackbar"),"_blank")},children:"Get Scribe Pro"})]})]})},$h=({onPrecisionBlurEnabledChange:e})=>{const{liveBlurEnabled:t,liveBlurSettings:n}=re(Ko),{userData:r}=re(ar);return d.jsx(Hh,{isPreviewing:cn(r),onPrecisionBlurEnabledChange:e,isEnabled:t,settings:n,onEnabledChange:o=>{Y(o?"enable_smart_blur":"disable_smart_blur",{isPreview:cn(r)}),chrome.runtime.sendMessage({messageType:"changeLiveBlurSettings",liveBlurEnabled:!!o,liveBlurSettings:n})},onSettingsChange:o=>{chrome.runtime.sendMessage({messageType:"changeLiveBlurSettings",liveBlurEnabled:!0,liveBlurSettings:o||{}})}})},Et=({color:e="indigo",disabled:t=!1,showTooltip:n=!0,icon:r,tooltip:o,showProTag:i=!1,onClick:c=()=>{},setButtonRef:l=void 0,dataTestID:u=void 0})=>{const f=d.jsxs("button",{ref:l,type:"button",disabled:t,className:Ze("relative flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border border-transparent bg-slate-300/10 p-0 text-slate-100",{"hover:border-green-400 hover:bg-green-600/30":e==="green","hover:border-indigo-400 hover:bg-indigo-600/30":e==="indigo","hover:border-red-400 hover:bg-red-600/30":e==="red"}),onClick:c,"data-testid":u,children:[i&&d.jsx(su,{type:"pro",theme:"dark",className:"absolute -right-1 -top-1"}),d.jsx("div",{className:"flex content-center justify-center",children:r})]});return n?d.jsxs(de,{children:[d.jsx(pe,{children:f}),d.jsx(me,{className:"z-[99999999]",side:"right",collisionPadding:16,children:o})]}):f},Vh=({status:e,isPlanFree:t,screenPositionMenuOpen:n=!1,blurControlsOpen:r=!1,isRecordingAudio:o=!1,onChangeScreenPosition:i=void 0,onPause:c=void 0,onDelete:l=void 0,onComplete:u=void 0,onLiveBlur:f=void 0,screenPositionMenuButtonSetReference:h=void 0})=>{const v=!t&&o;return d.jsx(dt,{children:d.jsxs("div",{className:"flex w-fit flex-col gap-2 rounded-full border border-slate-600 bg-slate-800 p-2 shadow-2xl",children:[d.jsx(Et,{icon:d.jsx(ae,{icon:Vc,className:"h-4 w-4 text-green-400"}),color:"green",onClick:u,tooltip:"Complete Capture",dataTestID:"extensionCompleteRecordingButton"}),e===ce.PAUSED_RECORDING?d.jsx(Et,{icon:d.jsx(ae,{className:"h-4 w-4",style:{transform:"rotate(90deg)",paddingBottom:"2px"},icon:Uc}),onClick:c,tooltip:"Resume",dataTestID:"extensionResumeRecordingButton"}):d.jsx(Et,{icon:d.jsx(ae,{icon:qc,className:"h-4 w-4"}),onClick:c,tooltip:"Pause Capture",dataTestID:"extensionPauseRecordingButton"}),d.jsx(Et,{showTooltip:!r,showProTag:t,icon:d.jsx(ae,{icon:hr,className:"h-4 w-4"}),onClick:f,disabled:v,tooltip:d.jsx("span",{className:"flex items-center justify-center gap-1",children:v?Tl:"Smart Blur"}),dataTestID:"extensionSmartBlurMenuButton"}),d.jsx(Et,{showTooltip:!n,icon:d.jsx(ae,{icon:Gc,className:"h-4 w-4"}),onClick:i,tooltip:"Move Controls",setButtonRef:h,dataTestID:"extensionScreenPositionMenuButton"}),d.jsx(Et,{icon:d.jsx(ae,{icon:Wc,className:"h-4 w-4"}),color:"red",onClick:l,tooltip:"Delete Scribe",dataTestID:"extensionDeleteCurrentScribeMenuButton"})]})})},Uh=e=>s.createElement("svg",{width:22,height:18,viewBox:"0 0 22 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},s.createElement("rect",{y:10,width:10,height:8,rx:2,fill:"#C7D2FE"}),s.createElement("rect",{x:12.5,y:.5,width:9,height:7,rx:1.5,stroke:"#C7D2FE"}),s.createElement("rect",{x:12.5,y:10.5,width:9,height:7,rx:1.5,stroke:"#C7D2FE"}),s.createElement("rect",{x:.5,y:.5,width:9,height:7,rx:1.5,stroke:"#C7D2FE"})),qh=e=>s.createElement("svg",{width:22,height:18,viewBox:"0 0 22 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},s.createElement("rect",{y:10,width:10,height:8,rx:2,fill:"#818CF8"}),s.createElement("rect",{x:12.5,y:.5,width:9,height:7,rx:1.5,stroke:"#818CF8"}),s.createElement("rect",{x:12.5,y:10.5,width:9,height:7,rx:1.5,stroke:"#818CF8"}),s.createElement("rect",{x:.5,y:.5,width:9,height:7,rx:1.5,stroke:"#818CF8"}));function Gh({position:e,brighten:t=!1}){const n=e===be.TOP_RIGHT||e===be.BOTTOM_RIGHT,r=e===be.TOP_LEFT||e===be.TOP_RIGHT,o=t?Uh:qh;return d.jsx(o,{style:{transform:`scaleX(${n?-1:1}) scaleY(${r?-1:1})`}})}const Wh=({position:e,onClick:t,dataTestID:n=void 0})=>{const[r,o]=s.useState(!1);return d.jsx("button",{className:"relative flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border border-transparent bg-slate-300/10 p-0 hover:border-indigo-400 hover:border-indigo-400 hover:bg-indigo-600/30",onClick:t,onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},"data-testid":n,children:d.jsx(Gh,{position:e,brighten:r})})};function Xh({buttonOnClickMaker:e}){return d.jsx("div",{className:"flex w-fit gap-2 rounded-full border border-slate-600 bg-slate-800 p-2 shadow-2xl",children:Object.values(be).filter(t=>typeof t=="number").map(t=>d.jsx(Wh,{position:t,onClick:e?e(t):void 0,dataTestID:`extensionScreenPositionMenuButton-${be[t]}`},`screen-position-menu-button-${t}`))})}const Yh=e=>{const t=n=>`${n}px`;switch(e){case be.TOP_LEFT:return{indicator:{top:t(24),left:t(24)}};case be.TOP_RIGHT:return{indicator:{top:t(24),right:t(24)}};case be.BOTTOM_RIGHT:return{indicator:{bottom:t(24),right:t(24)}};case be.BOTTOM_LEFT:default:return{indicator:{bottom:t(24),left:t(24)}}}},fo=()=>{chrome.runtime.sendMessage({messageType:"closeStartingRecordingModal"})},Kh=2e3,Qh=({isPlanFree:e})=>{const{status:t}=re(Qo),n=re(Zo),{position:r,menuOpen:o,screenPositionMenuOpen:i,deleteScribeModalOpen:c}=re(Ko),{startingRecordingModalVisible:l,endRecordingWithCutoffVisible:u}=re(Jo),{recordAudio:f}=re(rn),{recordingControlsPreference:h}=re(rn),[v,w]=s.useState(!1),[j,b]=s.useState(null),[g,E]=s.useState(null),[T,I]=s.useState(!1),[O,a]=s.useState(null),[p,m]=s.useState(null),x=s.useRef(null),_=Yi(j,g,{placement:(()=>r===be.TOP_LEFT||r===be.TOP_RIGHT?"bottom":"top")(),modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{mainAxis:!1,altAxis:!1,tether:!1}},{name:"eventListeners",options:{scroll:!1,resize:!1}}]}),C=Yi(g,O,{modifiers:[{name:"offset",options:{offset:[24,8]}},{name:"flip",options:{fallbackPlacements:[]}},{name:"preventOverflow",options:{mainAxis:!1,altAxis:!1,tether:!1}},{name:"eventListeners",options:{scroll:!1,resize:!1}}]});s.useEffect(()=>{if(!l)return;const D=setTimeout(fo,Kh);return()=>clearTimeout(D)},[l]);const k=()=>{Y("recording_controls_button_press",{buttonName:o||l?"indicatorClosed":"indicatorOpened"}),chrome.runtime.sendMessage({messageType:"recordingControlsIndicatorPressed"})},S=()=>{Y("recording_controls_button_press",{buttonName:t===ce.PAUSED_RECORDING?"unpaused":"paused"}),chrome.runtime.sendMessage({messageType:"recordingControlsPausePressed"})},M=()=>{Y("recording_controls_button_press",{buttonName:"delete"}),chrome.runtime.sendMessage({messageType:"recordingControlsDeletePressed"})},R=()=>{Y("recording_controls_button_press",{buttonName:"deleteConfirm"}),chrome.runtime.sendMessage({messageType:"recordingControlsDeleteConfirmPressed"})},P=()=>{c&&(Y("recording_controls_button_press",{buttonName:"deleteCancel"}),chrome.runtime.sendMessage({messageType:"recordingControlsDeleteCancelPressed"}))},N=D=>{w(B=>{const q=D==="visible"||D==="toggle"&&!B;return iu().then(G=>{(q&&G.status===ce.RECORDING||!q&&G.status===ce.PAUSED_RECORDING)&&(S==null||S())}),q})};s.useEffect(()=>{const D=B=>{B.messageType==="toggleBlurControls"&&N("toggle")};return chrome.runtime.onMessage.addListener(D),()=>{chrome.runtime.onMessage.removeListener(D)}},[]);const y=()=>{Y("recording_controls_button_press",{buttonName:"completedRecording"}),chrome.runtime.sendMessage({messageType:"recordingCompletedPressed"})},A=()=>{Y("recording_controls_button_press",{buttonName:"screenPosition"}),chrome.runtime.sendMessage({messageType:"recordingControlsScreenPositionPressed"})},z=D=>()=>{Y("recording_controls_button_press",{buttonName:"screenPositionMenuButton",screenPosition:D}),chrome.runtime.sendMessage({messageType:"recordingControlsScreenPositionMenuButtonPressed",position:D})};if(u)return d.jsx(Ih,{});if(!n)return null;if(h==="none")return d.jsx(gs,{onClick:fo,modalRef:x,show:l});const F=h==="floating-button"&&(o||l),L=h==="floating-button";return d.jsxs(d.Fragment,{children:[c&&d.jsx(Rh,{onCancel:P,onDelete:R}),d.jsx(gs,{onClick:fo,modalRef:x,show:l}),d.jsx("div",{className:Ze("fixed h-screen w-screen",{"pointer-events-none":!o&&!v&&!i||T}),onClick:()=>{(o||v&&!T)&&chrome.runtime.sendMessage({messageType:"recordingControlsClickOutside"}),v&&!T&&N("hide"),i&&chrome.runtime.sendMessage({messageType:"recordingControlsScreenPositionMenuClickOutside"})},children:d.jsxs("div",{className:"pointer-events-auto absolute",style:Yh(r).indicator,onClick:D=>D.stopPropagation(),children:[h==="floating-button"&&d.jsx("div",{ref:b,children:d.jsx(Lh,{status:t,open:F,onClick:k})}),v&&d.jsx("div",{className:Ze({"fixed bottom-4 right-4":!L,"absolute bottom-0 left-[72px]":L&&r===be.BOTTOM_LEFT,"fixed bottom-4 left-4":L&&r!==be.BOTTOM_LEFT}),children:d.jsx($h,{onPrecisionBlurEnabledChange:D=>I(D)})}),d.jsx("div",{ref:a,style:C.styles.popper,...C.attributes.popper,children:i&&d.jsx(Xh,{buttonOnClickMaker:z})}),F&&d.jsx("div",{ref:E,style:_.styles.popper,..._.attributes.popper,children:d.jsx(Vh,{isPlanFree:e,status:t,screenPositionMenuOpen:i,blurControlsOpen:v,onChangeScreenPosition:()=>{N("hide"),A()},isRecordingAudio:f,onPause:S,onDelete:M,onComplete:y,onLiveBlur:()=>{N("toggle"),chrome.runtime.sendMessage({messageType:"recordingControlsScreenPositionClosed"})},screenPositionMenuButtonReference:p,screenPositionMenuButtonSetReference:m})})]})})]})},ws=e=>{try{const t=new URL(e);return t.search="",t.toString()}catch{return""}},ho=(e,t)=>{if(!e||!t)return!1;const n=ws(e),r=ws(t),o=l=>{try{return`${new URL(l).origin}`}catch{return l}},i=o(n),c=o(r);return i===c};var ys={},go={},bo={},lt={},vo={},xo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(xo);var X={},Xe=ie&&ie.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yt=ie&&ie.__assign||function(){return Yt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Yt.apply(this,arguments)};Object.defineProperty(X,"__esModule",{value:!0}),X.cloneNode=X.hasChildren=X.isDocument=X.isDirective=X.isComment=X.isText=X.isCDATA=X.isTag=X.Element=X.Document=X.CDATA=X.NodeWithChildren=X.ProcessingInstruction=X.Comment=X.Text=X.DataNode=X.Node=void 0;var we=xo,wo=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),yo(this,t)},e}();X.Node=wo;var On=function(e){Xe(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(wo);X.DataNode=On;var _s=function(e){Xe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=we.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(On);X.Text=_s;var ks=function(e){Xe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=we.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(On);X.Comment=ks;var Es=function(e){Xe(t,e);function t(n,r){var o=e.call(this,r)||this;return o.name=n,o.type=we.ElementType.Directive,o}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(On);X.ProcessingInstruction=Es;var Ln=function(e){Xe(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(wo);X.NodeWithChildren=Ln;var Cs=function(e){Xe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=we.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Ln);X.CDATA=Cs;var js=function(e){Xe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=we.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Ln);X.Document=js;var Ss=function(e){Xe(t,e);function t(n,r,o,i){o===void 0&&(o=[]),i===void 0&&(i=n==="script"?we.ElementType.Script:n==="style"?we.ElementType.Style:we.ElementType.Tag);var c=e.call(this,o)||this;return c.name=n,c.attribs=r,c.type=i,c}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var o,i;return{name:r,value:n.attribs[r],namespace:(o=n["x-attribsNamespace"])===null||o===void 0?void 0:o[r],prefix:(i=n["x-attribsPrefix"])===null||i===void 0?void 0:i[r]}})},enumerable:!1,configurable:!0}),t}(Ln);X.Element=Ss;function Ps(e){return(0,we.isTag)(e)}X.isTag=Ps;function Ts(e){return e.type===we.ElementType.CDATA}X.isCDATA=Ts;function Rs(e){return e.type===we.ElementType.Text}X.isText=Rs;function Is(e){return e.type===we.ElementType.Comment}X.isComment=Is;function Ns(e){return e.type===we.ElementType.Directive}X.isDirective=Ns;function Ms(e){return e.type===we.ElementType.Root}X.isDocument=Ms;function Zh(e){return Object.prototype.hasOwnProperty.call(e,"children")}X.hasChildren=Zh;function yo(e,t){t===void 0&&(t=!1);var n;if(Rs(e))n=new _s(e.data);else if(Is(e))n=new ks(e.data);else if(Ps(e)){var r=t?_o(e.children):[],o=new Ss(e.name,Yt({},e.attribs),r);r.forEach(function(u){return u.parent=o}),e.namespace!=null&&(o.namespace=e.namespace),e["x-attribsNamespace"]&&(o["x-attribsNamespace"]=Yt({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(o["x-attribsPrefix"]=Yt({},e["x-attribsPrefix"])),n=o}else if(Ts(e)){var r=t?_o(e.children):[],i=new Cs(r);r.forEach(function(f){return f.parent=i}),n=i}else if(Ms(e)){var r=t?_o(e.children):[],c=new js(r);r.forEach(function(f){return f.parent=c}),e["x-mode"]&&(c["x-mode"]=e["x-mode"]),n=c}else if(Ns(e)){var l=new Es(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}X.cloneNode=yo;function _o(e){for(var t=e.map(function(r){return yo(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ie&&ie.__createBinding||(Object.create?function(l,u,f,h){h===void 0&&(h=f);var v=Object.getOwnPropertyDescriptor(u,f);(!v||("get"in v?!u.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(l,h,v)}:function(l,u,f,h){h===void 0&&(h=f),l[h]=u[f]}),n=ie&&ie.__exportStar||function(l,u){for(var f in l)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&t(u,l,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=xo,o=X;n(X,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function l(u,f,h){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof f=="function"&&(h=f,f=i),typeof u=="object"&&(f=u,u=void 0),this.callback=u??null,this.options=f??i,this.elementCB=h??null}return l.prototype.onparserinit=function(u){this.parser=u},l.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(u){this.handleCallback(u)},l.prototype.onclosetag=function(){this.lastNode=null;var u=this.tagStack.pop();this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(u)},l.prototype.onopentag=function(u,f){var h=this.options.xmlMode?r.ElementType.Tag:void 0,v=new o.Element(u,f,void 0,h);this.addNode(v),this.tagStack.push(v)},l.prototype.ontext=function(u){var f=this.lastNode;if(f&&f.type===r.ElementType.Text)f.data+=u,this.options.withEndIndices&&(f.endIndex=this.parser.endIndex);else{var h=new o.Text(u);this.addNode(h),this.lastNode=h}},l.prototype.oncomment=function(u){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=u;return}var f=new o.Comment(u);this.addNode(f),this.lastNode=f},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var u=new o.Text(""),f=new o.CDATA([u]);this.addNode(f),u.parent=f,this.lastNode=u},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(u,f){var h=new o.ProcessingInstruction(u,f);this.addNode(h)},l.prototype.handleCallback=function(u){if(typeof this.callback=="function")this.callback(u,this.dom);else if(u)throw u},l.prototype.addNode=function(u){var f=this.tagStack[this.tagStack.length-1],h=f.children[f.children.length-1];this.options.withStartIndices&&(u.startIndex=this.parser.startIndex),this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),f.children.push(u),h&&(u.prev=h,h.next=u),u.parent=f,this.lastNode=null},l}();e.DomHandler=c,e.default=c})(vo);var As={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CARRIAGE_RETURN_PLACEHOLDER_REGEX=e.CARRIAGE_RETURN_PLACEHOLDER=e.CARRIAGE_RETURN_REGEX=e.CARRIAGE_RETURN=e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{}),e.CARRIAGE_RETURN="\r",e.CARRIAGE_RETURN_REGEX=new RegExp(e.CARRIAGE_RETURN,"g"),e.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),e.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(e.CARRIAGE_RETURN_PLACEHOLDER,"g")})(As),Object.defineProperty(lt,"__esModule",{value:!0}),lt.formatAttributes=Ds,lt.escapeSpecialCharacters=tg,lt.revertEscapedCharacters=Os,lt.formatDOM=Ls;var Fn=vo,Kt=As;function Jh(e){return Kt.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function Ds(e){for(var t={},n=0,r=e.length;n<r;n++){var o=e[n];t[o.name]=o.value}return t}function eg(e){e=e.toLowerCase();var t=Jh(e);return t||e}function tg(e){return e.replace(Kt.CARRIAGE_RETURN_REGEX,Kt.CARRIAGE_RETURN_PLACEHOLDER)}function Os(e){return e.replace(Kt.CARRIAGE_RETURN_PLACEHOLDER_REGEX,Kt.CARRIAGE_RETURN)}function Ls(e,t,n){t===void 0&&(t=null);for(var r=[],o,i=0,c=e.length;i<c;i++){var l=e[i];switch(l.nodeType){case 1:{var u=eg(l.nodeName);o=new Fn.Element(u,Ds(l.attributes)),o.children=Ls(u==="template"?l.content.childNodes:l.childNodes,o);break}case 3:o=new Fn.Text(Os(l.nodeValue));break;case 8:o=new Fn.Comment(l.nodeValue);break;default:continue}var f=r[i-1]||null;f&&(f.next=o),o.parent=t,o.prev=f,o.next=null,r.push(o)}return n&&(o=new Fn.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),o.next=r[0]||null,o.parent=t,r.unshift(o),r[1]&&(r[1].prev=r[0])),r}Object.defineProperty(bo,"__esModule",{value:!0}),bo.default=ig;var ng=lt,Fs="html",zs="head",zn="body",rg=/<([a-zA-Z]+[0-9]?)/,Bs=/<head[^]*>/i,Hs=/<body[^]*>/i,Bn=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},ko=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},$s=typeof window=="object"&&window.DOMParser;if(typeof $s=="function"){var og=new $s,ag="text/html";ko=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),og.parseFromString(e,ag)},Bn=ko}if(typeof document=="object"&&document.implementation){var Hn=document.implementation.createHTMLDocument();Bn=function(e,t){if(t){var n=Hn.documentElement.querySelector(t);return n&&(n.innerHTML=e),Hn}return Hn.documentElement.innerHTML=e,Hn}}var $n=typeof document=="object"&&document.createElement("template"),Eo;$n&&$n.content&&(Eo=function(e){return $n.innerHTML=e,$n.content.childNodes});function ig(e){var t,n;e=(0,ng.escapeSpecialCharacters)(e);var r=e.match(rg),o=r&&r[1]?r[1].toLowerCase():"";switch(o){case Fs:{var i=ko(e);if(!Bs.test(e)){var c=i.querySelector(zs);(t=c==null?void 0:c.parentNode)===null||t===void 0||t.removeChild(c)}if(!Hs.test(e)){var c=i.querySelector(zn);(n=c==null?void 0:c.parentNode)===null||n===void 0||n.removeChild(c)}return i.querySelectorAll(Fs)}case zs:case zn:{var l=Bn(e).querySelectorAll(o);return Hs.test(e)&&Bs.test(e)?l[0].parentNode.childNodes:l}default:{if(Eo)return Eo(e);var c=Bn(e,zn).querySelector(zn);return c.childNodes}}}var sg=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(go,"__esModule",{value:!0}),go.default=dg;var lg=sg(bo),cg=lt,ug=/<(![a-zA-Z\s]+)>/;function dg(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(ug),n=t?t[1]:void 0;return(0,cg.formatDOM)((0,lg.default)(e),null,n)}var Vn={},Me={},Un={},pg=0;Un.SAME=pg;var mg=1;Un.CAMELCASE=mg,Un.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const Vs=0,Ye=1,qn=2,Gn=3,Co=4,Us=5,qs=6;function fg(e){return le.hasOwnProperty(e)?le[e]:null}function ge(e,t,n,r,o,i,c){this.acceptsBooleans=t===qn||t===Gn||t===Co,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=c}const le={},hg=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];hg.forEach(e=>{le[e]=new ge(e,Vs,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{le[e]=new ge(e,Ye,!1,t,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(e=>{le[e]=new ge(e,qn,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{le[e]=new ge(e,qn,!1,e,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{le[e]=new ge(e,Gn,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(e=>{le[e]=new ge(e,Gn,!0,e,null,!1,!1)}),["capture","download"].forEach(e=>{le[e]=new ge(e,Co,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(e=>{le[e]=new ge(e,qs,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(e=>{le[e]=new ge(e,Us,!1,e.toLowerCase(),null,!1,!1)});const jo=/[\-\:]([a-z])/g,So=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(jo,So);le[t]=new ge(t,Ye,!1,e,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(jo,So);le[t]=new ge(t,Ye,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(jo,So);le[t]=new ge(t,Ye,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(e=>{le[e]=new ge(e,Ye,!1,e.toLowerCase(),null,!1,!1)});const gg="xlinkHref";le[gg]=new ge("xlinkHref",Ye,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(e=>{le[e]=new ge(e,Ye,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:bg,SAME:vg,possibleStandardNames:Gs}=Un,xg=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",wg=xg+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",yg=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+wg+"]*$")),_g=Object.keys(Gs).reduce((e,t)=>{const n=Gs[t];return n===vg?e[t]=t:n===bg?e[t.toLowerCase()]=t:e[t]=n,e},{});Me.BOOLEAN=Gn,Me.BOOLEANISH_STRING=qn,Me.NUMERIC=Us,Me.OVERLOADED_BOOLEAN=Co,Me.POSITIVE_NUMERIC=qs,Me.RESERVED=Vs,Me.STRING=Ye,Me.getPropertyInfo=fg,Me.isCustomAttribute=yg,Me.possibleStandardNames=_g;var Po={},To={},Ws=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,kg=/\n/g,Eg=/^\s*/,Cg=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,jg=/^:\s*/,Sg=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Pg=/^[;\s]*/,Tg=/^\s+|\s+$/g,Rg=`
`,Xs="/",Ys="*",ct="",Ig="comment",Ng="declaration",Mg=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function o(b){var g=b.match(kg);g&&(n+=g.length);var E=b.lastIndexOf(Rg);r=~E?b.length-E:r+b.length}function i(){var b={line:n,column:r};return function(g){return g.position=new c(b),f(),g}}function c(b){this.start=b,this.end={line:n,column:r},this.source=t.source}c.prototype.content=e;function l(b){var g=new Error(t.source+":"+n+":"+r+": "+b);if(g.reason=b,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function u(b){var g=b.exec(e);if(g){var E=g[0];return o(E),e=e.slice(E.length),g}}function f(){u(Eg)}function h(b){var g;for(b=b||[];g=v();)g!==!1&&b.push(g);return b}function v(){var b=i();if(!(Xs!=e.charAt(0)||Ys!=e.charAt(1))){for(var g=2;ct!=e.charAt(g)&&(Ys!=e.charAt(g)||Xs!=e.charAt(g+1));)++g;if(g+=2,ct===e.charAt(g-1))return l("End of comment missing");var E=e.slice(2,g-2);return r+=2,o(E),e=e.slice(g),r+=2,b({type:Ig,comment:E})}}function w(){var b=i(),g=u(Cg);if(g){if(v(),!u(jg))return l("property missing ':'");var E=u(Sg),T=b({type:Ng,property:Ks(g[0].replace(Ws,ct)),value:E?Ks(E[0].replace(Ws,ct)):ct});return u(Pg),T}}function j(){var b=[];h(b);for(var g;g=w();)g!==!1&&(b.push(g),h(b));return b}return f(),j()};function Ks(e){return e?e.replace(Tg,ct):ct}var Ag=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(To,"__esModule",{value:!0}),To.default=Og;var Dg=Ag(Mg);function Og(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Dg.default)(e),o=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var c=i.property,l=i.value;o?t(c,l,i):l&&(n=n||{},n[c]=l)}}),n}var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.camelCase=void 0;var Lg=/^--[a-zA-Z0-9_-]+$/,Fg=/-([a-z])/g,zg=/^[^-]+$/,Bg=/^-(webkit|moz|ms|o|khtml)-/,Hg=/^-(ms)-/,$g=function(e){return!e||zg.test(e)||Lg.test(e)},Vg=function(e,t){return t.toUpperCase()},Qs=function(e,t){return"".concat(t,"-")},Ug=function(e,t){return t===void 0&&(t={}),$g(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Hg,Qs):e=e.replace(Bg,Qs),e.replace(Fg,Vg))};Wn.camelCase=Ug;var qg=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Gg=qg(To),Wg=Wn;function Ro(e,t){var n={};return!e||typeof e!="string"||(0,Gg.default)(e,function(r,o){r&&o&&(n[(0,Wg.camelCase)(r,t)]=o)}),n}Ro.default=Ro;var Xg=Ro;(function(e){var t=ie&&ie.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=void 0,e.isCustomComponent=i,e.setStyleProp=l;var n=s,r=t(Xg),o=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function i(h,v){return h.includes("-")?!o.has(h):!!(v&&typeof v.is=="string")}var c={reactCompat:!0};function l(h,v){if(typeof h=="string"){if(!h.trim()){v.style={};return}try{v.style=(0,r.default)(h,c)}catch{v.style={}}}}e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var u=function(h){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(h.name)};e.canTextBeChildOfNode=u;var f=function(h){return h};e.returnFirstArg=f})(Po),Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.default=Zg;var Qt=Me,Zs=Po,Yg=["checked","value"],Kg=["input","select","textarea"],Qg={reset:!0,submit:!0};function Zg(e,t){e===void 0&&(e={});var n={},r=!!(e.type&&Qg[e.type]);for(var o in e){var i=e[o];if((0,Qt.isCustomAttribute)(o)){n[o]=i;continue}var c=o.toLowerCase(),l=Js(c);if(l){var u=(0,Qt.getPropertyInfo)(l);switch(Yg.includes(l)&&Kg.includes(t)&&!r&&(l=Js("default"+c)),n[l]=i,u&&u.type){case Qt.BOOLEAN:n[l]=!0;break;case Qt.OVERLOADED_BOOLEAN:i===""&&(n[l]=!0);break}continue}Zs.PRESERVE_CUSTOM_ATTRIBUTES&&(n[o]=i)}return(0,Zs.setStyleProp)(e.style,n),n}function Js(e){return Qt.possibleStandardNames[e]}var Io={},Jg=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Io,"__esModule",{value:!0}),Io.default=el;var No=s,eb=Jg(Vn),Zt=Po,tb={cloneElement:No.cloneElement,createElement:No.createElement,isValidElement:No.isValidElement};function el(e,t){t===void 0&&(t={});for(var n=[],r=typeof t.replace=="function",o=t.transform||Zt.returnFirstArg,i=t.library||tb,c=i.cloneElement,l=i.createElement,u=i.isValidElement,f=e.length,h=0;h<f;h++){var v=e[h];if(r){var w=t.replace(v,h);if(u(w)){f>1&&(w=c(w,{key:w.key||h})),n.push(o(w,v,h));continue}}if(v.type==="text"){var j=!v.data.trim().length;if(j&&v.parent&&!(0,Zt.canTextBeChildOfNode)(v.parent)||t.trim&&j)continue;n.push(o(v.data,v,h));continue}var b=v,g={};nb(b)?((0,Zt.setStyleProp)(b.attribs.style,b.attribs),g=b.attribs):b.attribs&&(g=(0,eb.default)(b.attribs,b.name));var E=void 0;switch(v.type){case"script":case"style":v.children[0]&&(g.dangerouslySetInnerHTML={__html:v.children[0].data});break;case"tag":v.name==="textarea"&&v.children[0]?g.defaultValue=v.children[0].data:v.children&&v.children.length&&(E=el(v.children,t));break;default:continue}f>1&&(g.key=h),n.push(o(l(v.name,g,E),v,h))}return n.length===1?n[0]:n}function nb(e){return Zt.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,Zt.isCustomComponent)(e.name,e.attribs)}(function(e){var t=ie&&ie.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0,e.default=l;var n=t(go);e.htmlToDOM=n.default;var r=t(Vn);e.attributesToProps=r.default;var o=t(Io);e.domToReact=o.default;var i=vo;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return i.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return i.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return i.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i.Text}});var c={lowerCaseAttributeNames:!1};function l(u,f){if(typeof u!="string")throw new TypeError("First argument must be a string");return u?(0,o.default)((0,n.default)(u,(f==null?void 0:f.htmlparser2)||c),f):[]}})(ys);const tl=gr(ys),Xn=tl.default||tl;var nl={exports:{}};(function(e){(function(){function t(a){var p={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(a===!1)return JSON.parse(JSON.stringify(p));var m={};for(var x in p)p.hasOwnProperty(x)&&(m[x]=p[x].defaultValue);return m}function n(){var a=t(!0),p={};for(var m in a)a.hasOwnProperty(m)&&(p[m]=!0);return p}var r={},o={},i={},c=t(!0),l="vanilla",u={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(a,p){return c[a]=p,this},r.getOption=function(a){return c[a]},r.getOptions=function(){return c},r.resetOptions=function(){c=t(!0)},r.setFlavor=function(a){if(!u.hasOwnProperty(a))throw Error(a+" flavor was not found");r.resetOptions();var p=u[a];l=a;for(var m in p)p.hasOwnProperty(m)&&(c[m]=p[m])},r.getFlavor=function(){return l},r.getFlavorOptions=function(a){if(u.hasOwnProperty(a))return u[a]},r.getDefaultOptions=function(a){return t(a)},r.subParser=function(a,p){if(r.helper.isString(a))if(typeof p<"u")o[a]=p;else{if(o.hasOwnProperty(a))return o[a];throw Error("SubParser named "+a+" not registered!")}},r.extension=function(a,p){if(!r.helper.isString(a))throw Error("Extension 'name' must be a string");if(a=r.helper.stdExtName(a),r.helper.isUndefined(p)){if(!i.hasOwnProperty(a))throw Error("Extension named "+a+" is not registered!");return i[a]}else{typeof p=="function"&&(p=p()),r.helper.isArray(p)||(p=[p]);var m=f(p,a);if(m.valid)i[a]=p;else throw Error(m.error)}},r.getAllExtensions=function(){return i},r.removeExtension=function(a){delete i[a]},r.resetExtensions=function(){i={}};function f(a,p){var m=p?"Error in "+p+" extension->":"Error in unnamed extension",x={valid:!0,error:""};r.helper.isArray(a)||(a=[a]);for(var _=0;_<a.length;++_){var C=m+" sub-extension "+_+": ",k=a[_];if(typeof k!="object")return x.valid=!1,x.error=C+"must be an object, but "+typeof k+" given",x;if(!r.helper.isString(k.type))return x.valid=!1,x.error=C+'property "type" must be a string, but '+typeof k.type+" given",x;var S=k.type=k.type.toLowerCase();if(S==="language"&&(S=k.type="lang"),S==="html"&&(S=k.type="output"),S!=="lang"&&S!=="output"&&S!=="listener")return x.valid=!1,x.error=C+"type "+S+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',x;if(S==="listener"){if(r.helper.isUndefined(k.listeners))return x.valid=!1,x.error=C+'. Extensions of type "listener" must have a property called "listeners"',x}else if(r.helper.isUndefined(k.filter)&&r.helper.isUndefined(k.regex))return x.valid=!1,x.error=C+S+' extensions must define either a "regex" property or a "filter" method',x;if(k.listeners){if(typeof k.listeners!="object")return x.valid=!1,x.error=C+'"listeners" property must be an object but '+typeof k.listeners+" given",x;for(var M in k.listeners)if(k.listeners.hasOwnProperty(M)&&typeof k.listeners[M]!="function")return x.valid=!1,x.error=C+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+M+" must be a function but "+typeof k.listeners[M]+" given",x}if(k.filter){if(typeof k.filter!="function")return x.valid=!1,x.error=C+'"filter" must be a function, but '+typeof k.filter+" given",x}else if(k.regex){if(r.helper.isString(k.regex)&&(k.regex=new RegExp(k.regex,"g")),!(k.regex instanceof RegExp))return x.valid=!1,x.error=C+'"regex" property must either be a string or a RegExp object, but '+typeof k.regex+" given",x;if(r.helper.isUndefined(k.replace))return x.valid=!1,x.error=C+'"regex" extensions must implement a replace string or function',x}}return x}r.validateExtension=function(a){var p=f(a,null);return p.valid?!0:(console.warn(p.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(a){return typeof a=="string"||a instanceof String},r.helper.isFunction=function(a){var p={};return a&&p.toString.call(a)==="[object Function]"},r.helper.isArray=function(a){return Array.isArray(a)},r.helper.isUndefined=function(a){return typeof a>"u"},r.helper.forEach=function(a,p){if(r.helper.isUndefined(a))throw new Error("obj param is required");if(r.helper.isUndefined(p))throw new Error("callback param is required");if(!r.helper.isFunction(p))throw new Error("callback param must be a function/closure");if(typeof a.forEach=="function")a.forEach(p);else if(r.helper.isArray(a))for(var m=0;m<a.length;m++)p(a[m],m,a);else if(typeof a=="object")for(var x in a)a.hasOwnProperty(x)&&p(a[x],x,a);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(a){return a.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function h(a,p){var m=p.charCodeAt(0);return"\xA8E"+m+"E"}r.helper.escapeCharactersCallback=h,r.helper.escapeCharacters=function(a,p,m){var x="(["+p.replace(/([\[\]\\])/g,"\\$1")+"])";m&&(x="\\\\"+x);var _=new RegExp(x,"g");return a=a.replace(_,h),a},r.helper.unescapeHTMLEntities=function(a){return a.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var v=function(a,p,m,x){var _=x||"",C=_.indexOf("g")>-1,k=new RegExp(p+"|"+m,"g"+_.replace(/g/g,"")),S=new RegExp(p,_.replace(/g/g,"")),M=[],R,P,N,y,A;do for(R=0;N=k.exec(a);)if(S.test(N[0]))R++||(P=k.lastIndex,y=P-N[0].length);else if(R&&!--R){A=N.index+N[0].length;var z={left:{start:y,end:P},match:{start:P,end:N.index},right:{start:N.index,end:A},wholeMatch:{start:y,end:A}};if(M.push(z),!C)return M}while(R&&(k.lastIndex=P));return M};r.helper.matchRecursiveRegExp=function(a,p,m,x){for(var _=v(a,p,m,x),C=[],k=0;k<_.length;++k)C.push([a.slice(_[k].wholeMatch.start,_[k].wholeMatch.end),a.slice(_[k].match.start,_[k].match.end),a.slice(_[k].left.start,_[k].left.end),a.slice(_[k].right.start,_[k].right.end)]);return C},r.helper.replaceRecursiveRegExp=function(a,p,m,x,_){if(!r.helper.isFunction(p)){var C=p;p=function(){return C}}var k=v(a,m,x,_),S=a,M=k.length;if(M>0){var R=[];k[0].wholeMatch.start!==0&&R.push(a.slice(0,k[0].wholeMatch.start));for(var P=0;P<M;++P)R.push(p(a.slice(k[P].wholeMatch.start,k[P].wholeMatch.end),a.slice(k[P].match.start,k[P].match.end),a.slice(k[P].left.start,k[P].left.end),a.slice(k[P].right.start,k[P].right.end))),P<M-1&&R.push(a.slice(k[P].wholeMatch.end,k[P+1].wholeMatch.start));k[M-1].wholeMatch.end<a.length&&R.push(a.slice(k[M-1].wholeMatch.end)),S=R.join("")}return S},r.helper.regexIndexOf=function(a,p,m){if(!r.helper.isString(a))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(p instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var x=a.substring(m||0).search(p);return x>=0?x+(m||0):x},r.helper.splitAtIndex=function(a,p){if(!r.helper.isString(a))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[a.substring(0,p),a.substring(p)]},r.helper.encodeEmailAddress=function(a){var p=[function(m){return"&#"+m.charCodeAt(0)+";"},function(m){return"&#x"+m.charCodeAt(0).toString(16)+";"},function(m){return m}];return a=a.replace(/./g,function(m){if(m==="@")m=p[Math.floor(Math.random()*2)](m);else{var x=Math.random();m=x>.9?p[2](m):x>.45?p[1](m):p[0](m)}return m}),a},r.helper.padEnd=function(a,p,m){return p=p>>0,m=String(m||" "),a.length>p?String(a):(p=p-a.length,p>m.length&&(m+=m.repeat(p/m.length)),String(a)+m.slice(0,p))},typeof console>"u"&&(console={warn:function(a){alert(a)},log:function(a){alert(a)},error:function(a){throw a}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(a){var p={},m=[],x=[],_={},C=l,k={parsed:{},raw:"",format:""};S();function S(){a=a||{};for(var y in c)c.hasOwnProperty(y)&&(p[y]=c[y]);if(typeof a=="object")for(var A in a)a.hasOwnProperty(A)&&(p[A]=a[A]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof a+" was passed instead.");p.extensions&&r.helper.forEach(p.extensions,M)}function M(y,A){if(A=A||null,r.helper.isString(y))if(y=r.helper.stdExtName(y),A=y,r.extensions[y]){console.warn("DEPRECATION WARNING: "+y+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),R(r.extensions[y],y);return}else if(!r.helper.isUndefined(i[y]))y=i[y];else throw Error('Extension "'+y+'" could not be loaded. It was either not found or is not a valid extension.');typeof y=="function"&&(y=y()),r.helper.isArray(y)||(y=[y]);var z=f(y,A);if(!z.valid)throw Error(z.error);for(var F=0;F<y.length;++F){switch(y[F].type){case"lang":m.push(y[F]);break;case"output":x.push(y[F]);break}if(y[F].hasOwnProperty("listeners"))for(var L in y[F].listeners)y[F].listeners.hasOwnProperty(L)&&P(L,y[F].listeners[L])}}function R(y,A){typeof y=="function"&&(y=y(new r.Converter)),r.helper.isArray(y)||(y=[y]);var z=f(y,A);if(!z.valid)throw Error(z.error);for(var F=0;F<y.length;++F)switch(y[F].type){case"lang":m.push(y[F]);break;case"output":x.push(y[F]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function P(y,A){if(!r.helper.isString(y))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof y+" given");if(typeof A!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof A+" given");_.hasOwnProperty(y)||(_[y]=[]),_[y].push(A)}function N(y){var A=y.match(/^\s*/)[0].length,z=new RegExp("^\\s{0,"+A+"}","gm");return y.replace(z,"")}this._dispatch=function(y,A,z,F){if(_.hasOwnProperty(y))for(var L=0;L<_[y].length;++L){var D=_[y][L](y,A,this,z,F);D&&typeof D<"u"&&(A=D)}return A},this.listen=function(y,A){return P(y,A),this},this.makeHtml=function(y){if(!y)return y;var A={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:m,outputModifiers:x,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return y=y.replace(//g,"\xA8T"),y=y.replace(/\$/g,"\xA8D"),y=y.replace(/\r\n/g,`
`),y=y.replace(/\r/g,`
`),y=y.replace(/\u00A0/g,"&nbsp;"),p.smartIndentationFix&&(y=N(y)),y=`

`+y+`

`,y=r.subParser("detab")(y,p,A),y=y.replace(/^[ \t]+$/mg,""),r.helper.forEach(m,function(z){y=r.subParser("runExtension")(z,y,p,A)}),y=r.subParser("metadata")(y,p,A),y=r.subParser("hashPreCodeTags")(y,p,A),y=r.subParser("githubCodeBlocks")(y,p,A),y=r.subParser("hashHTMLBlocks")(y,p,A),y=r.subParser("hashCodeTags")(y,p,A),y=r.subParser("stripLinkDefinitions")(y,p,A),y=r.subParser("blockGamut")(y,p,A),y=r.subParser("unhashHTMLSpans")(y,p,A),y=r.subParser("unescapeSpecialChars")(y,p,A),y=y.replace(/D/g,"$$"),y=y.replace(/T/g,"\xA8"),y=r.subParser("completeHTMLDocument")(y,p,A),r.helper.forEach(x,function(z){y=r.subParser("runExtension")(z,y,p,A)}),k=A.metadata,y},this.makeMarkdown=this.makeMd=function(y,A){if(y=y.replace(/\r\n/g,`
`),y=y.replace(/\r/g,`
`),y=y.replace(/>[ \t]+</,">\xA8NBSP;<"),!A)if(window&&window.document)A=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var z=A.createElement("div");z.innerHTML=y;var F={preList:G(z)};q(z);for(var L=z.childNodes,D="",B=0;B<L.length;B++)D+=r.subParser("makeMarkdown.node")(L[B],F);function q(W){for(var ne=0;ne<W.childNodes.length;++ne){var J=W.childNodes[ne];J.nodeType===3?!/\S/.test(J.nodeValue)&&!/^[ ]+$/.test(J.nodeValue)?(W.removeChild(J),--ne):(J.nodeValue=J.nodeValue.split(`
`).join(" "),J.nodeValue=J.nodeValue.replace(/(\s)+/g,"$1")):J.nodeType===1&&q(J)}}function G(W){for(var ne=W.querySelectorAll("pre"),J=[],ee=0;ee<ne.length;++ee)if(ne[ee].childElementCount===1&&ne[ee].firstChild.tagName.toLowerCase()==="code"){var Ve=ne[ee].firstChild.innerHTML.trim(),Ue=ne[ee].firstChild.getAttribute("data-language")||"";if(Ue==="")for(var ut=ne[ee].firstChild.className.split(" "),Ct=0;Ct<ut.length;++Ct){var jt=ut[Ct].match(/^language-(.+)$/);if(jt!==null){Ue=jt[1];break}}Ve=r.helper.unescapeHTMLEntities(Ve),J.push(Ve),ne[ee].outerHTML='<precode language="'+Ue+'" precodenum="'+ee.toString()+'"></precode>'}else J.push(ne[ee].innerHTML),ne[ee].innerHTML="",ne[ee].setAttribute("prenum",ee.toString());return J}return D},this.setOption=function(y,A){p[y]=A},this.getOption=function(y){return p[y]},this.getOptions=function(){return p},this.addExtension=function(y,A){A=A||null,M(y,A)},this.useExtension=function(y){M(y)},this.setFlavor=function(y){if(!u.hasOwnProperty(y))throw Error(y+" flavor was not found");var A=u[y];C=y;for(var z in A)A.hasOwnProperty(z)&&(p[z]=A[z])},this.getFlavor=function(){return C},this.removeExtension=function(y){r.helper.isArray(y)||(y=[y]);for(var A=0;A<y.length;++A){for(var z=y[A],F=0;F<m.length;++F)m[F]===z&&m.splice(F,1);for(var L=0;L<x.length;++L)x[L]===z&&x.splice(L,1)}},this.getAllExtensions=function(){return{language:m,output:x}},this.getMetadata=function(y){return y?k.raw:k.parsed},this.getMetadataFormat=function(){return k.format},this._setMetadataPair=function(y,A){k.parsed[y]=A},this._setMetadataFormat=function(y){k.format=y},this._setMetadataRaw=function(y){k.raw=y}},r.subParser("anchors",function(a,p,m){a=m.converter._dispatch("anchors.before",a,p,m);var x=function(_,C,k,S,M,R,P){if(r.helper.isUndefined(P)&&(P=""),k=k.toLowerCase(),_.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)S="";else if(!S)if(k||(k=C.toLowerCase().replace(/ ?\n/g," ")),S="#"+k,!r.helper.isUndefined(m.gUrls[k]))S=m.gUrls[k],r.helper.isUndefined(m.gTitles[k])||(P=m.gTitles[k]);else return _;S=S.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var N='<a href="'+S+'"';return P!==""&&P!==null&&(P=P.replace(/"/g,"&quot;"),P=P.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),N+=' title="'+P+'"'),p.openLinksInNewWindow&&!/^#/.test(S)&&(N+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),N+=">"+C+"</a>",N};return a=a.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,x),a=a.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,x),a=a.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,x),a=a.replace(/\[([^\[\]]+)]()()()()()/g,x),p.ghMentions&&(a=a.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(_,C,k,S,M){if(k==="\\")return C+S;if(!r.helper.isString(p.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var R=p.ghMentionsLink.replace(/\{u}/g,M),P="";return p.openLinksInNewWindow&&(P=' rel="noopener noreferrer" target="\xA8E95Eblank"'),C+'<a href="'+R+'"'+P+">"+S+"</a>"})),a=m.converter._dispatch("anchors.after",a,p,m),a});var w=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,j=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,b=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,g=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,E=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,T=function(a){return function(p,m,x,_,C,k,S){x=x.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var M=x,R="",P="",N=m||"",y=S||"";return/^www\./i.test(x)&&(x=x.replace(/^www\./i,"http://www.")),a.excludeTrailingPunctuationFromURLs&&k&&(R=k),a.openLinksInNewWindow&&(P=' rel="noopener noreferrer" target="\xA8E95Eblank"'),N+'<a href="'+x+'"'+P+">"+M+"</a>"+R+y}},I=function(a,p){return function(m,x,_){var C="mailto:";return x=x||"",_=r.subParser("unescapeSpecialChars")(_,a,p),a.encodeEmails?(C=r.helper.encodeEmailAddress(C+_),_=r.helper.encodeEmailAddress(_)):C=C+_,x+'<a href="'+C+'">'+_+"</a>"}};r.subParser("autoLinks",function(a,p,m){return a=m.converter._dispatch("autoLinks.before",a,p,m),a=a.replace(b,T(p)),a=a.replace(E,I(p,m)),a=m.converter._dispatch("autoLinks.after",a,p,m),a}),r.subParser("simplifiedAutoLinks",function(a,p,m){return p.simplifiedAutoLink&&(a=m.converter._dispatch("simplifiedAutoLinks.before",a,p,m),p.excludeTrailingPunctuationFromURLs?a=a.replace(j,T(p)):a=a.replace(w,T(p)),a=a.replace(g,I(p,m)),a=m.converter._dispatch("simplifiedAutoLinks.after",a,p,m)),a}),r.subParser("blockGamut",function(a,p,m){return a=m.converter._dispatch("blockGamut.before",a,p,m),a=r.subParser("blockQuotes")(a,p,m),a=r.subParser("headers")(a,p,m),a=r.subParser("horizontalRule")(a,p,m),a=r.subParser("lists")(a,p,m),a=r.subParser("codeBlocks")(a,p,m),a=r.subParser("tables")(a,p,m),a=r.subParser("hashHTMLBlocks")(a,p,m),a=r.subParser("paragraphs")(a,p,m),a=m.converter._dispatch("blockGamut.after",a,p,m),a}),r.subParser("blockQuotes",function(a,p,m){a=m.converter._dispatch("blockQuotes.before",a,p,m),a=a+`

`;var x=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return p.splitAdjacentBlockquotes&&(x=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),a=a.replace(x,function(_){return _=_.replace(/^[ \t]*>[ \t]?/gm,""),_=_.replace(/0/g,""),_=_.replace(/^[ \t]+$/gm,""),_=r.subParser("githubCodeBlocks")(_,p,m),_=r.subParser("blockGamut")(_,p,m),_=_.replace(/(^|\n)/g,"$1  "),_=_.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(C,k){var S=k;return S=S.replace(/^  /mg,"\xA80"),S=S.replace(/0/g,""),S}),r.subParser("hashBlock")(`<blockquote>
`+_+`
</blockquote>`,p,m)}),a=m.converter._dispatch("blockQuotes.after",a,p,m),a}),r.subParser("codeBlocks",function(a,p,m){a=m.converter._dispatch("codeBlocks.before",a,p,m),a+="\xA80";var x=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return a=a.replace(x,function(_,C,k){var S=C,M=k,R=`
`;return S=r.subParser("outdent")(S,p,m),S=r.subParser("encodeCode")(S,p,m),S=r.subParser("detab")(S,p,m),S=S.replace(/^\n+/g,""),S=S.replace(/\n+$/g,""),p.omitExtraWLInCodeBlocks&&(R=""),S="<pre><code>"+S+R+"</code></pre>",r.subParser("hashBlock")(S,p,m)+M}),a=a.replace(/0/,""),a=m.converter._dispatch("codeBlocks.after",a,p,m),a}),r.subParser("codeSpans",function(a,p,m){return a=m.converter._dispatch("codeSpans.before",a,p,m),typeof a>"u"&&(a=""),a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(x,_,C,k){var S=k;return S=S.replace(/^([ \t]*)/g,""),S=S.replace(/[ \t]*$/g,""),S=r.subParser("encodeCode")(S,p,m),S=_+"<code>"+S+"</code>",S=r.subParser("hashHTMLSpans")(S,p,m),S}),a=m.converter._dispatch("codeSpans.after",a,p,m),a}),r.subParser("completeHTMLDocument",function(a,p,m){if(!p.completeHTMLDocument)return a;a=m.converter._dispatch("completeHTMLDocument.before",a,p,m);var x="html",_=`<!DOCTYPE HTML>
`,C="",k=`<meta charset="utf-8">
`,S="",M="";typeof m.metadata.parsed.doctype<"u"&&(_="<!DOCTYPE "+m.metadata.parsed.doctype+`>
`,x=m.metadata.parsed.doctype.toString().toLowerCase(),(x==="html"||x==="html5")&&(k='<meta charset="utf-8">'));for(var R in m.metadata.parsed)if(m.metadata.parsed.hasOwnProperty(R))switch(R.toLowerCase()){case"doctype":break;case"title":C="<title>"+m.metadata.parsed.title+`</title>
`;break;case"charset":x==="html"||x==="html5"?k='<meta charset="'+m.metadata.parsed.charset+`">
`:k='<meta name="charset" content="'+m.metadata.parsed.charset+`">
`;break;case"language":case"lang":S=' lang="'+m.metadata.parsed[R]+'"',M+='<meta name="'+R+'" content="'+m.metadata.parsed[R]+`">
`;break;default:M+='<meta name="'+R+'" content="'+m.metadata.parsed[R]+`">
`}return a=_+"<html"+S+`>
<head>
`+C+k+M+`</head>
<body>
`+a.trim()+`
</body>
</html>`,a=m.converter._dispatch("completeHTMLDocument.after",a,p,m),a}),r.subParser("detab",function(a,p,m){return a=m.converter._dispatch("detab.before",a,p,m),a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"\xA8A\xA8B"),a=a.replace(/B(.+?)A/g,function(x,_){for(var C=_,k=4-C.length%4,S=0;S<k;S++)C+=" ";return C}),a=a.replace(/A/g,"    "),a=a.replace(/B/g,""),a=m.converter._dispatch("detab.after",a,p,m),a}),r.subParser("ellipsis",function(a,p,m){return p.ellipsis&&(a=m.converter._dispatch("ellipsis.before",a,p,m),a=a.replace(/\.\.\./g,"\u2026"),a=m.converter._dispatch("ellipsis.after",a,p,m)),a}),r.subParser("emoji",function(a,p,m){if(!p.emoji)return a;a=m.converter._dispatch("emoji.before",a,p,m);var x=/:([\S]+?):/g;return a=a.replace(x,function(_,C){return r.helper.emojis.hasOwnProperty(C)?r.helper.emojis[C]:_}),a=m.converter._dispatch("emoji.after",a,p,m),a}),r.subParser("encodeAmpsAndAngles",function(a,p,m){return a=m.converter._dispatch("encodeAmpsAndAngles.before",a,p,m),a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?$!])/gi,"&lt;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=m.converter._dispatch("encodeAmpsAndAngles.after",a,p,m),a}),r.subParser("encodeBackslashEscapes",function(a,p,m){return a=m.converter._dispatch("encodeBackslashEscapes.before",a,p,m),a=a.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),a=a.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),a=m.converter._dispatch("encodeBackslashEscapes.after",a,p,m),a}),r.subParser("encodeCode",function(a,p,m){return a=m.converter._dispatch("encodeCode.before",a,p,m),a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),a=m.converter._dispatch("encodeCode.after",a,p,m),a}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(a,p,m){a=m.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",a,p,m);var x=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,_=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return a=a.replace(x,function(C){return C.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),a=a.replace(_,function(C){return C.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),a=m.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",a,p,m),a}),r.subParser("githubCodeBlocks",function(a,p,m){return p.ghCodeBlocks?(a=m.converter._dispatch("githubCodeBlocks.before",a,p,m),a+="\xA80",a=a.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(x,_,C,k){var S=p.omitExtraWLInCodeBlocks?"":`
`;return k=r.subParser("encodeCode")(k,p,m),k=r.subParser("detab")(k,p,m),k=k.replace(/^\n+/g,""),k=k.replace(/\n+$/g,""),k="<pre><code"+(C?' class="'+C+" language-"+C+'"':"")+">"+k+S+"</code></pre>",k=r.subParser("hashBlock")(k,p,m),`

\xA8G`+(m.ghCodeBlocks.push({text:x,codeblock:k})-1)+`G

`}),a=a.replace(/0/,""),m.converter._dispatch("githubCodeBlocks.after",a,p,m)):a}),r.subParser("hashBlock",function(a,p,m){return a=m.converter._dispatch("hashBlock.before",a,p,m),a=a.replace(/(^\n+|\n+$)/g,""),a=`

\xA8K`+(m.gHtmlBlocks.push(a)-1)+`K

`,a=m.converter._dispatch("hashBlock.after",a,p,m),a}),r.subParser("hashCodeTags",function(a,p,m){a=m.converter._dispatch("hashCodeTags.before",a,p,m);var x=function(_,C,k,S){var M=k+r.subParser("encodeCode")(C,p,m)+S;return"\xA8C"+(m.gHtmlSpans.push(M)-1)+"C"};return a=r.helper.replaceRecursiveRegExp(a,x,"<code\\b[^>]*>","</code>","gim"),a=m.converter._dispatch("hashCodeTags.after",a,p,m),a}),r.subParser("hashElement",function(a,p,m){return function(x,_){var C=_;return C=C.replace(/\n\n/g,`
`),C=C.replace(/^\n/,""),C=C.replace(/\n+$/g,""),C=`

\xA8K`+(m.gHtmlBlocks.push(C)-1)+`K

`,C}}),r.subParser("hashHTMLBlocks",function(a,p,m){a=m.converter._dispatch("hashHTMLBlocks.before",a,p,m);var x=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],_=function(y,A,z,F){var L=y;return z.search(/\bmarkdown\b/)!==-1&&(L=z+m.converter.makeHtml(A)+F),`

\xA8K`+(m.gHtmlBlocks.push(L)-1)+`K

`};p.backslashEscapesHTMLTags&&(a=a.replace(/\\<(\/?[^>]+?)>/g,function(y,A){return"&lt;"+A+"&gt;"}));for(var C=0;C<x.length;++C)for(var k,S=new RegExp("^ {0,3}(<"+x[C]+"\\b[^>]*>)","im"),M="<"+x[C]+"\\b[^>]*>",R="</"+x[C]+">";(k=r.helper.regexIndexOf(a,S))!==-1;){var P=r.helper.splitAtIndex(a,k),N=r.helper.replaceRecursiveRegExp(P[1],_,M,R,"im");if(N===P[1])break;a=P[0].concat(N)}return a=a.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(a,p,m)),a=r.helper.replaceRecursiveRegExp(a,function(y){return`

\xA8K`+(m.gHtmlBlocks.push(y)-1)+`K

`},"^ {0,3}<!--","-->","gm"),a=a.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(a,p,m)),a=m.converter._dispatch("hashHTMLBlocks.after",a,p,m),a}),r.subParser("hashHTMLSpans",function(a,p,m){a=m.converter._dispatch("hashHTMLSpans.before",a,p,m);function x(_){return"\xA8C"+(m.gHtmlSpans.push(_)-1)+"C"}return a=a.replace(/<[^>]+?\/>/gi,function(_){return x(_)}),a=a.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(_){return x(_)}),a=a.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(_){return x(_)}),a=a.replace(/<[^>]+?>/gi,function(_){return x(_)}),a=m.converter._dispatch("hashHTMLSpans.after",a,p,m),a}),r.subParser("unhashHTMLSpans",function(a,p,m){a=m.converter._dispatch("unhashHTMLSpans.before",a,p,m);for(var x=0;x<m.gHtmlSpans.length;++x){for(var _=m.gHtmlSpans[x],C=0;/C(\d+)C/.test(_);){var k=RegExp.$1;if(_=_.replace("\xA8C"+k+"C",m.gHtmlSpans[k]),C===10){console.error("maximum nesting of 10 spans reached!!!");break}++C}a=a.replace("\xA8C"+x+"C",_)}return a=m.converter._dispatch("unhashHTMLSpans.after",a,p,m),a}),r.subParser("hashPreCodeTags",function(a,p,m){a=m.converter._dispatch("hashPreCodeTags.before",a,p,m);var x=function(_,C,k,S){var M=k+r.subParser("encodeCode")(C,p,m)+S;return`

\xA8G`+(m.ghCodeBlocks.push({text:_,codeblock:M})-1)+`G

`};return a=r.helper.replaceRecursiveRegExp(a,x,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),a=m.converter._dispatch("hashPreCodeTags.after",a,p,m),a}),r.subParser("headers",function(a,p,m){a=m.converter._dispatch("headers.before",a,p,m);var x=isNaN(parseInt(p.headerLevelStart))?1:parseInt(p.headerLevelStart),_=p.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,C=p.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;a=a.replace(_,function(M,R){var P=r.subParser("spanGamut")(R,p,m),N=p.noHeaderId?"":' id="'+S(R)+'"',y=x,A="<h"+y+N+">"+P+"</h"+y+">";return r.subParser("hashBlock")(A,p,m)}),a=a.replace(C,function(M,R){var P=r.subParser("spanGamut")(R,p,m),N=p.noHeaderId?"":' id="'+S(R)+'"',y=x+1,A="<h"+y+N+">"+P+"</h"+y+">";return r.subParser("hashBlock")(A,p,m)});var k=p.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;a=a.replace(k,function(M,R,P){var N=P;p.customizedHeaderId&&(N=P.replace(/\s?\{([^{]+?)}\s*$/,""));var y=r.subParser("spanGamut")(N,p,m),A=p.noHeaderId?"":' id="'+S(P)+'"',z=x-1+R.length,F="<h"+z+A+">"+y+"</h"+z+">";return r.subParser("hashBlock")(F,p,m)});function S(M){var R,P;if(p.customizedHeaderId){var N=M.match(/\{([^{]+?)}\s*$/);N&&N[1]&&(M=N[1])}return R=M,r.helper.isString(p.prefixHeaderId)?P=p.prefixHeaderId:p.prefixHeaderId===!0?P="section-":P="",p.rawPrefixHeaderId||(R=P+R),p.ghCompatibleHeaderId?R=R.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():p.rawHeaderId?R=R.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"\xA8").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():R=R.replace(/[^\w]/g,"").toLowerCase(),p.rawPrefixHeaderId&&(R=P+R),m.hashLinkCounts[R]?R=R+"-"+m.hashLinkCounts[R]++:m.hashLinkCounts[R]=1,R}return a=m.converter._dispatch("headers.after",a,p,m),a}),r.subParser("horizontalRule",function(a,p,m){a=m.converter._dispatch("horizontalRule.before",a,p,m);var x=r.subParser("hashBlock")("<hr />",p,m);return a=a.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,x),a=a.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,x),a=a.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,x),a=m.converter._dispatch("horizontalRule.after",a,p,m),a}),r.subParser("images",function(a,p,m){a=m.converter._dispatch("images.before",a,p,m);var x=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,_=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,C=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,k=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,S=/!\[([^\[\]]+)]()()()()()/g;function M(P,N,y,A,z,F,L,D){return A=A.replace(/\s/g,""),R(P,N,y,A,z,F,L,D)}function R(P,N,y,A,z,F,L,D){var B=m.gUrls,q=m.gTitles,G=m.gDimensions;if(y=y.toLowerCase(),D||(D=""),P.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)A="";else if(A===""||A===null)if((y===""||y===null)&&(y=N.toLowerCase().replace(/ ?\n/g," ")),A="#"+y,!r.helper.isUndefined(B[y]))A=B[y],r.helper.isUndefined(q[y])||(D=q[y]),r.helper.isUndefined(G[y])||(z=G[y].width,F=G[y].height);else return P;N=N.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),A=A.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var W='<img src="'+A+'" alt="'+N+'"';return D&&r.helper.isString(D)&&(D=D.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),W+=' title="'+D+'"'),z&&F&&(z=z==="*"?"auto":z,F=F==="*"?"auto":F,W+=' width="'+z+'"',W+=' height="'+F+'"'),W+=" />",W}return a=a.replace(k,R),a=a.replace(C,M),a=a.replace(_,R),a=a.replace(x,R),a=a.replace(S,R),a=m.converter._dispatch("images.after",a,p,m),a}),r.subParser("italicsAndBold",function(a,p,m){a=m.converter._dispatch("italicsAndBold.before",a,p,m);function x(_,C,k){return C+_+k}return p.literalMidWordUnderscores?(a=a.replace(/\b___(\S[\s\S]*?)___\b/g,function(_,C){return x(C,"<strong><em>","</em></strong>")}),a=a.replace(/\b__(\S[\s\S]*?)__\b/g,function(_,C){return x(C,"<strong>","</strong>")}),a=a.replace(/\b_(\S[\s\S]*?)_\b/g,function(_,C){return x(C,"<em>","</em>")})):(a=a.replace(/___(\S[\s\S]*?)___/g,function(_,C){return/\S$/.test(C)?x(C,"<strong><em>","</em></strong>"):_}),a=a.replace(/__(\S[\s\S]*?)__/g,function(_,C){return/\S$/.test(C)?x(C,"<strong>","</strong>"):_}),a=a.replace(/_([^\s_][\s\S]*?)_/g,function(_,C){return/\S$/.test(C)?x(C,"<em>","</em>"):_})),p.literalMidWordAsterisks?(a=a.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(_,C,k){return x(k,C+"<strong><em>","</em></strong>")}),a=a.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(_,C,k){return x(k,C+"<strong>","</strong>")}),a=a.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(_,C,k){return x(k,C+"<em>","</em>")})):(a=a.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(_,C){return/\S$/.test(C)?x(C,"<strong><em>","</em></strong>"):_}),a=a.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(_,C){return/\S$/.test(C)?x(C,"<strong>","</strong>"):_}),a=a.replace(/\*([^\s*][\s\S]*?)\*/g,function(_,C){return/\S$/.test(C)?x(C,"<em>","</em>"):_})),a=m.converter._dispatch("italicsAndBold.after",a,p,m),a}),r.subParser("lists",function(a,p,m){function x(k,S){m.gListLevel++,k=k.replace(/\n{2,}$/,`
`),k+="\xA80";var M=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,R=/\n[ \t]*\n(?!0)/.test(k);return p.disableForced4SpacesIndentedSublists&&(M=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),k=k.replace(M,function(P,N,y,A,z,F,L){L=L&&L.trim()!=="";var D=r.subParser("outdent")(z,p,m),B="";return F&&p.tasklists&&(B=' class="task-list-item" style="list-style-type: none;"',D=D.replace(/^[ \t]*\[(x|X| )?]/m,function(){var q='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return L&&(q+=" checked"),q+=">",q})),D=D.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(q){return"\xA8A"+q}),N||D.search(/\n{2,}/)>-1?(D=r.subParser("githubCodeBlocks")(D,p,m),D=r.subParser("blockGamut")(D,p,m)):(D=r.subParser("lists")(D,p,m),D=D.replace(/\n$/,""),D=r.subParser("hashHTMLBlocks")(D,p,m),D=D.replace(/\n\n+/g,`

`),R?D=r.subParser("paragraphs")(D,p,m):D=r.subParser("spanGamut")(D,p,m)),D=D.replace("\xA8A",""),D="<li"+B+">"+D+`</li>
`,D}),k=k.replace(/0/g,""),m.gListLevel--,S&&(k=k.replace(/\s+$/,"")),k}function _(k,S){if(S==="ol"){var M=k.match(/^ *(\d+)\./);if(M&&M[1]!=="1")return' start="'+M[1]+'"'}return""}function C(k,S,M){var R=p.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,P=p.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,N=S==="ul"?R:P,y="";if(k.search(N)!==-1)(function z(F){var L=F.search(N),D=_(k,S);L!==-1?(y+=`

<`+S+D+`>
`+x(F.slice(0,L),!!M)+"</"+S+`>
`,S=S==="ul"?"ol":"ul",N=S==="ul"?R:P,z(F.slice(L))):y+=`

<`+S+D+`>
`+x(F,!!M)+"</"+S+`>
`})(k);else{var A=_(k,S);y=`

<`+S+A+`>
`+x(k,!!M)+"</"+S+`>
`}return y}return a=m.converter._dispatch("lists.before",a,p,m),a+="\xA80",m.gListLevel?a=a.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,S,M){var R=M.search(/[*+-]/g)>-1?"ul":"ol";return C(S,R,!0)}):a=a.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,S,M,R){var P=R.search(/[*+-]/g)>-1?"ul":"ol";return C(M,P,!1)}),a=a.replace(/0/,""),a=m.converter._dispatch("lists.after",a,p,m),a}),r.subParser("metadata",function(a,p,m){if(!p.metadata)return a;a=m.converter._dispatch("metadata.before",a,p,m);function x(_){m.metadata.raw=_,_=_.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),_=_.replace(/\n {4}/g," "),_.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(C,k,S){return m.metadata.parsed[k]=S,""})}return a=a.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(_,C,k){return x(k),"\xA8M"}),a=a.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(_,C,k){return C&&(m.metadata.format=C),x(k),"\xA8M"}),a=a.replace(/M/g,""),a=m.converter._dispatch("metadata.after",a,p,m),a}),r.subParser("outdent",function(a,p,m){return a=m.converter._dispatch("outdent.before",a,p,m),a=a.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),a=a.replace(/0/g,""),a=m.converter._dispatch("outdent.after",a,p,m),a}),r.subParser("paragraphs",function(a,p,m){a=m.converter._dispatch("paragraphs.before",a,p,m),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var x=a.split(/\n{2,}/g),_=[],C=x.length,k=0;k<C;k++){var S=x[k];S.search(/(K|G)(\d+)\1/g)>=0?_.push(S):S.search(/\S/)>=0&&(S=r.subParser("spanGamut")(S,p,m),S=S.replace(/^([ \t]*)/g,"<p>"),S+="</p>",_.push(S))}for(C=_.length,k=0;k<C;k++){for(var M="",R=_[k],P=!1;/(K|G)(\d+)\1/.test(R);){var N=RegExp.$1,y=RegExp.$2;N==="K"?M=m.gHtmlBlocks[y]:P?M=r.subParser("encodeCode")(m.ghCodeBlocks[y].text,p,m):M=m.ghCodeBlocks[y].codeblock,M=M.replace(/\$/g,"$$$$"),R=R.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,M),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(R)&&(P=!0)}_[k]=R}return a=_.join(`
`),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),m.converter._dispatch("paragraphs.after",a,p,m)}),r.subParser("runExtension",function(a,p,m,x){if(a.filter)p=a.filter(p,x.converter,m);else if(a.regex){var _=a.regex;_ instanceof RegExp||(_=new RegExp(_,"g")),p=p.replace(_,a.replace)}return p}),r.subParser("spanGamut",function(a,p,m){return a=m.converter._dispatch("spanGamut.before",a,p,m),a=r.subParser("codeSpans")(a,p,m),a=r.subParser("escapeSpecialCharsWithinTagAttributes")(a,p,m),a=r.subParser("encodeBackslashEscapes")(a,p,m),a=r.subParser("images")(a,p,m),a=r.subParser("anchors")(a,p,m),a=r.subParser("autoLinks")(a,p,m),a=r.subParser("simplifiedAutoLinks")(a,p,m),a=r.subParser("emoji")(a,p,m),a=r.subParser("underline")(a,p,m),a=r.subParser("italicsAndBold")(a,p,m),a=r.subParser("strikethrough")(a,p,m),a=r.subParser("ellipsis")(a,p,m),a=r.subParser("hashHTMLSpans")(a,p,m),a=r.subParser("encodeAmpsAndAngles")(a,p,m),p.simpleLineBreaks?/\n\nK/.test(a)||(a=a.replace(/\n+/g,`<br />
`)):a=a.replace(/  +\n/g,`<br />
`),a=m.converter._dispatch("spanGamut.after",a,p,m),a}),r.subParser("strikethrough",function(a,p,m){function x(_){return p.simplifiedAutoLink&&(_=r.subParser("simplifiedAutoLinks")(_,p,m)),"<del>"+_+"</del>"}return p.strikethrough&&(a=m.converter._dispatch("strikethrough.before",a,p,m),a=a.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(_,C){return x(C)}),a=m.converter._dispatch("strikethrough.after",a,p,m)),a}),r.subParser("stripLinkDefinitions",function(a,p,m){var x=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,_=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;a+="\xA80";var C=function(k,S,M,R,P,N,y){return S=S.toLowerCase(),a.toLowerCase().split(S).length-1<2?k:(M.match(/^data:.+?\/.+?;base64,/)?m.gUrls[S]=M.replace(/\s/g,""):m.gUrls[S]=r.subParser("encodeAmpsAndAngles")(M,p,m),N?N+y:(y&&(m.gTitles[S]=y.replace(/"|'/g,"&quot;")),p.parseImgDimensions&&R&&P&&(m.gDimensions[S]={width:R,height:P}),""))};return a=a.replace(_,C),a=a.replace(x,C),a=a.replace(/0/,""),a}),r.subParser("tables",function(a,p,m){if(!p.tables)return a;var x=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,_=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function C(P){return/^:[ \t]*--*$/.test(P)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(P)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(P)?' style="text-align:center;"':""}function k(P,N){var y="";return P=P.trim(),(p.tablesHeaderId||p.tableHeaderId)&&(y=' id="'+P.replace(/ /g,"_").toLowerCase()+'"'),P=r.subParser("spanGamut")(P,p,m),"<th"+y+N+">"+P+`</th>
`}function S(P,N){var y=r.subParser("spanGamut")(P,p,m);return"<td"+N+">"+y+`</td>
`}function M(P,N){for(var y=`<table>
<thead>
<tr>
`,A=P.length,z=0;z<A;++z)y+=P[z];for(y+=`</tr>
</thead>
<tbody>
`,z=0;z<N.length;++z){y+=`<tr>
`;for(var F=0;F<A;++F)y+=N[z][F];y+=`</tr>
`}return y+=`</tbody>
</table>
`,y}function R(P){var N,y=P.split(`
`);for(N=0;N<y.length;++N)/^ {0,3}\|/.test(y[N])&&(y[N]=y[N].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(y[N])&&(y[N]=y[N].replace(/\|[ \t]*$/,"")),y[N]=r.subParser("codeSpans")(y[N],p,m);var A=y[0].split("|").map(function(W){return W.trim()}),z=y[1].split("|").map(function(W){return W.trim()}),F=[],L=[],D=[],B=[];for(y.shift(),y.shift(),N=0;N<y.length;++N)y[N].trim()!==""&&F.push(y[N].split("|").map(function(W){return W.trim()}));if(A.length<z.length)return P;for(N=0;N<z.length;++N)D.push(C(z[N]));for(N=0;N<A.length;++N)r.helper.isUndefined(D[N])&&(D[N]=""),L.push(k(A[N],D[N]));for(N=0;N<F.length;++N){for(var q=[],G=0;G<L.length;++G)r.helper.isUndefined(F[N][G]),q.push(S(F[N][G],D[G]));B.push(q)}return M(L,B)}return a=m.converter._dispatch("tables.before",a,p,m),a=a.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),a=a.replace(x,R),a=a.replace(_,R),a=m.converter._dispatch("tables.after",a,p,m),a}),r.subParser("underline",function(a,p,m){return p.underline&&(a=m.converter._dispatch("underline.before",a,p,m),p.literalMidWordUnderscores?(a=a.replace(/\b___(\S[\s\S]*?)___\b/g,function(x,_){return"<u>"+_+"</u>"}),a=a.replace(/\b__(\S[\s\S]*?)__\b/g,function(x,_){return"<u>"+_+"</u>"})):(a=a.replace(/___(\S[\s\S]*?)___/g,function(x,_){return/\S$/.test(_)?"<u>"+_+"</u>":x}),a=a.replace(/__(\S[\s\S]*?)__/g,function(x,_){return/\S$/.test(_)?"<u>"+_+"</u>":x})),a=a.replace(/(_)/g,r.helper.escapeCharactersCallback),a=m.converter._dispatch("underline.after",a,p,m)),a}),r.subParser("unescapeSpecialChars",function(a,p,m){return a=m.converter._dispatch("unescapeSpecialChars.before",a,p,m),a=a.replace(/E(\d+)E/g,function(x,_){var C=parseInt(_);return String.fromCharCode(C)}),a=m.converter._dispatch("unescapeSpecialChars.after",a,p,m),a}),r.subParser("makeMarkdown.blockquote",function(a,p){var m="";if(a.hasChildNodes())for(var x=a.childNodes,_=x.length,C=0;C<_;++C){var k=r.subParser("makeMarkdown.node")(x[C],p);k!==""&&(m+=k)}return m=m.trim(),m="> "+m.split(`
`).join(`
> `),m}),r.subParser("makeMarkdown.codeBlock",function(a,p){var m=a.getAttribute("language"),x=a.getAttribute("precodenum");return"```"+m+`
`+p.preList[x]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(a){return"`"+a.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(a,p){var m="";if(a.hasChildNodes()){m+="*";for(var x=a.childNodes,_=x.length,C=0;C<_;++C)m+=r.subParser("makeMarkdown.node")(x[C],p);m+="*"}return m}),r.subParser("makeMarkdown.header",function(a,p,m){var x=new Array(m+1).join("#"),_="";if(a.hasChildNodes()){_=x+" ";for(var C=a.childNodes,k=C.length,S=0;S<k;++S)_+=r.subParser("makeMarkdown.node")(C[S],p)}return _}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(a){var p="";return a.hasAttribute("src")&&(p+="!["+a.getAttribute("alt")+"](",p+="<"+a.getAttribute("src")+">",a.hasAttribute("width")&&a.hasAttribute("height")&&(p+=" ="+a.getAttribute("width")+"x"+a.getAttribute("height")),a.hasAttribute("title")&&(p+=' "'+a.getAttribute("title")+'"'),p+=")"),p}),r.subParser("makeMarkdown.links",function(a,p){var m="";if(a.hasChildNodes()&&a.hasAttribute("href")){var x=a.childNodes,_=x.length;m="[";for(var C=0;C<_;++C)m+=r.subParser("makeMarkdown.node")(x[C],p);m+="](",m+="<"+a.getAttribute("href")+">",a.hasAttribute("title")&&(m+=' "'+a.getAttribute("title")+'"'),m+=")"}return m}),r.subParser("makeMarkdown.list",function(a,p,m){var x="";if(!a.hasChildNodes())return"";for(var _=a.childNodes,C=_.length,k=a.getAttribute("start")||1,S=0;S<C;++S)if(!(typeof _[S].tagName>"u"||_[S].tagName.toLowerCase()!=="li")){var M="";m==="ol"?M=k.toString()+". ":M="- ",x+=M+r.subParser("makeMarkdown.listItem")(_[S],p),++k}return x+=`
<!-- -->
`,x.trim()}),r.subParser("makeMarkdown.listItem",function(a,p){for(var m="",x=a.childNodes,_=x.length,C=0;C<_;++C)m+=r.subParser("makeMarkdown.node")(x[C],p);return/\n$/.test(m)?m=m.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):m+=`
`,m}),r.subParser("makeMarkdown.node",function(a,p,m){m=m||!1;var x="";if(a.nodeType===3)return r.subParser("makeMarkdown.txt")(a,p);if(a.nodeType===8)return"<!--"+a.data+`-->

`;if(a.nodeType!==1)return"";var _=a.tagName.toLowerCase();switch(_){case"h1":m||(x=r.subParser("makeMarkdown.header")(a,p,1)+`

`);break;case"h2":m||(x=r.subParser("makeMarkdown.header")(a,p,2)+`

`);break;case"h3":m||(x=r.subParser("makeMarkdown.header")(a,p,3)+`

`);break;case"h4":m||(x=r.subParser("makeMarkdown.header")(a,p,4)+`

`);break;case"h5":m||(x=r.subParser("makeMarkdown.header")(a,p,5)+`

`);break;case"h6":m||(x=r.subParser("makeMarkdown.header")(a,p,6)+`

`);break;case"p":m||(x=r.subParser("makeMarkdown.paragraph")(a,p)+`

`);break;case"blockquote":m||(x=r.subParser("makeMarkdown.blockquote")(a,p)+`

`);break;case"hr":m||(x=r.subParser("makeMarkdown.hr")(a,p)+`

`);break;case"ol":m||(x=r.subParser("makeMarkdown.list")(a,p,"ol")+`

`);break;case"ul":m||(x=r.subParser("makeMarkdown.list")(a,p,"ul")+`

`);break;case"precode":m||(x=r.subParser("makeMarkdown.codeBlock")(a,p)+`

`);break;case"pre":m||(x=r.subParser("makeMarkdown.pre")(a,p)+`

`);break;case"table":m||(x=r.subParser("makeMarkdown.table")(a,p)+`

`);break;case"code":x=r.subParser("makeMarkdown.codeSpan")(a,p);break;case"em":case"i":x=r.subParser("makeMarkdown.emphasis")(a,p);break;case"strong":case"b":x=r.subParser("makeMarkdown.strong")(a,p);break;case"del":x=r.subParser("makeMarkdown.strikethrough")(a,p);break;case"a":x=r.subParser("makeMarkdown.links")(a,p);break;case"img":x=r.subParser("makeMarkdown.image")(a,p);break;default:x=a.outerHTML+`

`}return x}),r.subParser("makeMarkdown.paragraph",function(a,p){var m="";if(a.hasChildNodes())for(var x=a.childNodes,_=x.length,C=0;C<_;++C)m+=r.subParser("makeMarkdown.node")(x[C],p);return m=m.trim(),m}),r.subParser("makeMarkdown.pre",function(a,p){var m=a.getAttribute("prenum");return"<pre>"+p.preList[m]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(a,p){var m="";if(a.hasChildNodes()){m+="~~";for(var x=a.childNodes,_=x.length,C=0;C<_;++C)m+=r.subParser("makeMarkdown.node")(x[C],p);m+="~~"}return m}),r.subParser("makeMarkdown.strong",function(a,p){var m="";if(a.hasChildNodes()){m+="**";for(var x=a.childNodes,_=x.length,C=0;C<_;++C)m+=r.subParser("makeMarkdown.node")(x[C],p);m+="**"}return m}),r.subParser("makeMarkdown.table",function(a,p){var m="",x=[[],[]],_=a.querySelectorAll("thead>tr>th"),C=a.querySelectorAll("tbody>tr"),k,S;for(k=0;k<_.length;++k){var M=r.subParser("makeMarkdown.tableCell")(_[k],p),R="---";if(_[k].hasAttribute("style")){var P=_[k].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(P){case"text-align:left;":R=":---";break;case"text-align:right;":R="---:";break;case"text-align:center;":R=":---:";break}}x[0][k]=M.trim(),x[1][k]=R}for(k=0;k<C.length;++k){var N=x.push([])-1,y=C[k].getElementsByTagName("td");for(S=0;S<_.length;++S){var A=" ";typeof y[S]<"u"&&(A=r.subParser("makeMarkdown.tableCell")(y[S],p)),x[N].push(A)}}var z=3;for(k=0;k<x.length;++k)for(S=0;S<x[k].length;++S){var F=x[k][S].length;F>z&&(z=F)}for(k=0;k<x.length;++k){for(S=0;S<x[k].length;++S)k===1?x[k][S].slice(-1)===":"?x[k][S]=r.helper.padEnd(x[k][S].slice(-1),z-1,"-")+":":x[k][S]=r.helper.padEnd(x[k][S],z,"-"):x[k][S]=r.helper.padEnd(x[k][S],z);m+="| "+x[k].join(" | ")+` |
`}return m.trim()}),r.subParser("makeMarkdown.tableCell",function(a,p){var m="";if(!a.hasChildNodes())return"";for(var x=a.childNodes,_=x.length,C=0;C<_;++C)m+=r.subParser("makeMarkdown.node")(x[C],p,!0);return m.trim()}),r.subParser("makeMarkdown.txt",function(a){var p=a.nodeValue;return p=p.replace(/ +/g," "),p=p.replace(/NBSP;/g," "),p=r.helper.unescapeHTMLEntities(p),p=p.replace(/([*_~|`])/g,"\\$1"),p=p.replace(/^(\s*)>/g,"\\$1>"),p=p.replace(/^#/gm,"\\#"),p=p.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),p=p.replace(/^( {0,3}\d+)\./gm,"$1\\."),p=p.replace(/^( {0,3})([+-])/gm,"$1\\$2"),p=p.replace(/]([\s]*)\(/g,"\\]$1\\("),p=p.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),p});var O=this;e.exports?e.exports=r:O.showdown=r}).call(ie)})(nl);var rb=nl.exports;const rl=gr(rb),ob=async e=>{if(!e)return;const t=e.join("");try{await navigator.clipboard.writeText(t)}catch(n){console.error("Failed to copy text: ",n)}},ab=({guideMePin:e,onNextClick:t,autoFillInput:n,isAiFallbackElement:r,canEdit:o,showRecaptureButton:i,...c})=>{var O;const[l,u]=s.useState(!1),f=s.useRef(null),{guideMePinRecapture:h}=Qe(ue.getState()),v=new rl.Converter,w=a=>a.replace(/\[\[(.*?)\]\]/g,"`$1`"),j=v.makeHtml(w(((O=e==null?void 0:e.document_metadata)==null?void 0:O.name)||"")),b=xa.sanitize(j);s.useLayoutEffect(()=>{const a=()=>{f.current&&requestAnimationFrame(()=>{if(!f.current)return;const p=f.current.getBoundingClientRect(),m=window.innerWidth<Math.ceil(p.right)+12,x=window.innerWidth-Math.ceil(p.x)-Math.ceil(p.width)*2-32-12>36;!l&&m&&u(!0),l&&x&&u(!1)})};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[l,e]);const g=s.useRef(null),E=()=>{const{activeElement:a}=document;a&&a.tagName==="INPUT"&&a.blur(),Y("next_type_step_guide_me",{actionId:e.actionExternalId}),t==null||t()},T=(e==null?void 0:e.actionType)==="keyboard_sequence_action",I=!(e!=null&&e.recaptureEnabledForPublishing);return d.jsx(dt,{children:d.jsx("div",{ref:f,className:$("step-description container z-10 flex w-max max-w-[450px] items-center justify-center rounded-[11px] p-[1px] transition-opacity -mt-0.5 backdrop-blur-sm",{"mt-3":T,"relative right-full -mr-8":l&&T,"mx-3":(e==null?void 0:e.actionType)!=="keyboard_sequence_action","relative right-full":(e==null?void 0:e.actionType)!=="keyboard_sequence_action"&&l,"pointer-events-auto":!c.targetHovered||T,"opacity-0":c.targetHovered&&(e==null?void 0:e.actionType)!=="keyboard_sequence_action"}),children:d.jsxs("div",{className:"flex h-full w-full items-start justify-center rounded-lg bg-slate-950/75 ring-1 ring-slate-950/75 border border-white/25 px-4 py-2 shadow-lg relative",children:[d.jsxs("div",{className:$("guide-me-modal-html max-w-[330px] cursor-text text-sm font-medium leading-5 text-slate-100 group h-fit overflow-hidden",{"mt-1.5":T}),children:[d.jsxs("div",{className:"flex flex-row gap-1 align-content-center items-center guide-me-tooltip",children:[Xn(b),h&&!T&&o&&i&&d.jsx("div",{className:"flex justify-center items-center gap-1",children:d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{disabled:I,variant:"secondary",theme:"dark",icon:Xc,screenReaderLabel:"Recapture step",onClick:()=>{chrome.runtime.sendMessage({messageType:"recapture"})}})}),d.jsx(me,{side:"bottom",children:I?"Publish changes before recapturing.":"Recapture"})]})})]}),r&&d.jsx(kr,{className:"mb-1"})]}),T&&d.jsxs("div",{className:"ml-3 flex items-center gap-2",children:[d.jsx("div",{children:d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{ref:g,variant:"secondary",theme:"dark",icon:Yc,screenReaderLabel:"Copy input text",onClick:()=>{var a;ob(e==null?void 0:e.keys),Y("copy_type_step_guide_me",{actionId:e.actionExternalId}),(a=g.current)==null||a.blur()}})}),d.jsx(me,{side:"bottom",children:d.jsx("div",{className:"flex items-center",children:d.jsx("span",{children:"Copy Text"})})})]})}),d.jsx("div",{children:d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{ref:g,variant:"secondary",theme:"dark",icon:Kc,screenReaderLabel:"Insert input text",onClick:()=>{n&&n((e==null?void 0:e.keys)||[]),Y("insert_type_step_guide_me",{actionId:e.actionExternalId})}})}),d.jsx(me,{side:"bottom",children:d.jsx("div",{className:"flex items-center",children:d.jsx("span",{children:"Fill Input"})})})]})}),d.jsx("div",{children:d.jsx(Q,{variant:"secondary",theme:"dark",icon:Qc,onMouseDown:E,children:"Next"})})]})]})})})},ib=async e=>{if(!e)return;const t=e.join("");try{await navigator.clipboard.writeText(t)}catch(n){console.error("Failed to copy text: ",n)}},sb=({sanitizedHTML:e,isLarge:t})=>{const n=s.useRef(null),r=()=>{const o=document.createElement("div");o.innerHTML=e;const i=o.querySelector("p");return i?i.outerHTML:""};return d.jsx("div",{ref:n,className:"guide-me-tooltip transition-all duration-200 ease-in-out overflow-hidden break-all",style:{maxHeight:"20px"},children:d.jsxs("div",{className:"guide-me-tooltip flex justify-center",children:[d.jsx("div",{className:"guide-me-tooltip",children:Xn(r())}),t&&d.jsx("p",{className:"ml-1",children:"..."})]})})},lb=({sanitizedHTML:e})=>{var n;const t=s.useRef(null);return d.jsx("div",{ref:t,className:"guide-me-tooltip transition-all duration-200 ease-in-out overflow-hidden",style:{maxHeight:`${(n=t==null?void 0:t.current)==null?void 0:n.scrollHeight}px`},children:Xn(e)})},cb=({sanitizedHTML:e,ghostRef:t})=>d.jsx("div",{ref:t,style:{position:"absolute",visibility:"hidden",height:"auto",overflow:"visible",maxHeight:"none"},children:Xn(e)}),ol=({guideMePinRecapture:e,keyboardSequenceAction:t,canEdit:n,showRecaptureButton:r,guideMePin:o})=>{const i=e&&!t&&n&&r,c=!(o!=null&&o.recaptureEnabledForPublishing);return i?d.jsx("div",{className:"flex justify-center items-center gap-1",children:d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{disabled:c,className:`
            guide-me-tooltip-button
          `,variant:"ghost",size:"small",theme:"dark",icon:Jl,screenReaderLabel:"Recapture step",onClick:()=>{chrome.runtime.sendMessage({messageType:"recapture"})}})}),d.jsx(me,{side:"bottom",children:c?"Publish changes before recapturing.":"Recapture"})]})}):null},ub=({guideMePin:e,onNextClick:t,handleAutoFillInput:n,isAiFallbackElement:r,canEdit:o,showRecaptureButton:i,...c})=>{var S;const[l,u]=s.useState(!1),[f,h]=s.useState(!1),v=s.useRef(null),{guideMePinRecapture:w}=Qe(ue.getState()),j=s.useRef(null),[b,g]=s.useState(!1),[E,T]=s.useState(!1),I=new rl.Converter,O=M=>M.replace(/\[\[(.*?)\]\]/g,"`$1`"),a=I.makeHtml(O(((S=e==null?void 0:e.document_metadata)==null?void 0:S.name)||""));let p=xa.sanitize(a);p.includes("<code>enter</code>")&&(p=p.replace(/<code>enter<\/code>/g,"")),s.useEffect(()=>{g(!1)},[e.actionExternalId]),s.useLayoutEffect(()=>{const M=j.current;if(!M)return;const R=new ResizeObserver(P=>{const{height:N}=P[0].contentRect,y=N>60;T(A=>A!==y?y:A)});return R.observe(M),()=>{R.disconnect()}},[e.actionExternalId]),s.useLayoutEffect(()=>{const M=()=>{v.current&&requestAnimationFrame(()=>{if(!v.current)return;const R=v.current.getBoundingClientRect(),P=window.innerWidth<Math.ceil(R.right)+12,N=window.innerWidth-Math.ceil(R.x)-Math.ceil(R.width)*2-32-12>36,y=window.innerHeight<Math.ceil(R.bottom)+(E?12:0);!l&&P&&u(!0),l&&N&&u(!1),!f&&y&&h(!0),f&&!y&&h(!1)})};return M(),window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M)}},[l,e,e.document_metadata.id,E,f]);const m=s.useRef(null),x=()=>{const{activeElement:M}=document;M&&M.tagName==="INPUT"&&M.blur(),Y("next_type_step_guide_me",{actionId:e.actionExternalId}),t==null||t()},_=(e==null?void 0:e.actionType)==="keyboard_sequence_action",C=_||E||r,k=()=>{var M;return f?b?`-${Number((M=j.current)==null?void 0:M.scrollHeight)-20}px`:"-30px":"0px"};return d.jsx(dt,{children:d.jsx("div",{ref:v,style:{marginTop:k()},className:$("step-description container z-10 flex w-max max-w-[450px] items-center justify-center rounded-[11px] p-[1px] transition-opacity -mt-0.5 backdrop-blur-sm",{"mt-3":_,"relative right-full -mr-8":l&&_,"mx-3":(e==null?void 0:e.actionType)!=="keyboard_sequence_action","relative right-full":(e==null?void 0:e.actionType)!=="keyboard_sequence_action"&&l,"pointer-events-auto":!c.targetHovered||_,"opacity-0":c.targetHovered&&(e==null?void 0:e.actionType)!=="keyboard_sequence_action"}),children:d.jsx("div",{className:"flex h-full w-full items-start justify-center rounded-lg bg-slate-950/75 ring-1 ring-slate-950/75 border border-white/25 px-4 py-2 shadow-lg relative",children:d.jsxs("div",{className:$("guide-me-modal-html max-w-[330px] cursor-text text-sm font-medium leading-5 text-slate-100 group h-fit overflow-hidden",{"mt-1.5":_}),children:[d.jsx(cb,{sanitizedHTML:p,ghostRef:j}),d.jsxs("div",{className:"flex flex-row gap-1 align-content-center items-center guide-me-tooltip",children:[!b&&d.jsx(sb,{sanitizedHTML:p,isLarge:E}),b&&d.jsx(lb,{sanitizedHTML:p}),!C&&d.jsx(ol,{guideMePinRecapture:w,keyboardSequenceAction:_,canEdit:o,showRecaptureButton:i,guideMePin:e})]}),C&&d.jsxs("div",{className:"flex flex-row pt-1 gap-2 align-content-center items-center",children:[E&&d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{className:"guide-me-tooltip-button",variant:"ghost",theme:"dark",icon:b?Zc:Jc,size:"small",screenReaderLabel:"Show more",onClick:()=>{g(M=>!M)}})}),d.jsx(me,{side:"bottom",children:b?"Show less":"Show more"})]}),d.jsx(ol,{guideMePinRecapture:w,keyboardSequenceAction:_,canEdit:o,showRecaptureButton:i,guideMePin:e}),r&&d.jsx(kr,{}),_&&d.jsxs(d.Fragment,{children:[d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{className:"guide-me-tooltip-button",ref:m,variant:"ghost",size:"small",theme:"dark",icon:Ql,screenReaderLabel:"Copy input text",onClick:()=>{var M;ib(e==null?void 0:e.keys),Y("copy_type_step_guide_me",{actionId:e.actionExternalId}),(M=m.current)==null||M.blur()}})}),d.jsx(me,{side:"bottom",children:d.jsx("div",{className:"flex items-center",children:d.jsx("span",{children:"Copy Text"})})})]}),d.jsx("div",{children:d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{className:"guide-me-tooltip-button",ref:m,variant:"ghost",theme:"dark",size:"small",icon:Zl,screenReaderLabel:"Insert input text",onClick:()=>{n(),Y("insert_type_step_guide_me",{actionId:e.actionExternalId})}})}),d.jsx(me,{side:"bottom",children:d.jsx("div",{className:"flex items-center",children:d.jsx("span",{children:"Fill Input"})})})]})}),d.jsx("div",{children:d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{className:"guide-me-tooltip-button",variant:"ghost",theme:"dark",size:"small",icon:ra,onMouseDown:x})}),d.jsx(me,{side:"bottom",children:d.jsx("div",{className:"flex items-center",children:d.jsx("span",{children:"Next"})})})]})})]})]})]})})})})},al=(e,t)=>{var r,o,i,c;((r=t==null?void 0:t.keys)==null?void 0:r[t.keys.length-1])==="enter"&&t.keys.pop();const n=((o=t==null?void 0:t.keys)==null?void 0:o.join(""))||"";(c=(i=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"value"))==null?void 0:i.set)==null||c.call(e,n),e==null||e.dispatchEvent(new Event("input",{bubbles:!0})),e==null||e.dispatchEvent(new Event("change",{bubbles:!0}))},db=({guideMePin:e,aiFallbackElementId:t,description:n,onTargetClick:r,onOtherTargetClick:o,actionType:i,onSelectorNotFound:c,onSelectorFound:l,canEdit:u,liveActionNumber:f})=>{var y,A,z,F;const[h,v]=s.useState(!1),[w,j]=s.useState(0),{element:b,matchMethod:g,parentIframe:E,algorithm:T}=Pi({aiFallbackElementId:t,selector:e.selector,xpath:e.xpath,tag:e.tag,text:e.text,attributes:e.attributes,debounceMs:200,retryCount:w,timestamp:e==null?void 0:e.timestamp,actionType:e==null?void 0:e.actionType,actionId:(e==null?void 0:e.actionExternalId)??"",wasInIframe:e?e.was_in_iframe:null,iframeAttributes:(e==null?void 0:e.iframe_attributes)||null,parentAttributes:(e==null?void 0:e.target_parent_attributes)||null,parentTag:(e==null?void 0:e.target_parent_tag)||""}),I=(A=(y=ue.getState())==null?void 0:y.extension)==null?void 0:A.status,O=(F=(z=ue.getState())==null?void 0:z.guideMe)==null?void 0:F.autoPilotAction,{guideMeTooltipSizing:a}=Qe(ue.getState()),{isVisible:p}=_r({element:b,subtreeEnabled:!0}),m=Ba(b,E),x=s.useCallback(()=>{i!=="keyboard_sequence_action"&&(r==null||r(),b==null||b.removeEventListener("pointerdown",x))},[i,r,b]),_=$a({pin:e,pinTarget:b,parentIframe:E}),C=s.useCallback(L=>{const D=L.join("");b&&b instanceof HTMLInputElement&&(b.value=D)},[b]),k=()=>v(!0),S=()=>v(!1);function M(L){L.isTrusted&&x()}s.useEffect(()=>(b==null||b.addEventListener("mouseenter",k),b==null||b.addEventListener("mouseleave",S),b==null||b.addEventListener("pointerdown",M),()=>{b==null||b.removeEventListener("mouseenter",k),b==null||b.removeEventListener("mouseleave",S),b==null||b.removeEventListener("pointerdown",M)}),[x,b]),s.useEffect(()=>{O&&O==="click"&&b&&(b.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:_.x,clientY:_.y})),x()),O&&O==="autofill"&&(((b==null?void 0:b.tagName)==="INPUT"||(b==null?void 0:b.tagName)==="TEXTAREA"||(b==null?void 0:b.getAttribute("contenteditable"))==="true")&&al(b,e),r==null||r()),ue.dispatch(ir(null))},[C,O,x,r,e==null?void 0:e.keys,_.x,_.y]),s.useEffect(()=>{S(),j(0)},[e]);const R=(()=>b&&m.width&&m.height)();s.useEffect(()=>{let L;if(R){j(0),l==null||l({matchMethod:g,centerCoordinates:Ha(m),algorithm:T}),wa({actionId:e.actionExternalId,matchMethod:g,url:e.original_url,algorithm:T});const D=b;D.style.transform="scale(1)",D.offsetHeight,D.style.transform=""}else w<10&&(L=setTimeout(()=>{R||j(D=>D+1)},1e3));return(w===1&&(!b||b&&!R)||t&&(!b||b&&!R))&&(c==null||c()),w===10&&wa({actionId:e.actionExternalId,matchMethod:g,url:e.original_url,algorithm:T}),()=>clearTimeout(L)},[b,w]);const P=()=>{const{top:L,left:D,height:B,width:q}=m,{innerHeight:G,innerWidth:W}=window;return L<0||D<0||L+B>G||D+q>W},N=()=>{R&&P()&&(b==null||b.scrollIntoView({behavior:"smooth",block:"center"}))};return s.useEffect(()=>{const L=D=>{var ee;const B=D.target,q=b==null?void 0:b.contains(B),G=B==null?void 0:B.contains(b),W=ba(B,{ignoreId:!0}),ne=cr(B),J={documentId:(ee=e==null?void 0:e.document_metadata)==null?void 0:ee.id,actionId:e==null?void 0:e.actionExternalId,actionSelector:e==null?void 0:e.selector,actionXpath:e==null?void 0:e.xpath,actionDescription:n,userScrollPosition:{x:window==null?void 0:window.scrollX,y:window==null?void 0:window.scrollY},userClickCoordinates:{x:D.clientX,y:D.clientY},viewport:{width:window.innerWidth,height:window.innerHeight},clickedText:or((B.innerText||B.textContent||"").substring(0,2048)),clickedXpath:W,clickedSelector:ne};B!==b&&!q&&!G&&R&&(o(D.clientX,D.clientY),ur("click_other_element_guide_me",J)),b||ur("click_refer_to_screenshot_other_element_guide_me",J)};return document.addEventListener("pointerdown",L),()=>{document.removeEventListener("pointerdown",L)}},[b,r,R]),s.useEffect(()=>{N()},[b]),!R||I===ce.RECORDING?null:d.jsx("div",{className:"group pointer-events-none absolute z-[999999] cursor-pointer opacity-100 transition-opacity",style:{position:"absolute",top:_.y-16,left:_.x-16,zIndex:999999},children:p&&d.jsxs("div",{id:"click-target",className:$("relative flex items-start",{"flex-col":e.actionType==="keyboard_sequence_action"}),children:[d.jsx(La,{clickTargetColor:e.clickTargetColor}),a?d.jsx(ub,{isAiFallbackElement:g==="ai_fallback",guideMePin:e,targetHovered:h,onNextClick:r,handleAutoFillInput:()=>al(b,e),canEdit:u,showRecaptureButton:!String(f).includes(".")}):d.jsx(ab,{isAiFallbackElement:g==="ai_fallback",guideMePin:e,targetHovered:h,onNextClick:r,autoFillInput:C,canEdit:u,showRecaptureButton:!String(f).includes(".")})]})})},pb=({liveAction:e})=>{var f,h;const[t,n]=s.useState(!1),[r,o]=s.useState({x:0,y:0}),i=(h=(f=ue.getState())==null?void 0:f.extension)==null?void 0:h.status,c=s.useRef(null),l=`#${e==null?void 0:e.clickTargetColor}`||"#3C2EDD",u=({x:v,y:w})=>{const j=document.elementFromPoint(v,w);if(j&&c.current){const b=j.getBoundingClientRect();Object.assign(c.current.style,{display:"block",top:`${b.top}px`,left:`${b.left}px`,width:`${b.width}px`,height:`${b.height}px`})}};return s.useEffect(()=>{dr().then(v=>{v&&i===ce.RECORDING?n(!0):n(!1)}).catch(()=>{n(!1)})},[i]),s.useEffect(()=>{if(!t)return;const v=g=>{o({x:g.clientX,y:g.clientY}),u({x:g.clientX,y:g.clientY})},w=g=>E=>{var a,p;let T=E.clientX,I=E.clientY,O=g;for(;O;){const m=O.getBoundingClientRect();T+=m.left,I+=m.top,O=(p=(a=O.ownerDocument)==null?void 0:a.defaultView)==null?void 0:p.frameElement}o({x:T,y:I})},j=[],b=g=>{g.querySelectorAll("iframe").forEach(E=>{try{const T=E.contentWindow;if(T&&T.document){const I=w(E);T.document.addEventListener("mousemove",I),j.push({iframeWindow:T,handler:I}),b(T.document)}}catch(T){console.warn("Cross-origin iframe, skipping mouse tracking:",T)}})};return window.addEventListener("mousemove",v),b(document),()=>{window.removeEventListener("mousemove",v),c.current&&(c.current.style.display="none"),j.forEach(({iframeWindow:g,handler:E})=>{try{g.document.removeEventListener("mousemove",E)}catch(T){console.warn("Error cleaning up iframe listener:",T)}})}},[t]),s.useEffect(()=>{const v=()=>{n(!1)},w=()=>{dr().then(j=>{j&&i===ce.RECORDING&&n(!0)}).catch(()=>{n(!1)})};return window.addEventListener("scroll",v),window.addEventListener("scrollend",w),()=>{window.removeEventListener("scroll",v),window.removeEventListener("scrollend",w)}},[t]),t?d.jsxs("div",{id:"guide-click-target",children:[d.jsx("div",{className:"z-9999 absolute text-white p-2 rounded-md text-xs",style:{left:r.x+12,top:r.y+12,backgroundColor:`${l}`,width:"max-content"},children:"Click to capture"}),d.jsx("div",{className:"border-rounded-sm",ref:c,style:{position:"absolute",border:`solid 2px ${l}`,pointerEvents:"none"}})]}):null},il=e=>{const t=e.kind==="instruction"&&!e.instruction_type,n=e.kind==="mouse_click_action"||e.kind==="keyboard_action"||e.kind==="keyboard_combination_action"||e.kind==="keyboard_sequence_action";return t||n},Yn=()=>{var e,t,n,r;try{return window&&window.self!==window.top?(t=(e=window.top)==null?void 0:e.location)==null?void 0:t.href:(n=window.location)==null?void 0:n.href}catch{return(r=window.location)==null?void 0:r.href}},mb=()=>{var z,F;const[e,t]=s.useState(void 0),[n,r]=s.useState(void 0),[o,i]=s.useState(!1),[c,l]=s.useState(!1),[u,f]=s.useState(!1),[h,v]=s.useState(!1),[w,j]=s.useState(void 0),[b,g]=s.useState(void 0),{guideMePinRecapture:E,guideMeSaveIframeDoms:T,guideMeAlgoV3:I,guideMeAlgo:O,guideMeAiFallback:a}=Qe(ue.getState()),p=(F=(z=ue.getState())==null?void 0:z.extension)==null?void 0:F.status;s.useEffect(()=>{if(!n)return;const L=Pa();g(L),chrome.runtime.sendMessage({messageType:"guideMeCaptureFreshPageScreenshot",data:{sessionId:w,requestId:L}})},[n==null?void 0:n.id]);const m=()=>{var D,B,q;const L=ho(n==null?void 0:n.url,Yn());if(!L&&(n!=null&&n.url))an({showMessage:!0,message:un.UrlMismatch});else{const G=(D=n==null?void 0:n.screenshot)!=null&&D.id?un.NotFoundScreenshot:un.NotFoundStep;if(!e&&window.self===window.top&&a){Oa();const W=(B=document==null?void 0:document.body)==null?void 0:B.outerHTML;an({showMessage:!0,message:G,url:window.location.href,dom:W,sessionId:w,requestId:b})}else{an({showMessage:!0,message:G,sessionId:w,requestId:b});const W=T?ya():(q=Ta(document==null?void 0:document.body))==null?void 0:q.outerHTML;chrome.runtime.sendMessage({messageType:"trackGuideMeDom",documentId:n==null?void 0:n.document_id,actionId:n==null?void 0:n.id,type:L?"selector_not_found":"url_mismatch",domString:W})}}},x=()=>{an({showMessage:!1,message:void 0})},_=({matchMethod:L,centerCoordinates:D,algorithm:B})=>{var G;if(x(),!n||!n.id||!n.document_id)return;const q=T?ya():(G=Ta(document==null?void 0:document.body))==null?void 0:G.outerHTML;chrome.runtime.sendMessage({messageType:"trackGuideMeDom",documentId:n.document_id,actionId:n.id,type:"selector_found",domString:q,trackingDetails:{matchMethod:L,algorithm:B,...L==="ai_fallback"&&{modelResponseClickCoordinates:D}}})},C=()=>{ur("click_element_guide_me",{documentId:n==null?void 0:n.document_id,actionId:n==null?void 0:n.id}),x(),chrome.runtime.sendMessage({messageType:"liveTargetClicked"})},k=(L,D)=>{chrome.runtime.sendMessage({messageType:"guideMeOtherElementClicked",data:{sessionId:w,requestId:b,coordinates:{x:L,y:D}}})},S=L=>{x(),t(void 0),r(L)},M=async()=>{const L=await _c();r(L)},R=async()=>{const L=await dr();i(L)},P=async()=>{const L=await kc();v(L)};s.useEffect(()=>{lu(()=>{l(!0)})},[]),s.useEffect(()=>(chrome.storage.local.onChanged.addListener(L=>{if(L!=null&&L.guideMeSessionId&&j(L.guideMeSessionId.newValue),L==null?void 0:L.liveAction){if(!L.liveAction.newValue)return;const D=JSON.parse(L.liveAction.newValue)??void 0,B=(n==null?void 0:n.id)===D.id&&(n==null?void 0:n.timestamp)===D.timestamp;D&&!B&&S(D)}if(L!=null&&L.isGuiding){if(!L.isGuiding.newValue)return;const D=L.isGuiding.newValue==="true";i(D)}}),()=>{chrome.storage.local.onChanged.removeListener(()=>{})}),[]),s.useEffect(()=>{M(),R(),P()},[]);const N=()=>{switch(n==null?void 0:n.kind){case"mouse_click_action":ue.dispatch(ir("click"));break;case"keyboard_sequence_action":ue.dispatch(ir("autofill"));break;default:C()}};s.useEffect(()=>{const L=D=>{D.messageType==="highlightAIFallbackElement"&&t(D.elementId),D.messageType==="guideMeStepForward"&&N(),D.messageType==="setIsAutopilot"&&f(D.isAutopilot),D.messageType==="userEditPermission"&&v(!!(D!=null&&D.canEdit))};return chrome.runtime.onMessage.addListener(L),()=>{chrome.runtime.onMessage.removeListener(L)}},[n]),s.useEffect(()=>{const L=D=>{D.key==="Enter"&&N(),D.key==="ArrowLeft"&&chrome.runtime.sendMessage({messageType:"guideMePreviousStepToSidepanel"}),D.key==="ArrowRight"&&chrome.runtime.sendMessage({messageType:"liveTargetClicked"})};return u&&window.addEventListener("keydown",L),()=>{window.removeEventListener("keydown",L)}},[u,N]);const y=s.useMemo(()=>{var L,D,B;if(n)return{id:"live-target",selector:(L=n==null?void 0:n.domain)!=null&&L.includes("dynamics.com")?za(n==null?void 0:n.target_selector):n==null?void 0:n.target_selector,xpath:(n==null?void 0:n.target_xpath)||"",tag:(n==null?void 0:n.target_tag)||"",text:(n==null?void 0:n.target_text)||"",attributes:(n==null?void 0:n.target_element_attributes)||null,domain:window.location.hostname,path:location.href,original_url:location.href,document_metadata:{id:(n==null?void 0:n.document_id)??"live-target-meta",name:(n==null?void 0:n.transcribed_description)||(n==null?void 0:n.description),type:"scribe",icon_color:"gray"},user_owner:{id:"live-owner",author_name:"live-author"},actionType:n==null?void 0:n.kind,keys:n==null?void 0:n.keys,timestamp:n==null?void 0:n.timestamp,actionExternalId:n==null?void 0:n.id,clickTargetColor:n==null?void 0:n.clickTargetColor,clickPosition:{x:((D=n==null?void 0:n.position_within_element)==null?void 0:D.x)||null,y:((B=n==null?void 0:n.position_within_element)==null?void 0:B.y)||null},recaptureEnabledForPublishing:n==null?void 0:n.recaptureEnabledForPublishing,was_in_iframe:n?n.was_in_iframe:null,iframe_attributes:(n==null?void 0:n.iframe_attributes)||null,target_parent_attributes:(n==null?void 0:n.target_parent_attributes)||null,target_parent_tag:(n==null?void 0:n.target_parent_tag)||""}},[n]);if(s.useEffect(()=>{if(!n||n&&!il(n)||p===ce.RECORDING)return;const L=ho(n==null?void 0:n.url,Yn());o?L?x():m():x()},[n,Yn(),o]),!o||!!(n!=null&&n.url)&&!ho(n==null?void 0:n.url,Yn())||n&&!il(n))return null;const A=y&&((y==null?void 0:y.selector)||(y==null?void 0:y.text)||(y==null?void 0:y.attributes)||(y==null?void 0:y.xpath))&&c&&p!==ce.RECORDING&&p!==ce.STARTING_RECORDING&&p!==ce.ENDING_RECORDING;return d.jsxs(d.Fragment,{children:[A&&d.jsx(db,{guideMePin:y,aiFallbackElementId:e,onTargetClick:C,onOtherTargetClick:k,onSelectorNotFound:m,onSelectorFound:_,actionType:n==null?void 0:n.kind,description:n==null?void 0:n.description,liveActionNumber:n==null?void 0:n.ordinal,canEdit:h}),E&&h&&d.jsx(pb,{liveAction:n})]})},fb=()=>{const{sidepanelFob:e}=Qe(ue.getState()),{showSidepanelFob:t}=re(rn),[n,r]=s.useState(!0),[o,i]=s.useState(!1);return s.useEffect(()=>{(async()=>{var c;(c=await chrome.storage.local.get("hasSeenExtensionFob"))!=null&&c.hasSeenExtensionFob&&i(!0),ta.send("isExtensionPinned").then(l=>{r(l)})})()},[]),s.useEffect(()=>{t&&(o||!n&&e)&&Rl("sidekick_button",e)},[t,o,n,e]),{isExtensionPinned:n,hasSeenExtensionFob:o}},hb=e=>s.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},s.createElement("g",{id:"Logo Mark"},s.createElement("g",{id:"Vector"},s.createElement("path",{d:"M8.00004 11.284C8.00004 11.1521 8.09191 11.0378 8.22129 11.0087L15.6534 9.33645C15.831 9.29649 16 9.43074 16 9.61179V12.2953C16 12.4272 15.9081 12.5416 15.7788 12.5707L8.3466 14.2429C8.16902 14.2829 8.00004 14.1486 8.00004 13.9676V11.284Z",fill:"white"}),s.createElement("path",{d:"M0 8.39425C0 8.26234 0.0918627 8.14801 0.221246 8.1189L15.6534 4.64663C15.8309 4.60668 15.9999 4.74093 15.9999 4.92198V7.6055C15.9999 7.73741 15.908 7.85174 15.7787 7.88085L0.34656 11.3531C0.168973 11.3931 0 11.2588 0 11.0778V8.39425Z",fill:"white"}),s.createElement("path",{d:"M0 3.70468C0 3.57277 0.0918627 3.45845 0.221246 3.42933L7.6534 1.75708C7.83098 1.71712 7.99996 1.85137 7.99996 2.03242V4.71595C7.99996 4.84786 7.90809 4.96218 7.77871 4.99129L0.34656 6.66355C0.168973 6.70351 0 6.56926 0 6.3882V3.70468Z",fill:"white"})))),gb=({browserContext:e})=>{const[t,n]=s.useState(document.body.scrollWidth),[r,o]=s.useState(window.innerHeight*(43/100)),[i,c]=s.useState(50),l=s.useRef(0),u=s.useRef(0),f=s.useRef(!1),[h,v]=s.useState(!1),[w,j]=s.useState(!1),[b,g]=s.useState(!1),[E,T]=s.useState(!1),{tab:I}=e,O=Il(I==null?void 0:I.url),a=()=>{g(!0),Y("sidekick_opened",{location:"sidekick_button"}),chrome.runtime.sendMessage({messageType:"openSidePanel",route:on.Home})},p=async(R="right_click")=>{T(!0),Y("sidekick_button_hide_clicked",{domainName:O,location:R});const P=await Sa()||[];au([...P,{domain:O,timeHidden:Date.now()}])},m=()=>{Y("sidekick_button_hover"),j(!0)},x=()=>{h||j(!1)},_=R=>{R.button===0&&(j(!1),v(!1),a())},C=R=>{if(!(f!=null&&f.current))return;const P=R.clientY-l.current,N=u.current+P,y=Math.max(0,Math.min(N,window.innerHeight));o(y),c(y/window.innerHeight*100)},k=()=>{f.current=!1,v(!1),j(!1),document.body.style.cursor="",document.body.style.userSelect="",window.removeEventListener("pointermove",C),window.removeEventListener("pointerup",k)},S=R=>{Y("sidekick_button_drag"),f.current=!0,v(!0),l.current=R.clientY,u.current=r,document.body.style.cursor="grabbing",document.body.style.userSelect="none",window.addEventListener("pointermove",C),window.addEventListener("pointerup",k)};if(s.useEffect(()=>{const R=()=>{n(document.body.scrollWidth),o(window.innerHeight*(i/100))};return window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R)}},[i]),s.useEffect(()=>{chrome.storage.local.set({hasSeenExtensionFob:!0}),chrome.storage.local.get("sidepanelActive",P=>{g(P.sidepanelActive)});const R=P=>{var N;if(P.messageType==="sidepanelOpened"&&g(!0),P.messageType==="sidepanelClosed"&&g(!1),P.messageType==="hiddenFobDomainsUpdated"){const y=((N=P.hiddenDomains)==null?void 0:N.some(({domain:A})=>A===O))||!1;T(y)}};return chrome.runtime.onMessage.addListener(R),()=>chrome.runtime.onMessage.removeListener(R)},[]),s.useEffect(()=>{(async()=>{const R=(await Sa()||[]).some(P=>P.domain===O);T(R)})()},[O]),b||E)return null;const M=18+(w?30:0);return d.jsx(dt,{children:d.jsx("div",{className:"group flex flex-col items-end pointer-events-none",style:{position:"absolute",top:r,left:t-M,zIndex:999999,transition:"left 0.3s cubic-bezier(0.4,0,0.2,1)"},id:"sidepanel-fob",children:d.jsxs("div",{className:"group flex flex-col items-center justify-center pointer-events-auto",onPointerEnter:m,onPointerLeave:x,children:[d.jsxs(de,{children:[d.jsx(pe,{children:d.jsx(Q,{variant:"link",onClick:()=>p("x_button"),icon:ja,iconProps:{className:"text-slate-400"},size:"small",className:$("text-slate-400 w-3.5 h-3.5 opacity-0 group-hover:opacity-100 mb-1",{"opacity-100":w}),screenReaderLabel:"Hide for this site"})}),d.jsx(me,{side:"left",sideOffset:8,className:"text-xs",variant:"compact",children:"Hide for this site"})]}),d.jsx("div",{className:"p-1 bg-slate-100/80 rounded-full shadow-[0px_0px_1px_0px_rgba(15,23,42,0.20),0px_5px_11px_0px_rgba(2,6,23,0.06),0px_2px_4px_0px_rgba(2,6,23,0.10)] outline outline-1 outline-offset-[-1px] outline-white/50 backdrop-blur-[3px] inline-flex flex-col justify-center items-center gap-1",style:{cursor:h?"grabbing":"pointer"},onPointerDown:_,children:d.jsxs("div",{className:"p-2 relative bg-gradient-to-tr from-[#3ac2ff] to-[#3c2edd] to-50% rounded-full shadow-[0px_0px_1.5px_0px_rgba(2,6,23,0.10)] outline outline-1 outline-offset-[-1px] outline-black/5 inline-flex justify-center items-center gap-2 overflow-hidden",children:[d.jsx("div",{className:" flex items-center z-10",children:d.jsx(hb,{})}),d.jsx("div",{className:"w-[32.56px] h-8 left-[28.02px] top-[20.65px] absolute origin-top-left rotate-[-125deg] bg-blend-overlay bg-gradient-to-br from-[#f45397] to-[#ffb425] to-60% blur-[5px] z-2"})]})}),d.jsx("div",{style:{cursor:h?"grabbing":"grab"},onPointerDown:S,className:"mt-[2px]",children:d.jsx(ae,{icon:ec,className:$("text-slate-400 w-3.5 h-3.5 opacity-0 group-hover:opacity-100",{"opacity-100":w})})})]})})})},sl="ToastProvider",[Mo,bb,vb]=Mc("Toast"),[ll,ux]=sn("Toast",[vb]),[xb,Kn]=ll(sl),cl=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:i=50,children:c}=e,[l,u]=s.useState(null),[f,h]=s.useState(0),v=s.useRef(!1),w=s.useRef(!1);return s.createElement(Mo.Provider,{scope:t},s.createElement(xb,{scope:t,label:n,duration:r,swipeDirection:o,swipeThreshold:i,toastCount:f,viewport:l,onViewportChange:u,onToastAdd:s.useCallback(()=>h(j=>j+1),[]),onToastRemove:s.useCallback(()=>h(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:w},c))};cl.propTypes={label(e){if(e.label&&typeof e.label=="string"&&!e.label.trim()){const t=`Invalid prop \`label\` supplied to \`${sl}\`. Expected non-empty \`string\`.`;return new Error(t)}return null}};const wb="ToastViewport",yb=["F8"],Ao="toast.viewportPause",Do="toast.viewportResume",_b=s.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=yb,label:o="Notifications ({hotkey})",...i}=e,c=Kn(wb,n),l=bb(n),u=s.useRef(null),f=s.useRef(null),h=s.useRef(null),v=s.useRef(null),w=ye(t,v,c.onViewportChange),j=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=c.toastCount>0;s.useEffect(()=>{const E=T=>{var I;r.every(O=>T[O]||T.code===O)&&((I=v.current)===null||I===void 0||I.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),s.useEffect(()=>{const E=u.current,T=v.current;if(b&&E&&T){const I=()=>{if(!c.isClosePausedRef.current){const m=new CustomEvent(Ao);T.dispatchEvent(m),c.isClosePausedRef.current=!0}},O=()=>{if(c.isClosePausedRef.current){const m=new CustomEvent(Do);T.dispatchEvent(m),c.isClosePausedRef.current=!1}},a=m=>{!E.contains(m.relatedTarget)&&O()},p=()=>{E.contains(document.activeElement)||O()};return E.addEventListener("focusin",I),E.addEventListener("focusout",a),E.addEventListener("pointermove",I),E.addEventListener("pointerleave",p),window.addEventListener("blur",I),window.addEventListener("focus",O),()=>{E.removeEventListener("focusin",I),E.removeEventListener("focusout",a),E.removeEventListener("pointermove",I),E.removeEventListener("pointerleave",p),window.removeEventListener("blur",I),window.removeEventListener("focus",O)}}},[b,c.isClosePausedRef]);const g=s.useCallback(({tabbingDirection:E})=>{const T=l().map(I=>{const O=I.ref.current,a=[O,...Fb(O)];return E==="forwards"?a:a.reverse()});return(E==="forwards"?T.reverse():T).flat()},[l]);return s.useEffect(()=>{const E=v.current;if(E){const T=I=>{const O=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!O){const x=document.activeElement,_=I.shiftKey;if(I.target===E&&_){var a;(a=f.current)===null||a===void 0||a.focus();return}const C=g({tabbingDirection:_?"backwards":"forwards"}),k=C.findIndex(S=>S===x);if(Oo(C.slice(k+1)))I.preventDefault();else{var p,m;_?(p=f.current)===null||p===void 0||p.focus():(m=h.current)===null||m===void 0||m.focus()}}};return E.addEventListener("keydown",T),()=>E.removeEventListener("keydown",T)}},[l,g]),s.createElement(rc,{ref:u,role:"region","aria-label":o.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:b?void 0:"none"}},b&&s.createElement(ul,{ref:f,onFocusFromOutsideViewport:()=>{const E=g({tabbingDirection:"forwards"});Oo(E)}}),s.createElement(Mo.Slot,{scope:n},s.createElement(se.ol,V({tabIndex:-1},i,{ref:w}))),b&&s.createElement(ul,{ref:h,onFocusFromOutsideViewport:()=>{const E=g({tabbingDirection:"backwards"});Oo(E)}}))}),kb="ToastFocusProxy",ul=s.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=e,i=Kn(kb,n);return s.createElement(la,V({"aria-hidden":!0,tabIndex:0},o,{ref:t,style:{position:"fixed"},onFocus:c=>{var l;const u=c.relatedTarget;!((l=i.viewport)!==null&&l!==void 0&&l.contains(u))&&r()}}))}),Qn="Toast",Eb="toast.swipeStart",Cb="toast.swipeMove",jb="toast.swipeCancel",Sb="toast.swipeEnd",Pb=s.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:i,...c}=e,[l=!0,u]=fr({prop:r,defaultProp:o,onChange:i});return s.createElement(Ae,{present:n||l},s.createElement(dl,V({open:l},c,{ref:t,onClose:()=>u(!1),onPause:Re(e.onPause),onResume:Re(e.onResume),onSwipeStart:te(e.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:te(e.onSwipeMove,f=>{const{x:h,y:v}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:te(e.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:te(e.onSwipeEnd,f=>{const{x:h,y:v}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),u(!1)})})))}),[Tb,Rb]=ll(Qn,{onClose(){}}),dl=s.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:i,onClose:c,onEscapeKeyDown:l,onPause:u,onResume:f,onSwipeStart:h,onSwipeMove:v,onSwipeCancel:w,onSwipeEnd:j,...b}=e,g=Kn(Qn,n),[E,T]=s.useState(null),I=ye(t,P=>T(P)),O=s.useRef(null),a=s.useRef(null),p=o||g.duration,m=s.useRef(0),x=s.useRef(p),_=s.useRef(0),{onToastAdd:C,onToastRemove:k}=g,S=Re(()=>{var P;E!=null&&E.contains(document.activeElement)&&((P=g.viewport)===null||P===void 0||P.focus()),c()}),M=s.useCallback(P=>{!P||P===1/0||(window.clearTimeout(_.current),m.current=new Date().getTime(),_.current=window.setTimeout(S,P))},[S]);s.useEffect(()=>{const P=g.viewport;if(P){const N=()=>{M(x.current),f==null||f()},y=()=>{const A=new Date().getTime()-m.current;x.current=x.current-A,window.clearTimeout(_.current),u==null||u()};return P.addEventListener(Ao,y),P.addEventListener(Do,N),()=>{P.removeEventListener(Ao,y),P.removeEventListener(Do,N)}}},[g.viewport,p,u,f,M]),s.useEffect(()=>{i&&!g.isClosePausedRef.current&&M(p)},[i,p,g.isClosePausedRef,M]),s.useEffect(()=>(C(),()=>k()),[C,k]);const R=s.useMemo(()=>E?hl(E):null,[E]);return g.viewport?s.createElement(s.Fragment,null,R&&s.createElement(Ib,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0},R),s.createElement(Tb,{scope:n,onClose:S},rr.createPortal(s.createElement(Mo.ItemSlot,{scope:n},s.createElement(oc,{asChild:!0,onEscapeKeyDown:te(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||S(),g.isFocusedToastEscapeKeyDownRef.current=!1})},s.createElement(se.li,V({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection},b,{ref:I,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:te(e.onKeyDown,P=>{P.key==="Escape"&&(l==null||l(P.nativeEvent),P.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,S()))}),onPointerDown:te(e.onPointerDown,P=>{P.button===0&&(O.current={x:P.clientX,y:P.clientY})}),onPointerMove:te(e.onPointerMove,P=>{if(!O.current)return;const N=P.clientX-O.current.x,y=P.clientY-O.current.y,A=!!a.current,z=["left","right"].includes(g.swipeDirection),F=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,L=z?F(0,N):0,D=z?0:F(0,y),B=P.pointerType==="touch"?10:2,q={x:L,y:D},G={originalEvent:P,delta:q};A?(a.current=q,Zn(Cb,v,G,{discrete:!1})):gl(q,g.swipeDirection,B)?(a.current=q,Zn(Eb,h,G,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(N)>B||Math.abs(y)>B)&&(O.current=null)}),onPointerUp:te(e.onPointerUp,P=>{const N=a.current,y=P.target;if(y.hasPointerCapture(P.pointerId)&&y.releasePointerCapture(P.pointerId),a.current=null,O.current=null,N){const A=P.currentTarget,z={originalEvent:P,delta:N};gl(N,g.swipeDirection,g.swipeThreshold)?Zn(Sb,j,z,{discrete:!0}):Zn(jb,w,z,{discrete:!0}),A.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})))),g.viewport))):null});dl.propTypes={type(e){if(e.type&&!["foreground","background"].includes(e.type)){const t=`Invalid prop \`type\` supplied to \`${Qn}\`. Expected \`foreground | background\`.`;return new Error(t)}return null}};const Ib=e=>{const{__scopeToast:t,children:n,...r}=e,o=Kn(Qn,t),[i,c]=s.useState(!1),[l,u]=s.useState(!1);return Ob(()=>c(!0)),s.useEffect(()=>{const f=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(f)},[]),l?null:s.createElement(lr,{asChild:!0},s.createElement(la,r,i&&s.createElement(s.Fragment,null,o.label," ",n)))},Nb=s.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.createElement(se.div,V({},r,{ref:t}))}),Mb=s.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.createElement(se.div,V({},r,{ref:t}))}),Ab="ToastAction",pl=s.forwardRef((e,t)=>{const{altText:n,...r}=e;return n?s.createElement(fl,{altText:n,asChild:!0},s.createElement(ml,V({},r,{ref:t}))):null});pl.propTypes={altText(e){return e.altText?null:new Error(`Missing prop \`altText\` expected on \`${Ab}\``)}};const Db="ToastClose",ml=s.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,o=Rb(Db,n);return s.createElement(fl,{asChild:!0},s.createElement(se.button,V({type:"button"},r,{ref:t,onClick:te(e.onClick,o.onClose)})))}),fl=s.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...o}=e;return s.createElement(se.div,V({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},o,{ref:t}))});function hl(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Lb(n)){const r=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!r)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...hl(n))}}),t}function Zn(e,t,n,{discrete:r}){const o=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Rc(o,i):o.dispatchEvent(i)}const gl=(e,t,n=0)=>{const r=Math.abs(e.x),o=Math.abs(e.y),i=r>o;return t==="left"||t==="right"?i&&r>n:!i&&o>n};function Ob(e=()=>{}){const t=Re(e);Ca(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Lb(e){return e.nodeType===e.ELEMENT_NODE}function Fb(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Oo(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}const zb=cl,Bb=_b,Hb=Pb,$b=Nb,Vb=Mb,Ub=pl,qb=ml,Gb=zb,Wb=s.forwardRef(({className:e,...t},n)=>d.jsx(Bb,{ref:n,className:$("fixed bottom-auto right-0 top-0 z-[999999] flex max-h-screen w-[400px] max-w-full p-4",e),...t})),Xb=({children:e})=>d.jsx("div",{className:"mt-3 flex flex-row gap-2",children:e}),Jn=s.forwardRef(({className:e,children:t,variant:n,onClick:r,href:o,rel:i,target:c,altText:l,...u},f)=>d.jsx(Ub,{asChild:!0,ref:f,onClick:r,altText:l,...u,children:d.jsx(Q,{size:"small",variant:n,className:e,theme:"dark",href:o,rel:i,target:c,children:t})})),Yb=s.forwardRef(({className:e,onClick:t,...n},r)=>d.jsx(qb,{ref:r,"aria-label":"Close",className:$("bg-transparent p-0 text-slate-400 opacity-0 transition-opacity hover:text-slate-100 focus:opacity-100 group-hover:opacity-100",e),asChild:!0,"toast-close":"",onClick:t,...n,children:d.jsx(Q,{variant:"ghost",className:"-m-0.5 h-6 w-6 p-0",icon:ja})})),Kb=s.forwardRef(({className:e,...t},n)=>d.jsx($b,{ref:n,className:$("m-0 font-sans text-sm font-semibold leading-5 text-slate-100",e),...t})),Qb=s.forwardRef(({className:e,...t},n)=>d.jsx(Vb,{ref:n,className:$("m-0 font-sans text-sm font-normal leading-5 text-slate-400",e),...t})),Zb=nn("h-5 w-5",{variants:{variant:{info:"text-indigo-400",error:"text-red-500",success:"text-green-400",warning:"text-yellow-500"}},defaultVariants:{variant:"info"}}),Jb=s.forwardRef(({className:e,variant:t="info",icon:n,children:r,onDismiss:o,title:i,description:c,...l},u)=>{const f=()=>{switch(t){case"error":return ru;case"success":return nu;case"warning":return tu;default:return eu}};return d.jsxs(Hb,{ref:u,className:$("data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full shadow-toast group pointer-events-auto relative flex w-[400px] max-w-full justify-between gap-2.5 overflow-hidden rounded-lg bg-slate-800 p-4 transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none",e),...l,children:[d.jsx(ae,{icon:n??f(),"data-testid":"toast-icon",className:$(Zb({variant:t}),"mt-0.5 size-4")}),d.jsxs("div",{className:"flex flex-1 flex-col items-start",children:[i&&d.jsx(Kb,{children:i}),c&&d.jsx(Qb,{className:"mt-0.5",children:c}),r]}),d.jsx(Yb,{onClick:o})]})}),ev=()=>{const{toasts:e}=av();return d.jsxs(Gb,{children:[e.map(({id:t,title:n,description:r,action:o,onDismiss:i,...c})=>d.jsx(Jb,{onDismiss:i,title:n,description:r,...c,children:o},t)),d.jsx(Wb,{})]})},tv=1,nv=1e6;let Lo=0;function rv(){return Lo=(Lo+1)%Number.MAX_SAFE_INTEGER,Lo.toString()}const Fo=new Map,bl=e=>{if(Fo.has(e))return;const t=setTimeout(()=>{Fo.delete(e),Jt({type:"REMOVE_TOAST",toastId:e})},nv);Fo.set(e,t)},ov=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,tv)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?bl(n):e.toasts.forEach(r=>{bl(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},er=[];let tr={toasts:[]};function Jt(e){tr=ov(tr,e),er.forEach(t=>{t(tr)})}function vl({...e}){const t=rv(),n=o=>Jt({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Jt({type:"DISMISS_TOAST",toastId:t});return Jt({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function av(){const[e,t]=s.useState(tr);return s.useEffect(()=>(er.push(t),()=>{const n=er.indexOf(t);n>-1&&er.splice(n,1)}),[e]),{...e,toast:vl,dismiss:n=>Jt({type:"DISMISS_TOAST",toastId:n})}}const iv=({checked:e=!1,onValueChange:t,className:n,disabled:r,dataTestID:o,...i})=>d.jsx("input",{type:"checkbox",checked:e,disabled:r,onChange:c=>t==null?void 0:t(c.target.checked),className:Ze("m-0.5 h-4 w-4 rounded border border-slate-400 bg-white text-indigo-500 hover:border-indigo-400 hover:bg-indigo-50 focus:border-indigo-400 focus:bg-indigo-50 focus:ring-0 focus:ring-indigo-500 focus:ring-opacity-0",n),"data-testid":o,...i}),sv="scribe-by://scribehow.com/signin",lv="scribehow://scribehow.com/signin",cv=({onCancel:e,hasPaidSubscription:t,installedDesktopRecorder:n})=>{const[r,o]=s.useState(t);return s.useEffect(()=>{const i=d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"mb-3",children:t?"No problem! Use the desktop app.":"No problem! To capture guides for other applications, use Scribe Pro's desktop app."}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(iv,{id:"dnsa",checked:r,onValueChange:()=>o(!r)}),d.jsx("label",{htmlFor:"dnsa",className:"leading-2 font-sans text-xs font-normal text-slate-500",children:"Don't remind me again."})]})]});let c;t&&n?c=d.jsx(Jn,{altText:"Switch to Desktop",onClick:()=>{Y("switch_to_desktop",{location:"web_only_notification"}),Nl()===Ml.MacOS?window.open(lv):window.open(sv)},className:"!mt-2",children:"Switch to Desktop"}):t&&!n?c=d.jsx(Jn,{altText:"Install Desktop App",onClick:()=>{Y("get_scribe_desktop",{location:"web_only_notification"}),window.open("https://scribehow.com/get-desktop")},className:"!mt-2",children:"Install Desktop App"}):c=d.jsx(Jn,{altText:"Get Scribe Pro",onClick:()=>{Y("show_pro_features_workspace_page",{location:"web_only_notification"}),window.open(ga("web_only_notification"))},className:"!mt-2",children:"Get Scribe Pro"}),vl({title:"Capturing outside the browser?",description:i,onOpenChange:l=>{l||(e==null||e(r))},action:d.jsxs(Xb,{children:[c,d.jsx(Jn,{altText:"Dismiss",variant:"secondary",onClick:()=>e==null?void 0:e(r),className:"!mt-2",children:"Dismiss"})]})})},[r,t,n,e]),null},zo="won-dnsa",uv=({isPlanFree:e})=>{const{userData:t}=re(ar),{installed_desktop_recorder:n}=t||{},[r,o]=s.useState(!1);return s.useEffect(()=>{const i=async(c,l,u)=>{c.messageType==="switchedAwayFromBrowser"&&chrome.storage.sync.get([zo],f=>{f[zo]!==!0?(Y("switched_away_from_browser",{show_web_only_notification:!0,installed_desktop_recorder:n},ea),o(!0)):Y("switched_away_from_browser",{show_web_only_notification:!1,installed_desktop_recorder:n},ea)})};return chrome.runtime.onMessage.addListener(i),()=>chrome.runtime.onMessage.removeListener(i)},[]),r?d.jsx(cv,{hasPaidSubscription:!e,installedDesktopRecorder:!!n,onCancel:i=>{o(!1),Y("dismiss_web_only_notification",{do_not_show_again:i,is_plan_free:e}),chrome.storage.sync.set({[zo]:i})}}):null},dv=()=>{const{workspaceScribes:e,galleryScribes:t,scribeCountOnDomain:n}=re(Al),{userData:r,userGrowthState:o}=re(ar),{recordModalVisible:i}=re(Jo),{dropdownOpen:c}=re(Qo),l=re(Dl),{isMissingPermissions:u}=re(pc),f=re(Zo),h=re(Ol),v=re(Ll),w=s.useRef(null),j=()=>chrome.runtime.sendMessage({messageType:"closeDropdown"}),{copilot:b,scribeLivePhoenix2023q3:g,sidepanelFob:E,pinTreasures:T}=Qe(ue.getState()),{showSidepanelFob:I}=re(rn),{hasSeenExtensionFob:O}=fb();Eu(j,w),vc(),fc(),hc(),gc();const{pins:a}=re(Yo);return s.useEffect(()=>{T&&chrome.runtime.sendMessage({messageType:"fetchPins"})},[T]),l?d.jsxs(d.Fragment,{children:[I&&(O||E==="experiment")&&d.jsx(gb,{browserContext:v}),T&&d.jsx(_p,{pins:a}),b&&h&&d.jsx(yu,{}),b&&h&&d.jsx(ku,{}),g&&d.jsx(bu,{children:d.jsx(mb,{})}),d.jsx(ev,{}),f&&d.jsx(Qh,{isPlanFree:cn(r)}),f&&!h&&d.jsx(uv,{isPlanFree:cn(r)}),d.jsx(gu,{in:c,nodeRef:w,timeout:300,classNames:"Widget",unmountOnExit:!0,children:d.jsx("div",{id:"ScribeApp",ref:w,children:d.jsx(mc,{scribeCountOnDomain:n,workspaceScribes:e,galleryScribes:t,user:r,onClose:j,missingPermissions:u,userGrowthState:o})})}),i&&d.jsx(Cu,{})]}):(c&&document.hasFocus()&&chrome.runtime.sendMessage({messageType:"trackNewRelicLog",name:"extension_content_not_displayed",details:{...v,url:window.location.href}}),null)};var pv=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};pv.SENTRY_RELEASE={id:"c7e5656e859d02ad6b0b543cae8f4abd4f8ff10c"};let en;function mv(){document.body.addEventListener("click",()=>{var e,t,n;(e=document.body.dataset)!=null&&e.openSidepanelDocsOnBodyClick&&(chrome.runtime.connect({name:"sidePanelPort"}).postMessage({messageType:"openSidePanel",route:on.Assistant}),document.body.removeAttribute("data-open-sidepanel-docs-on-body-click")),(t=document.body.dataset)!=null&&t.openSidepanelHomeOnBodyClick&&(chrome.runtime.connect({name:"sidePanelPort"}).postMessage({messageType:"openSidePanel",route:on.Home}),document.body.removeAttribute("data-open-sidepanel-home-on-body-click")),(n=document.body.dataset)!=null&&n.openSidepanelRecorderOnBodyClick&&(chrome.runtime.connect({name:"sidePanelPort"}).postMessage({messageType:"openSidePanel",route:on.Recorder}),document.body.removeAttribute("data-open-sidepanel-recorder-on-body-click"))},!0)}Fl&&mv();try{if((xl=window.document.documentElement)!=null&&xl.getAttribute("data-html2canvasroot"))throw new Error("injecting into html2canvas frame, skipping init");const e=document.getElementById(Rt);e&&e.remove();const t=document.createElement("scribe-shadow");t.id=Rt,t.style.cssText="position: fixed; width: 0; height: 0;  top: 0; left: 0; z-index: 2147483647; overflow: visible; visibility: visible;",t.setAttribute("data-crx",chrome.runtime.id),document.body.appendChild(t);const n=t.attachShadow({mode:"open"}),r=new FontFace("Public Sans",`url('${chrome.runtime.getURL(Bl)}')`);document.fonts.add(r);const o=document.createElement("div");o.id="root-scribe-elem",o.style.cssText="position: fixed; width: 0; height: 0; top: 0; left: 0; overflow: visible; color: #0f172a;",n.appendChild(o),en=()=>{St.render(d.jsxs(H.StrictMode,{children:[void 0,d.jsx(Hl,{store:ue,children:d.jsx(dv,{})})]}),o)},cu().then(i=>{i===Pt.Arc&&($l("recordingControlsPreference","floating-button"),chrome.runtime.sendMessage({messageType:"optionsChanged"})),zl("detectedBrowser",i),chrome.storage.local.set({detectedBrowser:i})});{const i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",chrome.runtime.getURL("/assets/style.css")),i.onload=en,n.appendChild(i)}}catch(e){console.log(e)}const fv=()=>{en==null||en()};export{fv as onExecute};
