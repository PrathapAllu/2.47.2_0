import{v as y}from"./v4-c70744d4.js";const C=`.scrb-dialog-menu{display:none;flex-direction:column;width:180px;border-radius:8px;box-shadow:#00000026 0 2px 8px;position:absolute;bottom:30px;left:20px;font-size:14px;overflow:hidden;box-sizing:content-box;background-color:#fff;z-index:300}.scrb-dialog-menu-item{display:flex;flex-direction:row;align-items:center;width:calc(100% - 24px);padding:6px 12px;cursor:pointer;box-sizing:content-box}.scrb-dialog-menu-item:hover{background-color:#e0e7ff}.scrb-dialog-menu-item-title{font-size:14px;color:#334155}.scrb-dialog-menu-item-icon{width:16px;height:16px;margin-right:8px}
`,w=()=>{console.log("Calling the default (empty) button create function")},h=e=>{const n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");n.appendChild(t),t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))},E=(e=0)=>{document.readyState==="complete"?l.config.createScribeButton():window.addEventListener("load",function(){setTimeout(l.config.createScribeButton,e)})},S=()=>{console.log("Calling default handleHideSelectModal handler")},v=e=>{console.log("Calling default handleSelectedItemFromModal handler")};let l={config:{menuAdditionalClass:"",scriptInjectLocation:"",createScribeButton:w,onScriptLoaded:E,handleHideSelectModal:S,handleSelectedItemFromModal:v}};const L=e=>{l.config={...l.config,...e}},b=()=>l.config,M=(e=20)=>`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${e}px" height="${e}px" viewBox="0 0 500 501" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <path d="M500 250.157C500 388.228 388.071 500.157 250 500.157C111.929 500.157 0 388.228 0 250.157C0 112.086 111.929 0.156982 250 0.156982C388.071 0.156982 500 112.086 500 250.157Z" fill="#FF5466"/>
    <path d="M250.005 317.962C250.005 315.239 251.891 312.879 254.547 312.278L407.128 277.752C410.774 276.927 414.243 279.699 414.243 283.437V338.841C414.243 341.565 412.357 343.925 409.701 344.526L257.12 379.052C253.474 379.877 250.005 377.105 250.005 373.367V317.962Z" fill="white"/>
    <path d="M85.7656 258.3C85.7656 255.576 87.6516 253.216 90.3078 252.615L407.128 180.926C410.774 180.101 414.243 182.873 414.243 186.611V242.015C414.243 244.738 412.357 247.099 409.701 247.7L92.8805 319.389C89.2346 320.214 85.7656 317.442 85.7656 313.704V258.3Z" fill="white"/>
    <path d="M85.7656 161.478C85.7656 158.755 87.6516 156.394 90.3078 155.793L242.889 121.268C246.535 120.443 250.004 123.214 250.004 126.952V182.357C250.004 185.08 248.118 187.441 245.462 188.042L92.8805 222.567C89.2346 223.392 85.7656 220.621 85.7656 216.883V161.478Z" fill="white"/>
</svg>`,m=(e,n)=>{n==null&&(n={}),chrome.runtime.sendMessage({messageType:"trackEvent",name:e,details:n},t=>{})},T=()=>{chrome.runtime.sendMessage({messageType:"widgetOpenSelectModal"},e=>{})},A=e=>{chrome.runtime.sendMessage({messageType:"widgetOpenRecordModal",isGmail:e},n=>{})},u=(e,n=!1)=>{const{display:t}=window.getComputedStyle(e,null);t==="none"?(m("opened_injected_dialog",{location:l.config.scriptInjectLocation}),e.style.display="flex",setTimeout(()=>{const c=i=>{document.removeEventListener("click",c);const o=e.contains(i.target);console.log("Handling click!"),o||u(e,!0)};document.addEventListener("click",c)},200)):e.style.display="none"},I=e=>{const{display:n}=window.getComputedStyle(e,null);n==="none"&&u(e)},j=(e,n=!0,t,c=!1)=>{const i=document.createElement("div"),o=document.createElement("div");o.setAttribute("class","scrb-dialog-menu-item");const s=document.createElement("img");s.setAttribute("class","scrb-dialog-menu-item-icon"),s.src=chrome.runtime.getURL("assets/icons/recording.png");const d=document.createElement("span");if(d.setAttribute("class","scrb-dialog-menu-item-title"),d.innerText="Capture new Scribe",o.appendChild(s),o.appendChild(d),o.onclick=()=>{t==null||t(),u(i),A(c),m("injected_dialog_clicked_record",{location:l.scriptInjectLocation})},i.appendChild(o),n){const r=document.createElement("div");r.setAttribute("class","scrb-dialog-menu-item");const g=document.createElement("img");g.setAttribute("class","scrb-dialog-menu-item-icon"),g.src=chrome.runtime.getURL("assets/icons/add.png");const f=document.createElement("span");f.setAttribute("class","scrb-dialog-menu-item-title"),f.innerText="Select a Scribe",r.appendChild(g),r.appendChild(f),r.onclick=()=>{t==null||t(),u(i),T(),m("injected_dialog_clicked_select",{location:l.config.scriptInjectLocation})},i.appendChild(r)}return i.setAttribute("class",`scrb-dialog-menu ${l.config.menuAdditionalClass}`),i};chrome.runtime.onMessage.addListener(async(e,n,t)=>{e.messageType==="widgetCancelModal"?(l.config.handleHideSelectModal(),t(!0)):e.messageType==="widgetSelectedFromModal"&&(m("injected_dialog_selected_scribe",{location:l.config.scriptInjectLocation,scribe_id:e.scribe_id}),l.config.handleSelectedItemFromModal(e),t(!0))});const k=`.add-scrb-button-gm{width:26px;height:26px;color:#7e7e7e;border-radius:4px;background-color:transparent;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-right:-2px}.add-scrb-button-gm:hover{background-color:#f4f4f4;color:#1a1a1a}
`;var _=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};_.SENTRY_RELEASE={id:"c7e5656e859d02ad6b0b543cae8f4abd4f8ff10c"};let a=null;const B=()=>{a=null},F=()=>{chrome.runtime.onMessage.addListener(async(e,n,t)=>{if(e.messageType==="addGmailRecording"){if(a){const c=document.getElementById(a);if(!c)return;const{url:i,name:o,html:s}=e,d=x(c.parentElement);d.innerHTML+=`
${s}
`}t(!0)}})},H=e=>{if(!a)return;const n=document.getElementById(a);if(a=null,!n)return;const{url:t,name:c,html:i}=e,o=x(n.parentElement);o.innerHTML+=`
${i}
`},x=e=>e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('div[role="textbox"]');function p(e=!0,n=!0){const t=document.getElementsByClassName("btC");return h(k),h(C),t&&t.length?([...t].forEach(c=>{const i=Array.from(c.childNodes).find(o=>o.classList.contains("add-scrb"));if(!n&&i){i.remove();return}if(!i){if(!n)return;const o=document.createElement("td");o.setAttribute("class","add-scrb"),o.setAttribute("style","padding: 0 0 0 12px; display: flex; align-items: center; justify-content: center; position: relative");const s=j(c,!0,()=>{a=o.id?o.id.trim():null},!0),d=document.createElement("div");d.innerHTML=M(14),d.setAttribute("class","add-scrb-button-gm"),d.setAttribute("data-tooltip","Scribe Actions"),d.onclick=function(r){I(s)},o.appendChild(d),m("injected_button",{location:b().scriptInjectLocation}),o.appendChild(s),c.insertBefore(o,c.childNodes[1]),o.id=y()}}),!0):(e&&window.requestAnimationFrame(()=>p(!1)),!1)}const R=()=>{function e(){const t=document.getElementsByClassName("ams"),c=Array.from(t).find(i=>i.textContent==="Reply");c&&c.addEventListener("click",function(){chrome.runtime.sendMessage({messageType:"shouldInjectScribeButton"},i=>{setTimeout(()=>p(!0,i),100)})})}let n=location.href;new MutationObserver(()=>{const t=location.href;t!==n&&(n=t,e())}).observe(document,{subtree:!0,childList:!0}),e()},N=()=>{chrome.runtime.sendMessage({messageType:"shouldInjectScribeButton"},e=>{if(!e)return;let n=null;const t=setInterval(()=>{p(!1)&&(clearInterval(t),n&&clearTimeout(n))},500);n=setTimeout(()=>{clearInterval(t)},1e4),R()}),Array.from(document.querySelectorAll('div[role="button"]')).find(e=>e.textContent==="Compose").addEventListener("click",function(){chrome.runtime.sendMessage({messageType:"shouldInjectScribeButton"},e=>{setTimeout(()=>p(!0,e),100)})}),F()};L({scriptInjectLocation:"gmail",handleHideSelectModal:B,handleSelectedItemFromModal:H,createScribeButton:N}),b().onScriptLoaded();
